<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Shiny Server v1.1.0 Configuration Reference</title>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,400italic,600italic,700italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <style type="text/css">
  .pro:after { 
    content: " - Pro Only!";
    color: #B22;
  }
  ul li a code.pro:after {
    content:"" !important; /* Bug in Pandoc adds classes on only these headers in TOC. */
  }

  .pro-chunk, .pro-section{
    margin-top: 10px;
    margin-bottom: 10px;
    margin-left: 30px;
    padding-left: 15px;
    border-left: 3px solid #c77;  
  }

  .pro-tag {
    float: left; 
    position: relative;
    -moz-transform: rotate(270deg);  /* FF3.5+ */        
    -o-transform: rotate(270deg);  /* Opera 10.5 */   
    -webkit-transform: rotate(270deg);  /* Saf3.1+, Chrome */              
    filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=3);  /* IE6,IE7 */          
    -ms-filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); /* IE8 */
    color: #c77;
  }

  .warn{
    color: red;
  }
  a {
    color: #26A;
    text-decoration: none;
  }
  label {
    font-weight: 600;
  }

  body {
    font-family: 'Source Sans Pro', sans-serif;
    color: #222;
    line-height: 1.4em;
  }

  #container {
    max-width: 800px;
    margin: 20px auto 80px auto;
  }

  code, .code {
    font-family: 'Source Sans Pro', sans-serif;
    font-weight: 600;
  }

  pre {
    font-size: 14px;
    border: 1px solid #CCC;
    background-color: #EEE;
    padding: 16px 20px;
  }
  pre code, pre .code {
    font-family: 'Courier New', monospace;
    font-weight: normal;
  }

  h1 {
    margin: 0;
  }
  h2 {
    font-size: 30px;
    margin: 60px 0 20px 0;
  }
  strong {
    font-weight: 600;
  }

  #toc {
    display: inline-block;
    width: auto;
    border: 1px solid #CCC;
    padding: 12px 48px 12px 18px;
    margin-top: 30px;
  }

  #toc h2 {
    font-size: 24px;
    font-weight: 600;
    margin: 4px 0 8px 0;
  }

  #toc ul {
    list-style: square outside;
    margin: 0;
  }

  #deploymodels h3 {
    margin-bottom: 0;
  }
  #deploymodels p {
    margin: 6px 0;
  }

  ul.directives {
    list-style: none;
    padding-left: 0;
  }
  ul.directives li {
    margin: 40px 0 0 0;
  }
  ul.directives h3 {
    color: black;
    font-weight: 600;
    font-size: 26px;
    margin-bottom: 4px;
  }
  ul.directives h3+p {
    margin-top: 0;
  }

  table {
    margin-top: 16px;
    border-spacing: 0;
    border-collapse: collapse;
    width: 100%;
  }
  table td, table th {
    font-size: 14px;
    padding: 3px 12px;
    border: 1px solid #CCC;
  }
  table th {
    font-weight: 600;
    text-align: left;
  }
  </style>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #0000ff; }
code > span.ch { color: #008080; }
code > span.st { color: #008080; }
code > span.co { color: #008000; }
code > span.ot { color: #ff4000; }
code > span.al { color: #ff0000; }
code > span.er { font-weight: bold; }
  </style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20375833-6', 'rstudio.github.io');
  ga('send', 'pageview');

</script>

</head>
<body>
<header>
<h1 class="title">Shiny Server Professional v1.1.0 Administrator's Guide</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#getting-started"><span class="toc-section-number">1</span> Getting Started</a><ul>
<li><a href="#introduction"><span class="toc-section-number">1.1</span> Introduction</a></li>
<li><a href="#system-requirements"><span class="toc-section-number">1.2</span> System Requirements</a></li>
<li><a href="#installation"><span class="toc-section-number">1.3</span> Installation</a><ul>
<li><a href="#ubuntu-12.04"><span class="toc-section-number">1.3.1</span> Ubuntu (12.04+)</a></li>
<li><a href="#redhatcentos-5.4"><span class="toc-section-number">1.3.2</span> RedHat/CentOS (5.4+)</a></li>
<li><a href="#install-shiny"><span class="toc-section-number">1.3.3</span> Install Shiny</a></li>
<li><a href="#r-installation-location"><span class="toc-section-number">1.3.4</span> R Installation Location</a></li>
</ul></li>
<li><a href="#stopping-and-starting"><span class="toc-section-number">1.4</span> Stopping and Starting</a><ul>
<li><a href="#upstart"><span class="toc-section-number">1.4.1</span> Upstart</a></li>
<li><a href="#init.d"><span class="toc-section-number">1.4.2</span> init.d</a></li>
</ul></li>
</ul></li>
<li><a href="#server-management"><span class="toc-section-number">2</span> Server Management</a><ul>
<li><a href="#default-configuration"><span class="toc-section-number">2.1</span> Default Configuration</a></li>
<li><a href="#server-hierarchy"><span class="toc-section-number">2.2</span> Server Hierarchy</a><ul>
<li><a href="#server"><span class="toc-section-number">2.2.1</span> Server</a></li>
<li><a href="#location"><span class="toc-section-number">2.2.2</span> Location</a></li>
<li><a href="#application"><span class="toc-section-number">2.2.3</span> Application</a></li>
</ul></li>
<li><a href="#run_as"><span class="toc-section-number">2.3</span> <code>run_as</code></a><ul>
<li><a href="#running-shiny-server-with-root-privileges"><span class="toc-section-number">2.3.1</span> Running Shiny Server with Root Privileges</a></li>
</ul></li>
<li><a href="#local-app-configurations"><span class="toc-section-number">2.4</span> Local App Configurations</a></li>
<li><a href="#hosting-model"><span class="toc-section-number">2.5</span> Hosting Model</a><ul>
<li><a href="#host-a-directory-of-applications"><span class="toc-section-number">2.5.1</span> Host a Directory of Applications</a></li>
<li><a href="#host-a-single-application"><span class="toc-section-number">2.5.2</span> Host a Single Application</a></li>
<li><a href="#host-per-user-application-directories"><span class="toc-section-number">2.5.3</span> Host Per-User Application Directories</a></li>
</ul></li>
<li><a href="#redirecting"><span class="toc-section-number">2.6</span> Redirecting</a></li>
<li><a href="#virtual-hosts"><span class="toc-section-number">2.7</span> Virtual Hosts</a></li>
<li><a href="#custom-templates"><span class="toc-section-number">2.8</span> Custom Templates</a></li>
<li><a href="#server-log"><span class="toc-section-number">2.9</span> Server Log</a><ul>
<li><a href="#access-logs"><span class="toc-section-number">2.9.1</span> Access Logs</a></li>
</ul></li>
<li><a href="#health-check-endpoint"><span class="toc-section-number">2.10</span> Health Check Endpoint</a></li>
<li><a href="#environment-variable-settings"><span class="toc-section-number">2.11</span> Environment Variable Settings</a><ul>
<li><a href="#shiny_log_level"><span class="toc-section-number">2.11.1</span> <code>SHINY_LOG_LEVEL</code></a></li>
<li><a href="#r"><span class="toc-section-number">2.11.2</span> <code>R</code></a></li>
<li><a href="#shiny_data_dir"><span class="toc-section-number">2.11.3</span> <code class="pro">SHINY_DATA_DIR</code></a></li>
</ul></li>
</ul></li>
<li><a href="#deploying-applications"><span class="toc-section-number">3</span> Deploying Applications</a><ul>
<li><a href="#schedulers-application-restarts"><span class="toc-section-number">3.1</span> Schedulers &amp; Application Restarts</a><ul>
<li><a href="#restarting-an-application"><span class="toc-section-number">3.1.1</span> Restarting an Application</a></li>
<li><a href="#simple-scheduler"><span class="toc-section-number">3.1.2</span> Simple Scheduler</a></li>
<li><a href="#utilization-scheduler"><span class="toc-section-number">3.1.3</span> Utilization Scheduler</a></li>
</ul></li>
<li><a href="#application-timeouts"><span class="toc-section-number">3.2</span> Application Timeouts</a></li>
<li><a href="#session-timeouts"><span class="toc-section-number">3.3</span> Session Timeouts</a></li>
<li><a href="#logging-and-analytics"><span class="toc-section-number">3.4</span> Logging and Analytics</a><ul>
<li><a href="#application-error-logs"><span class="toc-section-number">3.4.1</span> Application Error Logs</a></li>
<li><a href="#google-analytics"><span class="toc-section-number">3.4.2</span> Google Analytics</a></li>
</ul></li>
<li><a href="#memory-limits"><span class="toc-section-number">3.5</span> Memory Limits</a></li>
<li><a href="#reactivity-log"><span class="toc-section-number">3.6</span> Reactivity Log</a></li>
<li><a href="#specifying-protocols"><span class="toc-section-number">3.7</span> Specifying Protocols</a></li>
</ul></li>
<li><a href="#authentication-security"><span class="toc-section-number">4</span> Authentication &amp; Security</a><ul>
<li><a href="#authentication-overview"><span class="toc-section-number">4.1</span> Authentication Overview</a></li>
<li><a href="#auth-duration"><span class="toc-section-number">4.2</span> Auth Duration</a></li>
<li><a href="#flat-file-authentication"><span class="toc-section-number">4.3</span> Flat-File Authentication</a><ul>
<li><a href="#sspasswd"><span class="toc-section-number">4.3.1</span> sspasswd</a></li>
</ul></li>
<li><a href="#ldap-and-active-directory"><span class="toc-section-number">4.4</span> LDAP and Active Directory</a><ul>
<li><a href="#user_bind_template"><span class="toc-section-number">4.4.1</span> <code class="pro">user_bind_template</code></a></li>
<li><a href="#group_search_base"><span class="toc-section-number">4.4.2</span> <code class="pro">group_search_base</code></a></li>
<li><a href="#group_filter"><span class="toc-section-number">4.4.3</span> <code class="pro">group_filter</code></a></li>
<li><a href="#group_name_attribute"><span class="toc-section-number">4.4.4</span> <code class="pro">group_name_attribute</code></a></li>
<li><a href="#trusted_ca"><span class="toc-section-number">4.4.5</span> <code class="pro">trusted_ca</code></a></li>
<li><a href="#check_ssl_ca"><span class="toc-section-number">4.4.6</span> <code class="pro">check_ssl_ca</code></a></li>
<li><a href="#user_filter"><span class="toc-section-number">4.4.7</span> <code class="pro">user_filter</code></a></li>
<li><a href="#user_search_base"><span class="toc-section-number">4.4.8</span> <code class="pro">user_search_base</code></a></li>
</ul></li>
<li><a href="#required-users-groups"><span class="toc-section-number">4.5</span> Required Users &amp; Groups</a><ul>
<li><a href="#user-authentication"><span class="toc-section-number">4.5.1</span> User Authentication</a></li>
<li><a href="#group-authentication"><span class="toc-section-number">4.5.2</span> Group Authentication</a></li>
</ul></li>
<li><a href="#proxied-headers"><span class="toc-section-number">4.6</span> Proxied Headers</a></li>
<li><a href="#ssl"><span class="toc-section-number">4.7</span> SSL</a></li>
</ul></li>
<li><a href="#admin"><span class="toc-section-number">5</span> Admin</a><ul>
<li><a href="#configuration"><span class="toc-section-number">5.1</span> Configuration</a></li>
<li><a href="#organization"><span class="toc-section-number">5.2</span> Organization</a></li>
<li><a href="#killing-processes-and-connections"><span class="toc-section-number">5.3</span> Killing Processes and Connections</a></li>
</ul></li>
<li><a href="#licensing-activation"><span class="toc-section-number">6</span> Licensing &amp; Activation</a><ul>
<li><a href="#product-activation"><span class="toc-section-number">6.1</span> Product Activation</a><ul>
<li><a href="#activation-basics"><span class="toc-section-number">6.1.1</span> Activation Basics</a></li>
<li><a href="#virtual-machines"><span class="toc-section-number">6.1.2</span> Virtual Machines</a></li>
</ul></li>
<li><a href="#connectivity-requirements"><span class="toc-section-number">6.2</span> Connectivity Requirements</a><ul>
<li><a href="#proxy-servers"><span class="toc-section-number">6.2.1</span> Proxy Servers</a></li>
<li><a href="#offline-activation"><span class="toc-section-number">6.2.2</span> Offline Activation</a></li>
</ul></li>
</ul></li>
<li><a href="#appendix"><span class="toc-section-number">7</span> Appendix</a><ul>
<li><a href="#quick-start"><span class="toc-section-number">7.1</span> Quick Start</a><ul>
<li><a href="#host-a-directory-of-applications-1"><span class="toc-section-number">7.1.1</span> Host a directory of applications</a></li>
<li><a href="#let-users-manage-their-own-applications"><span class="toc-section-number">7.1.2</span> Let users manage their own applications</a></li>
<li><a href="#run-shiny-server-on-multiple-ports"><span class="toc-section-number">7.1.3</span> Run Shiny Server on multiple ports</a></li>
<li><a href="#require-user-authentication-on-an-application"><span class="toc-section-number">7.1.4</span> Require user authentication on an application</a></li>
<li><a href="#host-a-secure-shiny-server"><span class="toc-section-number">7.1.5</span> Host a secure Shiny Server</a></li>
<li><a href="#host-an-application-supported-by-multiple-r-processes"><span class="toc-section-number">7.1.6</span> Host an Application Supported by Multiple R Processes</a></li>
</ul></li>
<li><a href="#configuration-settings"><span class="toc-section-number">7.2</span> Configuration Settings</a></li>
<li><a href="#migrating-updating"><span class="toc-section-number">7.3</span> Migrating &amp; Updating</a><ul>
<li><a href="#upgrading-from-shiny-server-0.3.x"><span class="toc-section-number">7.3.1</span> Upgrading from Shiny Server 0.3.x</a></li>
<li><a href="#upgrading-from-shiny-server-0.4.x"><span class="toc-section-number">7.3.2</span> Upgrading from Shiny Server 0.4.x</a></li>
</ul></li>
<li><a href="#frequently-asked-questions"><span class="toc-section-number">7.4</span> Frequently Asked Questions</a><ul>
<li><a href="#what-are-the-hardware-requirements-for-running-shiny-server"><span class="toc-section-number">7.4.1</span> What are the hardware requirements for running Shiny Server?</a></li>
<li><a href="#does-shiny-server-work-on-amazon-elastic-compute-cloud-ec2"><span class="toc-section-number">7.4.2</span> Does Shiny Server work on Amazon Elastic Compute Cloud (EC2)?</a></li>
<li><a href="#can-i-deploy-shiny-server-on-an-isolated-network"><span class="toc-section-number">7.4.3</span> Can I Deploy Shiny Server on an Isolated Network?</a></li>
<li><a href="#how-do-i-translate-my-application-settings-to-nested-locations"><span class="toc-section-number">7.4.4</span> How Do I Translate My 'application' Settings to Nested 'location's?</a></li>
<li><a href="#can-i-bulk-import-in-flat-file-authentication"><span class="toc-section-number">7.4.5</span> Can I Bulk-Import in Flat-File Authentication?</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="getting-started"><a href="#getting-started"><span class="header-section-number">1</span> Getting Started</a></h1>
<h2 id="introduction"><a href="#introduction"><span class="header-section-number">1.1</span> Introduction</a></h2>
<p>Shiny Server enables users to host and manage Shiny applications on the Internet. Shiny is an R package which uses a reactive programming model to simplify the development of R-powered web applications. Shiny Server can manage R processes running various Shiny applications over different URLs and ports. Using Shiny Server offers a variety of benefits over simply running Shiny in R directly. These features allow the administrator to:</p>
<ul>
<li>Host multiple applications simultaneously, each at its own URL.</li>
<li>Support web browsers which don't support WebSocket, including Internet Explorer 8 &amp; 9.</li>
<li>Enable system users to develop and manage their own Shiny applications.</li>
<li>Automatically have R processes that crash or are terminated restart for the next user requesting the application.</li>
</ul>
<span class="pro-tag">PRO</span>
<div class="pro-chunk">
<p>This manual describes Shiny Server Professional which offers, among other things, the following additional features:</p>
<ul>
<li>Ensure your applications are protected and can only be accessed by specific, authenticated users.</li>
<li>Scale a Shiny application to support many users by empowering a Shiny application to be backed by multiple R Shiny processes simultaneously.</li>
<li>Gain insight into the performance and usage of your Shiny applications by monitoring them using a web dashboard.</li>
<li>Securely encrypt data being sent to and from your applications using SSL.</li>
<li>Understand and manage current and historical application resource utilization to better configure and optimize your applications.</li>
<li>Fine-tune the resources devoted to each user of an application by configuring multi-process Shiny applications based on the number of concurrent sessions.</li>
<li>Monitor the health of your Shiny Server using the health check endpoint.
</div>

</li>
</ul>
<h2 id="system-requirements"><a href="#system-requirements"><span class="header-section-number">1.2</span> System Requirements</a></h2>
<p>Shiny Server is currently only supported on the Linux operating system. We officially support the following distributions:</p>
<ul>
<li>RedHat Enterprise Linux (and CentOS) 5.4+</li>
<li>RedHat Enterprise Linux (and CentOS) 6.0+</li>
<li>Ubuntu 12.04</li>
<li>Ubuntu 13.04</li>
</ul>
<p>We currently only support the x86-64 architecture. As described in the <a href="#installation">Installation</a> section, you will install R and the Shiny package prior to installing Shiny Server. Root privileges will be required both in the installation process and also at runtime.</p>
<span class="pro-tag">PRO</span>
<div class="pro-chunk">
<p>Shiny Server Professional allows you to host multiple R processes concurrently to balance the load of incoming requests across multiple Shiny instances. The <a href="#utilization-scheduler">Utilization Scheduler</a> section explains how to configure this in more detail. We recommend carefully evaluating the computational properties and memory profile of a Shiny application using the tools discussed in the <a href="#admin">Admin</a> section. This dashboard will provide much more insight into the profile of a Shiny application than was previously possible.</p>
</div>
<h2 id="installation"><a href="#installation"><span class="header-section-number">1.3</span> Installation</a></h2>
<p>The Shiny Server installer does not come with R, nor does it provide the Shiny R package. Below are the steps for installing each of them separately.</p>
<p>If you had previously installed Shiny Server 0.3.x or 0.4.x, please see the relevant section before proceeding to ensure a seamless upgrade:</p>
<ul>
<li><a href="#upgrading-from-shiny-server-0.3.x">Upgrading from Shiny Server 0.3.x</a></li>
<li><a href="#upgrading-from-shiny-server-0.4.x">Upgrading from Shiny Server 0.4.x</a></li>
</ul>
<h3 id="ubuntu-12.04"><a href="#ubuntu-12.04"><span class="header-section-number">1.3.1</span> Ubuntu (12.04+)</a></h3>
<p><strong>Installing R</strong></p>
<p>Shiny Server recommends an installation of R version 3.0 or higher. To install the latest version of R you should first add the CRAN repository to your system as described here:</p>
<ul>
<li>Debian: <a href="http://cran.rstudio.com/bin/linux/debian/README.html">http://cran.rstudio.com/bin/linux/debian/README.html</a></li>
<li>Ubuntu: <a href="http://cran.rstudio.com/bin/linux/ubuntu/README.html">http://cran.rstudio.com/bin/linux/ubuntu/README.html</a></li>
</ul>
<p>You can then install R using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> apt-get install r-base</code></pre>
<p>NOTE: if you do not add the CRAN Debian or Ubuntu repository as described above this command will install the version of R corresponding to your current system version. Since this version of R may be a year or two old it is strongly recommended that you add the CRAN repositories so you can run the most up to date version of R.</p>
<p>At this point, follow the instructions in <a href="#install-shiny">Install Shiny</a> to setup the necessary packages in R.</p>
<p>Once Shiny is installed, you can begin the installation of Shiny Server. You should have been provided with a <code>.deb</code> installer for Shiny Server. If you only have a link to this file, you can use <code>wget</code> to download the file to the current directory. You will need to first install the <code>gdebi-core</code> package to install Shiny Server and its dependencies. Once the <code>.deb</code> file is available locally, run the following commands to complete the installation of Shiny Server.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> apt-get install gdebi-core
<span class="kw">sudo</span> gdebi shiny-server-1.0.0.deb</code></pre>
<p>This will install Shiny Server into <code>/opt/shiny-server/</code>, with the main executable in <code>/opt/shiny-server/bin/shiny-server</code> and also create a new <code>shiny</code> user. The rest of this guide will document the intricacies of how you can configure and manage Shiny Server. If you're just looking to get up and running quickly, we recommend you look at the <a href="#quick-start">Quick Start</a> section in the appendix which will walk you through the process of installing and configuring a Shiny application.</p>
<h3 id="redhatcentos-5.4"><a href="#redhatcentos-5.4"><span class="header-section-number">1.3.2</span> RedHat/CentOS (5.4+)</a></h3>
<p><strong>Prerequisites</strong></p>
<p>Shiny Server recommends an installation of R version 3.0 or higher. Shiny Server has several dependencies on packages (including R itself) found in the Extra Packages for Enterprise Linux (EPEL) repository. If you don't already have this repository available you should add it to your system using the instructions found here: <a href="https://fedoraproject.org/wiki/EPEL">https://fedoraproject.org/wiki/EPEL</a></p>
<p>After enabling EPEL you should then ensure that you have installed the version of R available from EPEL. You can do this using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> yum install R  </code></pre>
<p>At this point, follow the instructions in <a href="#install-shiny">Install Shiny</a> to setup the necessary packages in R.</p>
<p>Once Shiny has been installed, you can begin the installation of Shiny Server. You should have been provided with an RPM file which contains Shiny Server and all of its dependencies (other than R and Shiny). You can install this rpm file using <code>yum</code>. If you have only a link to the RPM file, you can use <code>wget</code> to download the file to the current directory. You can install this RPM file using <code>yum</code>.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> yum install --nogpgcheck shiny-server-1.0.0.rpm</code></pre>
<p>This will install Shiny Server into <code>/opt/shiny-server/</code>, with the main executable in <code>/opt/shiny-server/bin/shiny-server</code> and also create a new <code>shiny</code> user. The rest of this guide will document the intricacies of how you can configure and manage Shiny Server. If you're just looking to get up and running quickly, we recommend you look at the <a href="#quick-start">Quick Start</a> section in the appendix which will walk you through the process of installing and configuring a Shiny application.</p>
<h3 id="install-shiny"><a href="#install-shiny"><span class="header-section-number">1.3.3</span> Install Shiny</a></h3>
<p>Before Shiny Server can be installed, the Shiny package must be installed in the system library; you typically need <code>sudo</code> privileges to install to this library. Shiny Server currently requires Shiny version 0.7.0 or later. The following command will download and install the <code>shiny</code> package from CRAN in the system library.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> su - \
  <span class="kw">-c</span> <span class="st">&quot;R -e </span><span class="dt">\&quot;</span><span class="st">install.packages(&#39;shiny&#39;, repos=&#39;http://cran.rstudio.com/&#39;)</span><span class="dt">\&quot;</span><span class="st">&quot;</span></code></pre>
<p>Once this command completes, you can continue with the installation of Shiny Server.</p>
<h3 id="r-installation-location"><a href="#r-installation-location"><span class="header-section-number">1.3.4</span> R Installation Location</a></h3>
<p>Shiny Server expects that R is available as an executable named <code>R</code> and is in the <code>PATH</code> of the user which you run <code>shiny-server</code> as. Note that on some CentOS systems, the <code>PATH</code> will be overridden by the startup script to <code>/sbin:/usr/sbin:/bin:/usr/bin</code>. On such systems, if <code>R</code> is not available in one of these locations (regardless of the user's <code>PATH</code>), you'll need to adjust the startup script.</p>
<p>To allow Shiny Server to search for <code>R</code> in additional locations, you'll alter the file in <code>/etc/init.d/shiny-server</code> or <code>/etc/init/shiny-server.conf</code> depending on which startup system you're using (as discussed in <a href="#stopping-and-starting">Stopping and Starting</a>. You can either adjust the <code>PATH</code> variable to include the directory where <code>R</code> will be found, or you can set an environment variable named <code>R</code> to tell Shiny Server exactly where it should look for the executable.</p>
<p>If you choose to adjust the <code>PATH</code>, you can add the directory in which the executable named <code>R</code> is found to the line that defines the <code>PATH</code> environment variable (<code>PATH=/sbin:/usr/sbin:/bin:/usr/bin</code>).</p>
<p>If instead you choose to tell Shiny Server the exact executable to run (which is necessary if the executable is not named <code>R</code> on your system), you'll need to define a new environment variable named <code>R</code>. You can do this by adding a line that looks something like <code>env R=/usr/local/bin/R-3-0-1</code> for Upstart, or <code>export R=/usr/local/bin/R-3-0-1</code> for init.d.</p>
<h2 id="stopping-and-starting"><a href="#stopping-and-starting"><span class="header-section-number">1.4</span> Stopping and Starting</a></h2>
<p>The installer will automatically deploy the necessary scripts to ensure that Shiny Server is started automatically on boot. When possible, we use the Upstart system to manage the <code>shiny-server</code> service. If Upstart is not available, we will deploy an <code>init.d</code> script to automatically start and stop the service.</p>
<h3 id="upstart"><a href="#upstart"><span class="header-section-number">1.4.1</span> Upstart</a></h3>
<p>Upstart is a system used to automatically start, stop and manage services. The installer will automatically deploy an Upstart script to <code>/etc/init/shiny-server.conf</code>. This script will initialize <code>shiny-server</code> as soon as the network is activated on the machine and stop when the machine is being shut down.</p>
<p>The Upstart script will also ensure that <code>shiny-server</code> is respawned if the process is terminated unexpectedly. However, in the event that there is an issue which will consistently prevent Shiny Server from being able to start (such as a bad configuration file), Upstart will give up on restarting the service after approximately 5 failed attempts within a few seconds. For this reason, you may see multiple repetitions of a bad Shiny Server startup attempt before it transitions to the <code>stopped</code> state.</p>
<p>To start or stop the server, run the following commands, respectively.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> start shiny-server</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> stop shiny-server</code></pre>
<p>To restart the server you can run:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> restart shiny-server</code></pre>
<p>This command will shutdown all running Shiny processes, disconnecting all open connections and will re-initialize the server. Note that <code>restart</code> <em>will not</em> reread the Upstart definition at <code>/etc/init/shiny-server.conf</code>. So if you have changed, for instance, some environment variables in that file. You will need to <code>stop</code> and <code>start</code> to have those changes take effect.</p>
<p>If you wish to keep the server and all Shiny processes running without interruption, but reload the configuration, you can use the <code>reload</code> command as in:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> reload shiny-server</code></pre>
<p>This will cause the server to re-initialize but will not interrupt the current processes or any of the open connections to the server.</p>
<p><strong>Known Bug:</strong> Due to a bug in the version of Upstart which comes with Ubuntu 13.04, <code>reload</code> will not behave as expected on that platform and should not be used.</p>
<p>To check the status or retrieve the Process ID associated with <code>shiny-server</code>, run the following:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">status</span> shiny-server</code></pre>
<h3 id="init.d"><a href="#init.d"><span class="header-section-number">1.4.2</span> init.d</a></h3>
<p>On some older Operating Systems (such as RedHat 5) the Upstart system may not be available. These systems will require the use of a script in <code>/etc/init.d/</code> to start and manage the <code>shiny-server</code> daemon. This script does not have the capability to automatically restart the <code>shiny-server</code> daemon if it terminates unexpectedly. The installer uses <code>chkconfig</code> to ensure that <code>shiny-server</code> will start automatically on boot.</p>
<p>To start or stop the server, use the following commands, respectively:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server start</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server stop</code></pre>
<p>To restart the server, you can run:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>If you wish to keep the server and all Shiny processes running without interruption, but reload the configuration, you can use <code>reload</code>:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server reload</code></pre>
<p>This will cause the server to re-read the configuration file but will not interrupt the current processes and outstanding connections to the server.</p>
<p>To check the status or retrieve the Process ID associated with <code>shiny-server</code>, run the following:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">/sbin/service</span> shiny-server status</code></pre>
<h1 id="server-management"><a href="#server-management"><span class="header-section-number">2</span> Server Management</a></h1>
<h2 id="default-configuration"><a href="#default-configuration"><span class="header-section-number">2.1</span> Default Configuration</a></h2>
<p>Initially, Shiny Server uses the following configuration file. Some users will find that this configuration meets their needs; others may find it useful to create a custom configuration. Details about each available setting and parameter are available in the <a href="#appendix">Appendix</a>. As a brief introduction, however, the following configuration file (available at <code>/opt/shiny-server/config/default.config</code>) is the default used if no other configuration file is provided:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define the user we should use when spawning R Shiny processes</span>
<span class="kw">run_as</span> shiny<span class="kw">;</span>

<span class="co"># Define a top-level server which will listen on a port</span>
<span class="kw">server</span> {
  <span class="co"># Instruct this server to listen on port 3838</span>
  <span class="kw">listen</span> 3838<span class="kw">;</span>

  <span class="co"># Define the location available at the base URL</span>
  <span class="kw">location</span> / {
    <span class="co"># Run this location in &#39;site_dir&#39; mode, which hosts the entire directory</span>
    <span class="co"># tree at &#39;/srv/shiny-server&#39;</span>
    <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>
    
    <span class="co"># Define where we should put the log files for this location</span>
    <span class="kw">log_dir</span> /var/log/shiny-server<span class="kw">;</span>
    
    <span class="co"># Should we list the contents of a (non-Shiny-App) directory when the user </span>
    <span class="co"># visits the corresponding URL?</span>
    <span class="kw">directory_index</span> on<span class="kw">;</span>
  }
}


<span class="co"># Setup a flat-file authentication system. {.pro}</span>
<span class="kw">auth_passwd_file</span> /etc/shiny-server/passwd<span class="kw">;</span>

<span class="co"># Define a default admin interface to be run on port 4151. {.pro}</span>
<span class="kw">admin</span> 4151 {
  <span class="co"># Only permit the user named `admin` to access the admin interface.</span>
  <span class="kw">required_user</span> admin<span class="kw">;</span>
}</code></pre>
<p>Lines beginning with a <code>#</code> are treated as comments and not parsed when configuring the server. Shiny Server can be configured to host multiple <code>server</code>s on different ports or hostnames. Each <code>server</code> can have <code>location</code>s which are capable of serving Shiny Applications and potentially static assets, as well. Individual applications can also override the settings applied to their parent <code>location</code>. These concepts are explained in further detail in the <a href="#server-hierarchy">Server Hierarchy</a> section. The default configuration above will create a single server listening on port 3838, serving any application contained within <code>/srv/shiny-server/</code> at the root URL (<code>/</code>). Each possible setting in the configuration file is explained in the <a href="#appendix">Appendix</a>.</p>
<p>Most users will want to customize the configuration to meet their needs. The server will attempt to load its configuration from a file stored at <code>/etc/shiny-server/shiny-server.conf</code>; it is in this location that you should place your custom Shiny Server configuration. If this file is not found, the default will be used.</p>
<span class="pro-tag">PRO</span>
<div class="pro-chunk">
<p>This configuration will also create an administrative dashboard running on port 4151. The admin interface requires that a user authenticate themselves, as discussed further in the chapter on <a href="#authentication-security">Authentication &amp; Security</a>. The configuration will attempt to use a flat-file authentication system stored at <code>/etc/shiny-server/passwd</code>; an empty database is created for you here during installation. To create a new user named <code>admin</code> in this file to allow you to login to the dashboard, execute the following command</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/sspasswd /etc/shiny-server/passwd admin</code></pre>
and then enter and verify the password you wish to use for this user.
</div>
<h2 id="server-hierarchy"><a href="#server-hierarchy"><span class="header-section-number">2.2</span> Server Hierarchy</a></h2>
<p>Detailed descriptions of all available parameters are available in the appendix, but it is important to understand the overall hierarchy of the Shiny Server configuration file when editing the file.</p>
<h3 id="server"><a href="#server"><span class="header-section-number">2.2.1</span> Server</a></h3>
<p>The server setting defines an HTTP server which will listen on a port/IP address combination. For example, the following lines:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">listen</span> 80<span class="kw">;</span>
}</code></pre>
<p>define a server that would listen on port 80. A server can also define a <code>server_name</code> to limit the virtual hostnames on which it listens, as described in the <a href="#virtual-hosts">Virtual Hosts</a> section.</p>
<h3 id="location"><a href="#location"><span class="header-section-number">2.2.2</span> Location</a></h3>
<p>The <code>location</code> setting is defined within a <code>server</code> and defines how a particular URL path should be served. For instance, the following settings:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">...</span>
  <span class="co"># Define the location &#39;/specialApp&#39;</span>
  <span class="kw">location</span> /specialApp {
    <span class="co"># Run this location in &#39;app_dir&#39; mode, which will host a single Shiny</span>
    <span class="co"># Application available at &#39;/srv/shiny-server/myApp&#39;</span>
    <span class="kw">app_dir</span> /srv/shiny-server/myApp
  }
  
  <span class="co"># Define the location &#39;/otherApps&#39;</span>
  <span class="kw">location</span> /otherApps {
    <span class="co"># Run this location in &#39;site_dir&#39; mode, which hosts the entire directory</span>
    <span class="co"># tree at &#39;/srv/shiny-server/apps&#39;</span>
    <span class="kw">site_dir</span> /srv/shiny-server/apps<span class="kw">;</span>
  }
<span class="kw">...</span>
}</code></pre>
<p>would define two locations, one which serves (potentially) a multitude of applications at the URL <code>/otherApps/</code>, and another which serves a single application at the URL <code>/specialApp/</code>. The various hosting models which can be applied to a location are described in the section on <a href="#hosting-model">Hosting Model</a>s.</p>
<p><code>location</code> directives can also be nested to provide more granular settings for a particular sub-<code>location</code>. For instance, if you used Google Analytics but the Finance department wanted to use its own Google Analytics ID for their <code>finance</code> directory, you could accomplish that with a configuration like:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">...</span>
  <span class="co"># Define the &#39;/depts&#39; location</span>
  <span class="kw">location</span> /depts {
    <span class="co"># Host a directory of applications</span>
    <span class="kw">site_dir</span> /srv/departmentApps<span class="kw">;</span>
    
    <span class="co"># Provide a default/global GAID</span>
    <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-12345-1&quot;</span><span class="kw">;</span>

    <span class="co"># Define the &#39;/finance&#39; location.</span>
    <span class="co"># Corresponds to the URL &#39;/depts/finance&#39;, and the filesystem path </span>
    <span class="co"># &#39;/srv/departmentApps/finance&#39; as defined by the parent location.</span>
    <span class="kw">location</span> /finance {
      <span class="co"># Provide a custom GAID for only this sub-location</span>
      <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-54321-9&quot;</span><span class="kw">;</span>
    }
  }
<span class="kw">...</span></code></pre>
<p>Note that the nested <code>location</code>'s path is relative to the parent <code>location</code>'s. Any directive that can be used for a <code>location</code> can be used in a nested <code>location</code> and will override the value specified in the parent, if any. If not overridden, the settings will be inherited by sub-<code>location</code>s from their parent <code>location</code>s.</p>
<h3 id="application"><a href="#application"><span class="header-section-number">2.2.3</span> Application</a></h3>
<blockquote>
<p> The <code>application</code> setting has been deprecated and removed from Shiny Server as of version 0.4.2.</p>
</blockquote>
<p>See <a href="#how-do-i-translate-my-application-settings-to-nested-locations">How Do I Translate My 'application' Settings to Nested 'location's?</a> for help migrating.</p>
<h2 id="run_as"><a href="#run_as"><span class="header-section-number">2.3</span> <code>run_as</code></a></h2>
<p>Understanding which user will execute the R Shiny processes is important for a variety of reasons. For one, the paths in which R will look for packages (<code>.libPaths()</code>) are often user-dependent. In order to ensure that the libraries required to run a Shiny application are installed, you must first understand which user will be running the application. Additionally, directories will likely have restrictions regarding which users are able to read or write in them. The server should be configured in such a way that the user running the Shiny applications has the minimal privileges to do the work required by those applications.</p>
<p><code>location</code>s configured with <code>user_apps</code> will be executed as the user in whose home directory the application was found. For locations configured with <code>site_dir</code> and <code>app_dir</code>, the <code>run_as</code> setting will be used to determine which user should spawn the R Shiny processes. This setting can be configured globally, or for a particular <code>server</code> or <code>location</code>. For example, the following configuration:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">run_as</span> tim<span class="kw">;</span>
}</code></pre>
<p>would execute all applications contained within this scope as the user <code>tim</code> with all of <code>tim</code>'s relevant <code>.libPath</code>s.</p>
<h3 id="running-shiny-server-with-root-privileges"><a href="#running-shiny-server-with-root-privileges"><span class="header-section-number">2.3.1</span> Running Shiny Server with Root Privileges</a></h3>
<p>Aside from spawning R Shiny processes as particular users, the <code>shiny-server</code> process itself can be configured to run as different users to control its privileges. There are three scenarios in which Shiny Server would need to be run as root:</p>
<ol type="1">
<li>If <code>user_apps</code> is enabled for any location. In order to host applications as various users, Shiny Server must have root privileges.</li>
<li>If your configuration uses <code>run_as</code> to spawn applications as multiple different users.</li>
<li>If you're running any server on a privileged port (a port in the range of 1-1024).</li>
</ol>
By default, the <code>shiny-server</code> process will be started as the <code>root</code> user, then will spawn R processes according to the corresponding <code>run_as</code> setting. You can, however, run the <code>shiny-server</code> process as a non-privileged user such as the <code>shiny</code> user if none of the three limitations above are violated. <span class="pro-tag">PRO</span>
<div class="pro-chunk">
<p>For Shiny Server Pro, if it detects that it is running as root but has no need to (i.e. none of the three criteria above were met), then it will drop its privileges and run as an unprivileged user; note that, for security reasons, that change is irreversible. This means that once Shiny Server drops its privileges, it wouldn't be able to regain them should a new configuration be loaded that requires such privileges.</p>
<p>By default, if <code>shiny-server</code> detects that it doesn't need to run with <code>root</code> privileges, it will attempt to run as an unprivileged user to be more secure. It will determine which user to run as by inspecting the <code>run_as</code> directives in your configuration file -- if there is only one user which we will be running Shiny as (and the aforementioned constraints are satisfied), the entire Shiny Server process will just run as that user. The default configuration sets <code>run_as</code> to <code>shiny</code>, so the process will run as the <code>shiny</code> user. While the process will run as the <code>shiny</code> user (or whatever other user you're running as), it may not behave in exactly the same way as interactively logging in as that user. In particular, no startup scripts (such as <code>.bashrc</code> files) will be executed, and supplemental groups in which the user is a member will not be set.</p>
<p>Be aware that upon installing Shiny Server, permissions on the file system are set to enable the <code>shiny</code> user to read and write from various directories as is necessary to allow Shiny Server to run as the <code>shiny</code> user. Running Shiny Server as another user will require that you adjust the permissions to grant this other user the necessary privileges to run Shiny Server. In particular, ensure the user has write privileges on these paths (recursively):</p>
<ul>
<li><code>/var/lib/shiny-server/</code> (or whatever custom <code>SHINY_DATA_DIR</code> setting you're using)</li>
<li><code>/var/log/shiny-server/</code> (and/or whatever other directories you use for logging)</li>
</ul>
<p>and read privileges on these paths (recursively):</p>
<ul>
<li><code>/srv/shiny-server/</code> (and/or whatever other directories you're using to host Shiny applications)</li>
<li><code>/opt/shiny-server/</code></li>
<li><code>/etc/shiny-server/</code> (Note that you should enable <strong>only</strong> read access on this directory, as you likely don't want to allow your Shiny applications (which also run as <code>shiny</code>) to be able to write to your configuration or password file.)</li>
</ul>
Finally, if the directory <code>/tmp/shiny-server/</code> exists, it (and all files within it) should be owned by the user you specify.
</div>
<h2 id="local-app-configurations"><a href="#local-app-configurations"><span class="header-section-number">2.4</span> Local App Configurations</a></h2>
<p>In the global configuration file, the <code>allow_app_override</code> setting can be specified to enable local app configurations. If present, this setting enables owners of Shiny applications to customize the properties of their own applications using a file named <code>.shiny_app.conf</code>. This file can be placed within an application directory (alongside the <code>server.R</code> and <code>ui.R</code> files) and can contain settings which configure how Shiny Server should manage the application.</p>
<p>This behavior is controlled by the <code>allow_app_override</code> setting which is disabled by default. In order to enable local application configurations, you can add to your configuration file <code>allow_app_override true;</code> (or just <code>allow_app_override;</code> for short).</p>
<p>Server administrators should be mindful of the fact that allowing application owners to specify their own scheduler parmeters has potential performance implications, as an application owner could enable his or her application to consume more resources than is desired. It is thus recommended that write privileges on the <code>.shiny_app.conf</code> files be granted judiciously in the underlying filesystem.</p>
<h2 id="hosting-model"><a href="#hosting-model"><span class="header-section-number">2.5</span> Hosting Model</a></h2>
<p>There are currently four different methods of configuring a location, three of which serve Shiny applications. These three are described below; see the following section on <a href="#redirecting">Redirecting</a> to learn about a fourth mode.</p>
<h3 id="host-a-directory-of-applications"><a href="#host-a-directory-of-applications"><span class="header-section-number">2.5.1</span> Host a Directory of Applications</a></h3>
<p>A location which uses <code>site_dir</code> will host an entire directory tree -- both Shiny Apps and static assets. This is the location used to serve an asset or application in <code>/srv/shiny-server/</code> in the default configuration that ships with Shiny Server.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define the location &#39;/&#39;</span>
<span class="kw">location</span> / {
  <span class="kw">site_dir</span> /srv/shiny-server/
}</code></pre>
<p>The above configuration would instruct Shiny Server to make the <code>/srv/shiny-server/</code> directory available at the base URL. Any Shiny applications stored in this directory (or any subdirectory), along with any static assets (including images, data, JavaScript/CSS files, etc.) will be made available at the corresponding URL. For example, see the following directory tree:</p>
<pre><code>+---/srv/shiny-server
|   +---shinyApp1
|       +---server.R
|       +---ui.R
|   +---shinyApp2
|       +---server.R
|       +---ui.R
|   +---assets
|       +---style.css
|       +---script.js</code></pre>
<p>If this server were available at <code>http://server.com</code>, the <code>location</code> settings above would make the following (along with any other file in the tree) publicly available to the user.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">URL</th>
<th style="text-align: left;">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>http://server.com/shinyApp1</code></td>
<td style="text-align: left;">Serve the Shiny App defined in 'shinyApp1'</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>http://server.com/shinyApp2</code></td>
<td style="text-align: left;">Serve the Shiny App defined in 'shinyApp2'</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>http://server.com/assets/style.css</code></td>
<td style="text-align: left;">Serve this static CSS file</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>http://server.com/assets/script.js</code></td>
<td style="text-align: left;">Serve this static JS file</td>
</tr>
</tbody>
</table>
<h3 id="host-a-single-application"><a href="#host-a-single-application"><span class="header-section-number">2.5.2</span> Host a Single Application</a></h3>
<p>A location configured to use <code>app_dir</code> will attempt to serve a single application hosted at the given directory. For instance,</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define the location &#39;/specialApp&#39;</span>
<span class="kw">location</span> /specialApp {
  <span class="kw">app_dir</span> /srv/shiny-server/myApp<span class="kw">;</span>
}</code></pre>
<p>will configure the <code>location</code> responsible for the path <code>/specialApp</code> to use this <code>app_dir</code> router which serves a single application stored in the directory <code>/srv/shiny-server/myApp</code>. This configuration would presume a <code>server.R</code> file (and corresponding <code>ui.R</code> file) would be available at <code>/srv/shiny-server/myApp/server.R</code>. If so, the application saved there would be available at a URL like <code>http://server.com/specialApp</code>.</p>
<h3 id="host-per-user-application-directories"><a href="#host-per-user-application-directories"><span class="header-section-number">2.5.3</span> Host Per-User Application Directories</a></h3>
<p>A location configured to use <code>user_apps</code> will allow users on the system to create and manage their own Shiny applications available in their home directories. This directive will host any application stored in an eligible user's <code>~/ShinyApps</code> directory publicly at a URL prefaced by their username.</p>
<p>This privilege can be restricted only to users of particular groups using the <code>members_of</code> restriction. For instance, the following configuration:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define the root location</span>
<span class="kw">location</span> / {
  <span class="kw">user_apps;</span>
  
  <span class="co"># Only allow members of the &#39;shinyUsers&#39; group to host personal applications.</span>
  <span class="kw">members_of</span> shinyUsers<span class="kw">;</span>
}</code></pre>
<p>will -- for any user who is a member of the <code>shinyUsers</code> group -- publicly host any Shiny application available in the user's <code>~/ShinyApps</code> directory. For instance, if <code>tina</code> is a user on this system and is also a member of the <code>shinyUsers</code> group, any application stored in <code>/home/tina/ShinyApps/</code>, such as the <code>shinyApp1</code> application, would be available on this server at a URL like <code>http://server.com/tina/shinyApp1</code>, assuming <code>/home/tina</code> was <code>tina</code>'s home directory.</p>
<h2 id="redirecting"><a href="#redirecting"><span class="header-section-number">2.6</span> Redirecting</a></h2>
<p>The final mode in which a location can operate is to redirect to another URL. Such locations will immediately send a response to the client informing them of the URL to which they should redirect and the status code that should be used when informing the client of the redirection. Typically, a redirect will use the <code>301</code> status code for a permanent redirect, or a <code>302</code> status code for a temporary redirect. The final option when configuring a location for redirection is whether or not it should use exact matching. If a redirecting location is configured to use exact matching, only requests for that exact URL will be redirected. If not, any requests for that URL path or any subpath of that URL will be redirected. For example,</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define a location at the base URL of this &#39;server&#39;</span>
<span class="kw">location</span> / {
  <span class="co"># Redirect traffic from &#39;/shinyApp1/&#39; to &#39;http://server.com&#39; temporarily.</span>
  <span class="kw">location</span> /shinyApp1 {
    <span class="kw">redirect</span> <span class="st">&quot;http://server.com&quot;</span> 302 true<span class="kw">;</span>
  }
}</code></pre>
<p>will redirect any requests for the exact path <code>/shinyApp1</code> to <code>http://server.com</code> temporarily.</p>
<h2 id="virtual-hosts"><a href="#virtual-hosts"><span class="header-section-number">2.7</span> Virtual Hosts</a></h2>
<p>The <code>server_name</code> setting allows Shiny Server to route incoming requests to a particular <code>server</code> element based on the hostname of the request. This will serve as an additional level of filtering on incoming traffic. Bear in mind that traffic must be destined for this server (i.e. traffic which was bound for the IP address and port on which this server was listening) in order to even be evaluated for a matching hostname.</p>
<p>The example below may clarify the configuration</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="co"># Instruct this server to listen to port 80</span>
  <span class="kw">listen</span> 80<span class="kw">;</span>
  
  <span class="co"># Only accept requests for the hostname &#39;server1.com&#39;</span>
  <span class="kw">server_name</span> server1.com<span class="kw">;</span>
  
  <span class="co"># Define the location for this server.</span>
  <span class="kw">location</span> / {
    <span class="kw">site_dir</span> /srv/shiny-server1<span class="kw">;</span>
    <span class="kw">log_dir</span> /var/log/shiny-server1<span class="kw">;</span>
  }
}

<span class="kw">server</span> {
  <span class="co"># Instruct this server to listen to port 80</span>
  <span class="kw">listen</span> 80<span class="kw">;</span>
  
  <span class="co"># Only accept requests for the hostname &#39;server2.com&#39;</span>
  <span class="kw">server_name</span> server2.com<span class="kw">;</span>
  
  <span class="co"># Define the location for this server.</span>
  <span class="kw">location</span> / {
    <span class="kw">site_dir</span> /srv/shiny-server2<span class="kw">;</span>
    <span class="kw">log_dir</span> /var/log/shiny-server2<span class="kw">;</span>
  }
}</code></pre>
<p>This example presupposes that, on this network, the domains <code>server1.com</code> and <code>server2.com</code> both resolve to the same IP address. In the configuration above, we first create a server that listens on port <code>80</code> and will only accept traffic whose hostname matches <code>server1.com</code>. We then configure a server which will also listen on port <code>80</code> and require that it only accept traffic whose hostname equals <code>server2.com</code>.</p>
<p>This configuration would allow an application stored in <code>/srv/shiny-server1/shinyApp</code> to be accessible at <code>http://server1.com/shinyApp</code> and an application stored in <code>/srv/shiny-server2/shinyApp</code> to be accessible at <code>http://server2.com/shinyApp</code>.</p>
<h2 id="custom-templates"><a href="#custom-templates"><span class="header-section-number">2.8</span> Custom Templates</a></h2>
<p>Shiny Server can utilize custom templates when generating static pages such as directory indexes and error pages. This feature is controlled using the <code>template_dir</code> directive and can be applied globally, or to a particular <code>server</code> or <code>location</code>.</p>
<p>To utilize this feature, you'll need a directory in which you'll store your templates. In this example, we'll assume you're using <code>/etc/shiny-server/templates/</code>. Inside this directory, you'll place the <a href="http://handlebarsjs.com/">handlebars</a>-enabled HTML templates for your pages.</p>
<p>Shiny Server will attempt to find a specific page to accommodate the current need -- for instance, if it encountered a 404 error, it will first look to see if you provided a specific template for handling 404 errors in the specified directory (<code>error-404.html</code>). If it doesn't find this file, it will go one step backwards to see if you provide a generic error template (<code>error.html</code>). If it can't find a suitable template in your template directory, it will fall back to use the provided templates that come with Shiny Server (and are stored in <code>/opt/shiny-server/templates</code>).</p>
<p>As you may have noticed already, Shiny Server uses a hyphen-delimited hierarchy which progresses from broadest to narrowest. So all error pages start with <code>error</code>. But the file name for a 404 error page would add an additional element (<code>404</code>) following a hyphen: <code>error-404</code>. All files are expected to use the <code>.html</code> extension.</p>
<p>The tables below describe the page templates that can be defined in Shiny Server:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Template Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">error-403</td>
<td style="text-align: left;">Client is forbidden from accessing this page. Or, in Shiny Server Pro, that the user is signed in but does not have permissions to view this application.</td>
</tr>
<tr class="even">
<td style="text-align: left;">error-404</td>
<td style="text-align: left;">Page not found</td>
</tr>
<tr class="odd">
<td style="text-align: left;">error-500</td>
<td style="text-align: left;">General server error</td>
</tr>
<tr class="even">
<td style="text-align: left;">error-503-users</td>
<td style="text-align: left;">The application has exceeded its maximum # of users</td>
</tr>
<tr class="odd">
<td style="text-align: left;">error-503-license</td>
<td style="text-align: left;">(Pro Only) You have exceeded the number of concurrent users allotted for your license.</td>
</tr>
<tr class="even">
<td style="text-align: left;">directoryIndex</td>
<td style="text-align: left;">Shown when <code>directory_index</code> is enabled for a location and the user visits the base URL.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">login</td>
<td style="text-align: left;">(Pro Only) Used to render the login page.</td>
</tr>
</tbody>
</table>
<p>Again, any of the template names that have hyphens in them can be generalized by trimming off the hyphen and subsequent word(s). So a file named <code>error-503.html</code> could be used as the template for <em>both</em> <code>error-503-users</code> pages, as well as <code>error-503-license</code> pages. More generally, a single template can be used for all errors by naming it <code>error.html</code>. If a more specific template doesn't exist, this page would be used when generating any type of error page.</p>
<p>We recommend starting with the existing templates then modifying them to create your own branding. To do this, copy the relevant HTML files out of <code>/opt/shiny-server/templates/</code> into your template directory (for example, <code>/etc/shiny-server/templates/</code>). To create a custom error page, execute:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">mkdir</span> /etc/shiny-server/templates/
$ <span class="kw">cp</span> /opt/shiny-server/templates/error.html /etc/shiny-server/templates/</code></pre>
<p>Now open the template in your preferred text editor and modify it. Initially, leave the overall structure intact, but add some language at the top of the page (immediately under the line containing <code>&lt;h1&gt;{{title}}&lt;/h1&gt;</code>) or add some new CSS rules then save the file.</p>
<p>Now instruct Shiny Server to use this new template in your configuration by adding the line:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">template_dir</span> /etc/shiny-server/templates<span class="kw">;</span></code></pre>
<p>at the top/bottom of the file so it applies globally. Of course, you can later specify another <code>template_dir</code> for particular <code>location</code>s.</p>
<p>When you restart the server and access an error page. (Try accessing a hidden file like <code>http://server.com:3838/.hidden</code>, where <code>server.com</code> is the domain name or IP address of your server, which should use the <code>error-403</code> or <code>error</code> template.) You should see your new text or CSS styling on the page that is loaded. Likewise, you can copy the <code>directoryIndex.html</code> template or, for Shiny Server Pro, the <code>login.html</code> template to your custom directory and begin customizing.</p>
<p>For performance reasons, templates are cached in memory once they're loaded. Thus, you will find that changes to your template may not be immediately visible when you refresh the page. To empty the cache to force Shiny Server to load in the new changes to your template, you can either <code>restart</code> or <code>reload</code> the server (see the section on <a href="#stopping-and-starting">Stopping and Starting</a>).</p>
<p>Finally, note that these templates currently only apply for HTML pages that are generated by Shiny Server. An HTML page generated by the Shiny package will <em>not</em> have custom templates applied at this time. Currently, this is most visible with 404 errors. If you access a URL which Shiny Server cannot direct to a Shiny application (for instance, <code>http://server.com:3838/flargdarg</code>, where <code>server.com</code> is the domain name or IP address of your server), you will see a Shiny-Server-generated 404 error page which has custom templates applied (assuming this <code>server</code> is configured to have a custom <code>error-404.html</code> or <code>error.html</code> template). However, if you were to access a file that does not exist in a valid application, you would see an un-styled 404 page that did not leverage your custom template. For instance, if you have an application deployed at <code>http://server.com:3838/myApp</code> and you attempt to access <code>http://server.com:3838/myApp/flargDarg</code>, the request would be sent to Shiny which would then look for this file and, if it isn't found, would return a 404 page. Shiny Server would pass this response back directly to the client, as it wasn't generated by Shiny Server. We will be reviewing this architecture in future versions -- please let us know if you find that the current organization inhibits your workflow.</p>
<h2 id="server-log"><a href="#server-log"><span class="header-section-number">2.9</span> Server Log</a></h2>
<p>All information related to Shiny Server, rather than a particular Shiny application, is logged in the global system log stored in <code>/var/log/shiny-server.log</code>. This log should be checked often to ensure Shiny Server is performing as expected. Any errors and warnings which Shiny Server needs to communicate will be written here.</p>
<p>If <code>logrotate</code> is available when Shiny Server is installed, a <code>logrotate</code> configuration will be installed. The default configuration is to rotate the logfile when it exceeds 1MB. The old log file will be compressed and stored alongside the original log file with a <code>.1.gz</code> extension (then <code>.2.gz</code>, etc.). Up to twelve archived log files will be maintained; upon the 13th log rotation the oldest log file will be deleted.</p>
<p>For logs related to individual Shiny Applications, see the section on <a href="#logging-and-analytics">Logging and Analytics</a>.</p>
<h3 id="access-logs"><a href="#access-logs"><span class="header-section-number">2.9.1</span> Access Logs</a></h3>
<p>An access log can be configured globally using the <code>acces_log</code> parameter. This log is not enabled by default. This setting controls the location of the access log as well as the format used. The access log can be useful to audit the security and activity taking place on your Shiny Server installation. These logs can be audited manually or automatically to inspect how often various resources are being accessed, or by whom they are being accessed (using the originating IP address). Currently, one access log is created for the entire Shiny Server process; all Shiny applications share this access log.</p>
<p>The access logs will be written using the Connect logging libraries, so additional details can be found in <a href="http://www.senchalabs.org/connect/logger.html">their documentation</a> in the &quot;Formats&quot; section. In brief, there are four pre-defined logging formats for access logs specified in the documentation referenced above:</p>
<ul>
<li><code>default</code> ':remote-addr - - [:date] &quot;:method :url HTTP/:http-version&quot; :status :res[content-length] &quot;:referrer&quot; &quot;:user-agent&quot;'</li>
<li><code>short</code> ':remote-addr - :method :url HTTP/:http-version :status :res[content-length] - :response-time ms'</li>
<li><code>tiny</code> ':method :url :status :res[content-length] - :response-time ms'</li>
<li><code>dev</code> concise output colored by response status for development use</li>
</ul>
<p>For example, the following would configure an access log that uses the <code>tiny</code> format:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">access_log</span> /var/log/shiny-server/access.log tiny<span class="kw">;</span>

<span class="kw">server</span> {
  <span class="kw">...</span></code></pre>
<h2 id="health-check-endpoint" class="pro"><a href="#health-check-endpoint"><span class="header-section-number">2.10</span> Health Check Endpoint</a></h2>
<p>Some advanced deployment scenarios are able to leverage a &quot;health check endpoint&quot; which provides an automated way to ensure that Shiny Server is online and responsive. The URL <code>/ping</code> can be used on any port Shiny Server is instructed to listen on in order to test the health of Shiny Server. If the server is online and responsive, it will respond with the text <code>OK</code> and an HTTP 200 code.</p>
<h2 id="environment-variable-settings"><a href="#environment-variable-settings"><span class="header-section-number">2.11</span> Environment Variable Settings</a></h2>
<p>We strive to expose most settings through the configuration file described previously. However, there are some settings that we don't include in the configuration file which some users may still wish to change. Where possible, we'll allow users to configure these settings using environment variables. Some of these environment variables will later be promoted to configuration directives, but will be documented here until that time.</p>
<p>Typically, it is best to define these environment variables in the startup script used to run Shiny Server (often either <code>/etc/init.d/shiny-server</code> or <code>/etc/init/shiny-server.conf</code>, depending on whether or not you're using Upstart).</p>
<h3 id="shiny_log_level"><a href="#shiny_log_level"><span class="header-section-number">2.11.1</span> <code>SHINY_LOG_LEVEL</code></a></h3>
<p>Defines the verbosity of logging which will be used by Shiny Server. Valid options -- in level of increasing verbosity -- are <code>TRACE</code>, <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code>. More verbose levels of logging (such as <code>TRACE</code>) may be helpful when debugging an issue or trying to understand exactly what Shiny Server is doing, but will likely be far too much information for a system with even moderate load.</p>
<p>The default if this environment variable is not found is to use <code>INFO</code>.</p>
<h3 id="r"><a href="#r"><span class="header-section-number">2.11.2</span> <code>R</code></a></h3>
<p>Defines the path to the R executable which should be used when running Shiny. Systems which have multiple versions of R installed, or don't wish to place R on the path before starting Shiny Server can override this setting to point to a particular version of R.</p>
<p>If no environment variable is found, Shiny Server will expect an executable named <code>R</code> to be on the path.</p>
<h3 id="shiny_data_dir"><a href="#shiny_data_dir"><span class="header-section-number">2.11.3</span> <code class="pro">SHINY_DATA_DIR</code></a></h3>
<p>The historical databases of Shiny applications used in the Admin dashboard can consume multiple Gigabytes of disk space on a system hosting many applications. This environment variable allows you to define the directory in which Shiny Server should persist data to disk. To estimate the amount of disk space required, we recommend reserving 10MB in this directory for every Shiny application you plan to host on a server. Additionally, ensure that this directory is writable by the <code>shiny</code> user, or whichever user you're running Shiny Server as (as is discussed in detail in the <a href="#run_as"><code>run_as</code></a> section).</p>
<p>Note that Shiny Server expects a directory named <code>monitor/rrd/</code> to already exist inside <code>SHINY_DATA_DIR</code> when it starts.</p>
<p>By default, Shiny Server will create and store data in <code>/var/lib/shiny-server/</code>.</p>
<h1 id="deploying-applications"><a href="#deploying-applications"><span class="header-section-number">3</span> Deploying Applications</a></h1>
<h2 id="schedulers-application-restarts"><a href="#schedulers-application-restarts"><span class="header-section-number">3.1</span> Schedulers &amp; Application Restarts</a></h2>
<p>A scheduler is responsible for fulfilling incoming requests to a particular application. Each version of an application (see below) will have its own associated scheduler. Each scheduler can have different properties to control things like how many concurrent connections it should accept.</p>
<p>A scheduler can be specified at many locations in the configuration file and will be inherited to inner blocks. For instance, a scheduler definition found in a <code>server</code> block will be applied to every <code>location</code> in that <code>server</code>, unless overridden.</p>
<h3 id="restarting-an-application"><a href="#restarting-an-application"><span class="header-section-number">3.1.1</span> Restarting an Application</a></h3>
<p>Some changes you make to the code, assets, or environment of an application will require the application's R processes to be restarted for the changes to take effect. These include upgrades to packages that are used by the application, changes to <code>.Renviron</code>/<code>.Rprofile</code> or other R source files, or modifications to data files that are read only at startup time.</p>
<p>(Fortunately, Shiny applications generally do not need to be restarted when changes to <code>ui.R</code> or <code>server.R</code> are made, as Shiny will check for changes to these files on page load.)</p>
<p>An application can be restarted by altering the &quot;modified time&quot; on a file named <code>restart.txt</code> in the application's directory. This can most easily be done using the <code>touch</code> utility as in <code>touch restart.txt</code> which will update the modified timestamp on this file to the current time. Upon the next new connection to the application, Shiny Server will spawn a new R process to run the &quot;new&quot; (restarted) Shiny Application for this and future users. When this occurs, the old processes will remain unaltered, and open connections will remain active and valid until the last connection closes itself.</p>
<p>This can cause unintuitive consequences regarding the number of processes that may be running for a given application. Even if using a single-process Simple Scheduler for an application, it is possible that there would be multiple R processes associated with this application, each corresponding to a separate restart timestamp. This behavior is likely to change in future versions of Shiny Server.</p>
<h3 id="simple-scheduler"><a href="#simple-scheduler"><span class="header-section-number">3.1.2</span> Simple Scheduler</a></h3>
<p>The Simple Scheduler is the only scheduler available in the Open Source edition of Shiny Server. It associates a single R process with a single Shiny application. This scheduler accepts a single parameter which specifies the maximum number of concurrent sessions. Once this number is reached, users attempting to create a new session on this application will receive a 503 error page.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define a new location at the base URL</span>
<span class="kw">location</span> / {
  <span class="co"># Define the scheduler to use for this location</span>
  <span class="kw">simple_scheduler</span> 15<span class="kw">;</span>
  
  <span class="kw">...</span>
}</code></pre>
<p>In this example, the <code>location</code> defined at the base URL in this <code>server</code> will be configured to use the Simple Scheduler and to limit each application to a maximum of 15 simultaneous connections -- meaning that if there are 15 active connections on the application when a user attempts to visit this application, that user will receive a 503 error page. When one of the 15 active connections is disconnected, one new &quot;seat&quot; will be available for another user to connect to the application.</p>
<h3 id="utilization-scheduler" class="pro"><a href="#utilization-scheduler"><span class="header-section-number">3.1.3</span> Utilization Scheduler</a></h3>
<p>The Utilization Scheduler is a more sophisticated scheduler only available in Shiny Server Professional that allows a single Shiny application to be powered by multiple R Shiny processes. Incoming traffic will be routed to the R process associated with this Shiny application which has the fewest current connections.</p>
<p>The Utilization Scheduler is configured by three parameters.</p>
<ul>
<li><code>maxRequestsPerProc</code> -- The number of concurrent connections which a single R process can support before it will begin to return 503 errors for new sessions.</li>
<li><code>loadFactor</code> -- The &quot;trigger percentage&quot; (on a scale from 0 to 1) at which point a new R process should be spawned. Once session capacity reaches this percentage, a new process will be spawned (unless the <code>maxProc</code> limit has been reached).</li>
<li><code>maxProc</code> -- The maximum number of processes which should exist concurrently associated with this Shiny application. Note that this does not include restarted versions of the same application in its count.</li>
</ul>
<p>As an example:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> /shinyApp1 {
  <span class="co"># Define the scheduler to use for this application</span>
  <span class="kw">utilization_scheduler</span> 5 0.5 3<span class="kw">;</span>
  
  <span class="kw">...</span>
}</code></pre>
<p>The above configuration would create a Utilization Scheduler for this application which would support a maximum of 3 processes, a maximum of 5 connections per process, and a load factor of 0.5. Initially, only one process would be created to facilitate the first and second concurrent connection to this application. The third connection, however, would surpass the load factor (3/5 &gt; 0.5) which would spawn a new R process. The next request would then be routed to this new process. This would continue until the load factor was again surpassed, at which point the third process would be spawned. With a maximum of 3 processes, no more would be created after the third. So the 16th concurrent connection would be turned away with a 503 error.</p>
<p>Be aware that, upon the restart of an application using a Utilization Scheduler, the resources allotted to this application will effectively double for a time. For instance, if an application is configured to use 4 <code>maxProc</code> and has sufficient load to create and maintain that many R processes, a restart of the application will motivate Shiny Server to create an R process for a &quot;new&quot; Shiny application which also is eligible to run up to 4 Shiny processes in parallel. Thus, with one restart and sufficient traffic to this application, it is possible that it could be running 8 Shiny processes. This behavior is likely to change in future versions of Shiny Server.</p>
<h2 id="application-timeouts"><a href="#application-timeouts"><span class="header-section-number">3.2</span> Application Timeouts</a></h2>
<p>Each Shiny Application has two timeouts associated with it:</p>
<ol type="1">
<li><strong><code>app_init_timeout</code></strong> -- Describes the amount of time (in seconds) to wait for an application to start. After this many seconds if the R process still has not become responsive, it will be deemed an unsuccessful startup and the connection will be closed.</li>
<li><strong><code>app_idle_timeout</code></strong> -- Defines the amount of time (in seconds) an R process with no active connections should remain open. After the last connection disconnects from an R process, this timer will start and, after the specified number of seconds, if no new connections have been created, the R process will be killed.</li>
</ol>
<p>Typically, these two parameters will be correlated. Shiny Applications which involve little processing to start (therefore have a small <code>app_init_timeout</code>) can often be closed with minimal concern (thus would have a small <code>app_idle_timeout</code>). Conversely, applications which require a substantial amount of data to be loaded on startup may merit a longer <code>app_init_timeout</code> to give the data time to load, and a longer <code>app_idle_timeout</code> as the task of spawning a new process is more expensive and should be minimized.</p>
<h2 id="session-timeouts" class="pro"><a href="#session-timeouts"><span class="header-section-number">3.3</span> Session Timeouts</a></h2>
<p>The <code>app_session_timeout</code> setting can be used to automatically disconnect idle Shiny connections. The setting accepts a single parameter which dictates the number of seconds after which an idle session will be disconnected. Here &quot;idleness&quot; is measured by a connection's interaction with the server. Incoming or outgoing data will reset the countdown time for this user's session. If the number of seconds specified elapses without any data being sent to or from this client, the user's session will be disconnected.</p>
<p>This parameter can be configured as a setting globally, or of a particular <code>server</code>or <code>location</code>. It can be used to ensure that stale R processes are eventually closed by terminating sessions after they become idle for some period of time.</p>
<p>Session timeouts are configurable on a per-server or per-application basis. Controlling the session timeout can be important in helping the administrator manage the resource allocation for a given application and in freeing up resources from idle connections which will then be available to newly created sessions.</p>
<h2 id="logging-and-analytics"><a href="#logging-and-analytics"><span class="header-section-number">3.4</span> Logging and Analytics</a></h2>
<h3 id="application-error-logs"><a href="#application-error-logs"><span class="header-section-number">3.4.1</span> Application Error Logs</a></h3>
<p>Error logs are created for each R Shiny process separately. For <code>location</code>s configured to use <code>user_apps</code>, these logs are created in each user's <code>~/ShinyApps/log/</code> directory. For <code>location</code>s configured with <code>app_dir</code> or <code>site_dir</code>, the directory in which these logs are created is managed by the <code>log_dir</code> setting, which can be specified globally, for a particular <code>server</code>, or for a particular <code>location</code>. By default, these logs will be located at <code>/var/log/shiny-server/</code>. To change these <code>location</code>s, the <code>log_dir</code> can be specified in the following way:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">log_dir</span> /var/log/shiny-server/<span class="kw">;</span>
}</code></pre>
<p>The log files will be created in the following format:</p>
<pre><code>&lt;application directory name&gt;-YYYMMDD-HHmmss-&lt;port number or socket ID&gt;.log</code></pre>
<p>Log files will be created for each R process when it is started. However, if a process closes successfully, the error log associated with that process will be automatically deleted. The only error log files that will remain on disk are those associated with R processes that did not exit as expected.</p>
<p>If you're looking for log messages related to Shiny Server itself -- rather than individual Shiny applications -- see the section on the <a href="#server-log">Server Log</a>.</p>
<h3 id="google-analytics"><a href="#google-analytics"><span class="header-section-number">3.4.2</span> Google Analytics</a></h3>
<p>Shiny Server is capable of automatically inserting the necessary JavaScript code to enable Google Analytics tracking globally or for a particular <code>server</code> or <code>location</code>. This is managed by the <code>google_analytics_id</code> setting which can be used as follows:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">google_analytics_id</span> UA-12345-1<span class="kw">;</span>
}</code></pre>
<h2 id="memory-limits" class="pro"><a href="#memory-limits"><span class="header-section-number">3.5</span> Memory Limits</a></h2>
<p>Memory limits will be added in a coming version of Shiny Server Professional.</p>
<h2 id="reactivity-log"><a href="#reactivity-log"><span class="header-section-number">3.6</span> Reactivity Log</a></h2>
<p>The reactivity log is a great browser-based tool for analyzing and debugging reactive dependencies in a Shiny Application. We strongly recommend that you read the <a href="http://rstudio.github.io/shiny/tutorial/#reactivity-overview">Overview of Reactivity</a> in the Shiny tutorial to get the most out of the reactivity log. The symbols and representations introduced in that article are reused in the log. This tool should not be used in a production environment, as it exposes details that should not be publicly available. Many application authors find it to be a useful tool to use locally, however.</p>
<p>Currently, reactivity logs are maintained for an entire R process. Therefore, it should be used in a fresh R session in which only one Shiny application is active. To enable the reactivity log, run the command <code>options(shiny.reactlog=TRUE)</code> before running your application. Once you've started your application and are viewing it in a browser, you can use <code>Ctrl+F3</code> (or <code>Command+F3</code> for Mac users) to view the reactivity log. This visualization creates a snapshot of all reactive activity that had occurred up to the moment it was created. If you want to view the reactive activity that has occurred since opening the reactivity log, you'll need to refresh the browser.</p>
<p>The <code>showReactLog()</code> function exposes this functionality from within R and can be used outside of strictly Shiny contexts to generate a static HTML file visualizing reactivity. You can see the full documentation using <code>?showReactLog</code> in R.</p>
<p>As the reactivity log exposes the architecture and some of the code behind your application, it would likely be unwise to enable this feature in a production environment. Unless explicitly enabled by the user, Shiny Server will not enable this functionality. We recomend using the reactivity log in a local R process not managed by Shiny Server.</p>
<h2 id="specifying-protocols"><a href="#specifying-protocols"><span class="header-section-number">3.7</span> Specifying Protocols</a></h2>
<p>Shiny Server can use a wide variety of techniques to keep the data in the web browser synchronized. The preferred technique, and the one most widely used, is the use of WebSockets. However, if WebSockets are not supported -- either by some intermediate network between Shiny Server and your client or by your client's web browser -- then a fallback protocol will be used. In total, Shiny Server provides nine different methods of connecting to the server in real-time. In order of preference, they are:</p>
<ol type="1">
<li>WebSocket</li>
<li>XDR Streaming</li>
<li>XHR Streaming</li>
<li>iframe Eventsource</li>
<li>iframe HTML File</li>
<li>XDR Pollilng</li>
<li>XHR Polling</li>
<li>iframe XHR Polling</li>
<li>JSONP Polling</li>
</ol>
<p>Each of these will be tried by the client in order until a successful connection to Shiny Server. If you would like to omit one or more of these protocols from the list for whatever reason, you can currently do so only from the client (we hope to make a server-side configuration available in a future release of Shiny Server).</p>
<p>To change the available protocols, you can open any Shiny Application and press the keyboard shortcut: <code>Ctrl+Alt+Shift+A</code> (or, from a Mac: <code>control+option+shift+A</code>). This will bring up a window that will allow you to select or deselect any of the above protocols. After confirming your changes these settings will be saved in your browser for future visits to this server. These settings will take effect upon loading any Shiny application hosted on this domain and will last until you explicitly change them again.</p>
<h1 id="authentication-security" class="pro"><a href="#authentication-security"><span class="header-section-number">4</span> Authentication &amp; Security</a></h1>
<h2 id="authentication-overview" class="pro"><a href="#authentication-overview"><span class="header-section-number">4.1</span> Authentication Overview</a></h2>
<p>Shiny Server Professional offers the ability to authenticate individual users. By specifying authentication requirements on particular <code>server</code>s or <code>location</code>s, the administrator can control the set of applications particular users are allowed to access.</p>
<p>Authentication can be implemented by integrating into an existing LDAP or Active Directory database, or by using a &quot;flat-file&quot; authentication system which is simply contained in a local file. To ensure that your users' passwords are being protected, it is <strong>strongly encouraged</strong> that any Shiny application requiring authentication use <a href="#ssl">SSL</a> to encrypt the usernames and passwords being transmitted.</p>
<p>The current user's username and groups (where applicable) will be available in Shiny (version 0.8 and later) in the <code>session</code> parameter of the <code>shinyServer</code> function. For instance:</p>
<pre><code>shinyServer(function(input, output, session) {
  output$username &lt;- reactive({
    session$user
  })
  
  output$groups &lt;- reactive({
    session$groups
  })
})</code></pre>
<h2 id="auth-duration" class="pro"><a href="#auth-duration"><span class="header-section-number">4.2</span> Auth Duration</a></h2>
<p>Regardless of which authentication mechanism is used, the duration of authentication can be configured using the <code>auth_duration</code> setting. This setting controls the amount of time (in minutes) for which a user should remain logged in after the finish using their last application. This setting should be set to 10 minutes or greater.</p>
<h2 id="flat-file-authentication" class="pro"><a href="#flat-file-authentication"><span class="header-section-number">4.3</span> Flat-File Authentication</a></h2>
<p>Shiny Server offers flat-file authentication as a simple and easy-to-configure authentication mechanism. This method is self-contained and not integrated into either the system's user/password database, nor any Enterprise authentication mechanism. Thus, usernames and passwords must be created explicitly for each user that should exist in Shiny Server.</p>
<p>The storage of usernames and passwords is handled by a single file which can be specified using the <code>auth_passwd_file</code> setting as follows:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">run_as</span> shiny<span class="kw">;</span>

<span class="kw">auth_passwd_file</span> /etc/shiny-server/passwd<span class="kw">;</span>

<span class="kw">server</span> {
  <span class="kw">location</span> / {
    <span class="kw">...</span></code></pre>
<p>This will instruct Shiny Server to lookup all usernames and passwords in the file stored at <code>/etc/shiny-server/passwd</code>. This file should have zero or more lines in the format <code>username:{scrypt-hashed-password}</code>. The scrypt encryption algorithm is used to protect users' passwords from theft; the hashed passwords are expected in this file in base64 format. We provide the <a href="#sspasswd">sspasswd</a> utility with Shiny Server Professional that vastly simplifies the process of managing these &quot;sspasswd&quot; files.</p>
<p>You'll want to think carefully before adjusting the permissions on this file. For instance, if you were to enable the <code>shiny</code> user to write to your password database, any Shiny application running as <code>shiny</code> (the default) would now be able to modify your password database. Because the passwords are securely hashed, granting <code>shiny</code> read access to this file is not problematic and, in fact, is enabled by default.</p>
<h3 id="sspasswd" class="pro"><a href="#sspasswd"><span class="header-section-number">4.3.1</span> sspasswd</a></h3>
<p>The <code>sspasswd</code> utility comes with Shiny Server Professional and can be used to manage the username/password file. By default, it is not made available on the <code>PATH</code> but you can find it in <code>opt/shiny-server/bin/</code>. The general pattern for the utility is to provide the file to use for storage followed by a username, as in:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/sspasswd /etc/shiny-server/passwd tina</code></pre>
<p>To create a (or overwrite an existing) password file, use the <code>-c</code> switch. The default behavior will be to add the username specified (<code>tina</code>, in the example above) to the file after prompting the user for a password (or reading it from <code>stdin</code>). To instead delete a user from the file, use the <code>-D</code> switch. User/password combinations can be verified using the <code>-v</code> switch. Finally, the <code>-C</code> switch will set the maximum amount of time (in seconds) for encryption. The larger this value is, the more secure the password hash will be.</p>
<p>Currently, the '<code>:</code>', '<code>$</code>' and newline ('<code>\r</code>' or '<code>\n</code>') characters are prohibited in usernames.</p>
<h2 id="ldap-and-active-directory" class="pro"><a href="#ldap-and-active-directory"><span class="header-section-number">4.4</span> LDAP and Active Directory</a></h2>
<p>Lightweight Directory Access Protocol (LDAP) is a popular protocol for storing and validating user information in an enterprise. LDAP can store information about users and their group memberships which Shiny Server Pro is able to query using user's username and password. Fundamentally, the LDAP protocol simply describes a framework for storing hierarchical data and can be configured in a multitude of ways. Active Directory is one popular directory service which implements LDAP and encourages a certain model for storing data, while other vendors of LDAP systems often have their own distinct default configurations. A holistic overview of LDAP is outside of the scope of this document, so if you lack a solid background in LDAP you might benefit from consulting with an LDAP administrator in your organization to configure these settings.</p>
<p>An LDAP configuration in Shiny Server Pro might look like this:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">auth_ldap</span> ldap://ldap.example.org/dc=example,dc=org {
  <span class="kw">group_filter</span> <span class="st">&quot;memberUid={username}&quot;</span><span class="kw">;</span>
  <span class="kw">group_search_base</span> ou=Groups<span class="kw">;</span>
}</code></pre>
<p>It is fully possible to use the <code>auth_ldap</code> configuration to integrate with an Active Directory system. However, Active Directory encourages a certain pattern which we capture in the <code>auth_active_dir</code> directive which extends <code>auth_ldap</code>. The hope is that this configuration can be used to make setup simpler for groups using Active Directory. If you're using an Active Directory server, you may just be able to specify the <code>auth_active_dir</code> setting and not worry about providing any of the others.</p>
<p>An Active Directory configuration setting may look something like the following:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">auth_active_dir</span> ldaps://dc01.example.org/dc=example,dc=org example.org{
  <span class="kw">trusted_ca</span> /etc/ssl/certs/example-org.cert<span class="kw">;</span>
}</code></pre>
<p>We currently support only a limited subset of Unicode characters as usernames for LDAP and Active Directory. Usernames must include only:</p>
<ul>
<li>Alphanumeric characters</li>
<li><code>_</code> - Underscore</li>
<li><code>.</code> - Period</li>
<li><code>@</code> - &quot;at&quot; symbol</li>
</ul>
<p>We do not permit empty usernames or passwords.</p>
<p>The parent directive for all LDAP-related settings is <code>auth_ldap</code> or <code>auth_active_dir</code>. Both accept an LDAP URL as their first argument. <code>auth_active_dir</code> accepts a second argument which is the suffix (typically a domain name) to be added to all usernames when attempting to bind. All other children settings within this directive are not required, but may be needed depending on your LDAP configuration.</p>
<p>The LDAP URL should look like the following:</p>
<pre><code>ldaps://ldap.example.org:1234/dc=example,dc=org</code></pre>
<p>It begins with the protocol to be used when contacting the LDAP server -- either <code>ldap://</code> (for unencrypted LDAP) or <code>ldaps://</code> (LDAP over an encrypted SSL tunnel). We do not currently support StartTLS. If your LDAP server supports <code>ldaps://</code>, this option is more secure and ensures the username and passwords aren't being transmitted between Shiny Server and your LDAP server in plain text. Next, the hostname or IP of the LDAP server should follow the protocol. Bear in mind that the given hostname or IP <em>must</em> match the hostname associated with the SSL certificate if using <code>ldaps://</code>. If using a non-standard port (anything other than 389 for <code>ldap://</code> or 636 for <code>ldaps://</code>), you can follow the hostname with a colon and the port number which should be used. Following the hostname/port should be a forward slash then the root DIT of the directory to use.</p>
<p>There are a variety of settings which will be used to guide Shiny Server Pro's interaction with your LDAP server. These will all be defined inside of an <code>auth_ldap</code> or <code>auth_active_dir</code> setting and are described below. Be aware that the primary difference between <code>auth_ldap</code> and <code>auth_active_dir</code> is the default values assigned to these settings. If any of these settings are not specified, the default values will be used.</p>
<p>Some of the settings may include dynamic values which will be listed under the &quot;Variables Available&quot; section in each. These variables are enclosed in curly braces (&quot;{&quot; and &quot;}&quot;) and will be replaced with their value before being used.</p>
<h3 id="user_bind_template"><a href="#user_bind_template"><span class="header-section-number">4.4.1</span> <code class="pro">user_bind_template</code></a></h3>
<p>Shiny Server Pro will transform the username entered at the login screen before attempting to &quot;bind&quot; (authenticate) to the LDAP server using this template. In general (notable exception being Active Directory), this pattern should map the given username to the user's DN in the LDAP database. In systems where that may not be possible (such as Active Directory), you can use the [<code>user_filter</code>] setting to lookup the user's DN given their username. In either case, this setting should manipulate the given username into the username used to perform the LDAP <code>bind</code> operation.</p>
<p><strong>Variables Available</strong></p>
<ul>
<li><code>{username}</code> -- The username entered by the user at the login screen.</li>
<li><code>{root}</code> -- The root DIT provided to the parent <code>auth_ldap</code> or <code>auth_active_dir</code> setting.</li>
</ul>
<p><strong>Default Value</strong></p>
<ul>
<li>For <code>auth_ldap</code> -- <code>uid={username},ou=People,{root}</code></li>
<li>For <code>auth_active_dir</code> -- <code>{username}@example.org</code> (where &quot;example.org&quot; is the domain name you provided as the second argument to <code>auth_active_dir</code>).</li>
</ul>
<h3 id="group_search_base"><a href="#group_search_base"><span class="header-section-number">4.4.2</span> <code class="pro">group_search_base</code></a></h3>
<p>Defines the subtree in which groups are stored. This will be used as the root of all LDAP queries which attempt to find the groups of which a user is a member. The given value will be followed by a comma and the root DIT given in the <code>auth_ldap</code> or <code>auth_active_dir</code> parent setting. If configured to use an empty string as the base, then the unmodified root DIT will be used as the group search base.</p>
<p><strong>Default Value</strong></p>
<ul>
<li>For <code>auth_ldap</code> -- <code>ou=Groups</code></li>
<li>For <code>auth_active_dir</code> -- <code>cn=Users</code></li>
</ul>
<h3 id="group_filter"><a href="#group_filter"><span class="header-section-number">4.4.3</span> <code class="pro">group_filter</code></a></h3>
<p>The LDAP query to use in determining a user's group membership. The query should return all groups of which the given user is a member</p>
<p>The default for <code>auth_ldap</code> checks the <code>uniqueMember</code> field -- a setting from the <code>groupOfUniqueMembers</code> LDAP class. If you're using the <code>posixGroup</code> LDAP class to store your group memberships, you should likely set this value to <code>memberUid={username}</code>.</p>
<p><strong>Variables Available</strong></p>
<ul>
<li><code>{username}</code> -- The username entered by the user at the login screen.</li>
<li><code>{userDN}</code> -- The computed DN for the entered user. If <code>user_filter</code> is unspecified, this will just be the value calculated using the pattern from <code>user_bind_template</code>. If <code>user_filter</code> is provided, then this will be the DN of the first object which matched the query specified in <code>user_filter</code>.</li>
<li><code>{root}</code> -- The root DIT provided to the parent <code>auth_ldap</code> or <code>auth_active_dir</code> setting.</li>
</ul>
<p><strong>Default Value</strong></p>
<ul>
<li>For <code>auth_ldap</code> -- <code>uniqueMember={username}</code></li>
<li>For <code>auth_active_dir</code> -- <code>member:1.2.840.113556.1.4.1941:={userDN}</code></li>
</ul>
<h3 id="group_name_attribute"><a href="#group_name_attribute"><span class="header-section-number">4.4.4</span> <code class="pro">group_name_attribute</code></a></h3>
<p>The attribute of the LDAP group object in which the group name is stored. This field will be compared to the entries in the <code>required_group</code> setting to determine whether or not a user should be granted access to a Shiny application.</p>
<p><strong>Default Value</strong></p>
<p><code>cn</code></p>
<h3 id="trusted_ca"><a href="#trusted_ca"><span class="header-section-number">4.4.5</span> <code class="pro">trusted_ca</code></a></h3>
<p>By default, Shiny Server Pro trusts many standard SSL Certificate Authorities (CAs) (such as Verisign). If your organization uses a non-trusted Certificate Authority to sign its SSL certificates, you will need to explicitly tell Shiny Server Pro to trust this CA's certificate. You can do this by placing the CA's certificate (in PEM format) in a file on your machine and pointing this setting to that file.</p>
<p>If this value is provided, the standard list of trusted CAs will be overridden with the provided certificate.</p>
<p><strong>Default Value</strong></p>
<p>None.</p>
<h3 id="check_ssl_ca"><a href="#check_ssl_ca"><span class="header-section-number">4.4.6</span> <code class="pro">check_ssl_ca</code></a></h3>
<p>When using LDAP over SSL (<code>ldaps://</code>), Shiny Server Pro will check that the SSL certificate was signed by a recognized Certificate Authority (CA) (though this can be modified using the <code>trusted_ca</code> setting). <code>check_ssl_ca</code> can be used to disable the checking of CAs entirely. By default, this option will be 'true' to enable SSL CA validation.</p>
<p>Disabling these checks is necessary if your LDAP server uses a self-signed certificate, for instance. Otherwise, this setting should typically be left enabled as disabling it will largely defeat the security gained by using SSL.</p>
<p><strong>Default Value</strong></p>
<p><code>true</code></p>
<h3 id="user_filter"><a href="#user_filter"><span class="header-section-number">4.4.7</span> <code class="pro">user_filter</code></a></h3>
<p>Some systems (notably many Active Directory implementations) do not use the username as a part of the user's DN. In such systems, It may be necessary to perform an extra LDAP query after binding to determine the user's DN based on their username before group membership can be determined. This setting stores the LDAP filter used to find the user object which matches the entered username.</p>
<p>Using the default provided for <code>auth_active_dir</code> (<code>userPrincipalName={userBind}</code>), as an example. Shiny Server Pro will attempt to bind to the LDAP server using the given username (after being manipulated as defined in <code>user_bind_template</code>) and password. If successful, it will then search for an object whose attribute <code>userPrincipalName</code> matches the username manipulated by <code>user_bind_template</code>. If found, the returned object's DN will be made available to the <code>group_filter</code> as the <code>{userDN}</code> variable.</p>
<p><strong>Default Value</strong></p>
<ul>
<li>For <code>auth_ldap</code> -- N/A</li>
<li>For <code>auth_active_dir</code> -- <code>userPrincipalName={userBind}</code></li>
</ul>
<h3 id="user_search_base"><a href="#user_search_base"><span class="header-section-number">4.4.8</span> <code class="pro">user_search_base</code></a></h3>
<p>Defines the subtree in which users are stored. This will only be used if <code>user_filter</code> is not empty, as that is the only time that Shiny Server Pro would need to search for a user. If provided, this will be used as the root of the LDAP queries used to lookup a user by his or her username. The given value will be followed by a comma and the root DIT given in the <code>auth_ldap</code> or <code>auth_active_dir</code> parent setting. If configured to use an empty string as the base, then the unmodified root DIT will be used as the user search base.</p>
<p><strong>Default Value</strong></p>
<ul>
<li>For <code>auth_ldap</code> -- <code>ou=People</code></li>
<li>For <code>auth_active_dir</code> -- <code>cn=Users</code></li>
</ul>
<h2 id="required-users-groups" class="pro"><a href="#required-users-groups"><span class="header-section-number">4.5</span> Required Users &amp; Groups</a></h2>
<h3 id="user-authentication" class="pro"><a href="#user-authentication"><span class="header-section-number">4.5.1</span> User Authentication</a></h3>
<p>The <code>required_user</code> setting controls which users should be able to access a particular <code>server</code>, <code>location</code>, or <code>admin</code>, as in:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> /app1 {
  <span class="kw">required_user</span> kim tom<span class="kw">;</span>
}</code></pre>
<p>This directive would enable authentication on the specified <code>location</code>, which would present any new, un-authenticated visitor to the application with a login page. If the visitor entered valid credentials against your configured authentication mechanism, then he or she would be checked against the list of allowed users for this application. If found (i.e. if the user name was either <code>kim</code> or <code>tom</code>), the visitor would be granted access to the application. Otherwise, he or she would be unable to access the application.</p>
<p>It is encouraged that any <code>server</code> accepting user credentials be secured via <a href="#ssl">SSL</a>.</p>
<h3 id="group-authentication" class="pro"><a href="#group-authentication"><span class="header-section-number">4.5.2</span> Group Authentication</a></h3>
<p>The <code>required_group</code> setting allows the administrator to control access based on the groups of which users are a member. In this way, entire sets of users can be granted access to a particular location in one line in the configuration file.</p>
<p>Flat-file authentication does not support the notion of user groups, but this feature can be used with LDAP or Active Directory by adding a restriction like the following:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> /app1 {
  <span class="kw">required_group</span> shinyUsers admins<span class="kw">;</span>
}</code></pre>
<p>This configuration would grant access to any user who is a member of either the <code>shinyUsers</code> or <code>admins</code> group.</p>
<h2 id="proxied-headers" class="pro"><a href="#proxied-headers"><span class="header-section-number">4.6</span> Proxied Headers</a></h2>
<p>Typically, HTTP headers sent to Shiny Server will not be forwarded to the underlying Shiny application. However, Shiny Server Professional is able to forward specified headers into the Shiny application using the <code>whitelist_headers</code> configuration directive, which can be set globally or for a particular <code>server</code> or <code>location</code>.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">listen</span> 3838<span class="kw">;</span>
  <span class="kw">whitelist_headers</span> myorg_username myorg_groupnames myorg_privileges<span class="kw">;</span>
  
  <span class="kw">...</span>

}</code></pre>
<p>The above configuration would allow the three listed <code>myorg_</code> headers (case-insensitive) to be forwarded from the originating HTTP traffic into the Shiny session. In Shiny, these headers would be converted to capital letters and prefaced with <code>HTTP_</code> to designate that the headers originated in an HTTP request. They would then be available as objects in the <code>session$request</code> environment inside an application's <code>server.R</code> file. For example, the <code>myorg_username</code> object could be accessed via the following <code>server.R</code> file.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">library</span>(shiny)
<span class="kw">shinyServer</span>(function(input, output, session)<span class="kw">{</span>
  <span class="kw">output</span><span class="ot">$username</span> <span class="kw">&lt;</span>- renderText({
    <span class="kw">session</span><span class="ot">$request$HTTP_MYORG_USERNAME</span>
  <span class="kw">}</span>)
})</code></pre>
<p>Organizations which employ a centralized authentication system not supported by Shiny Server may use this feature to leverage a proxied authentication system. In such a model, traffic destined for Shiny Server Professional would first be sent through an authenticating proxy which would take care of ensuring that the user is authenticated and the appropriate headers are set indicating the user, groups, or permissions. The application deployed on Shiny Server Professional would then use these headers to determine whether the user should be allowed access to the application, or a subset of the features of the application.</p>
<p>Be aware that, in such a model, the entirity of the <code>ui.R</code> file will be run and passed to the client before the server-side has a chance to make any decision about what privileges the current user should have given their HTTP headers (if any). So the proxy must be responsible for authenticating or rejecting visitors prior to forwarding any traffic to Shiny Server Professional if any sensitive information would be disclosed by a user merely opening the UI. Additionally, precautions should be taken to ensure that the Shiny Server machine is not accessible directly by users, but is instead <em>only</em> accessible through the authenticating proxy. Otherwise, an attacker would merely need to provide fraudulent HTTP headers when accessing Shiny Server in order to imitate another user or claim particular privileges.</p>
<h2 id="ssl" class="pro"><a href="#ssl"><span class="header-section-number">4.7</span> SSL</a></h2>
<p>In Shiny Server Professional, SSL encryption is available for any configured <code>server</code> and in the <code>admin</code> interface. SSL is a means of encrypting traffic between web clients and servers and should be used for any application that will accept or transmit sensitive information such as passwords. Untrusted SSL certificates can be generated locally by anyone for free; signed SSL certificates can be obtained from authorized certificate authorities fairly inexpensively. Untrusted SSL certificates will still encrypt the traffic between a client and server, but (in most browsers), the client will need to proceed through a warning about the untrusted nature of the SSL certificate in use. SSL can be enabled on a <code>server</code> by configuring the two required parameters: the path to the SSL key, and the path to the SSL certificate.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="co"># Instruct this server to listen on port 443, the default port for HTTPS </span>
  <span class="co"># traffic</span>
  <span class="kw">listen</span> 443<span class="kw">;</span>
  <span class="kw">ssl</span> /etc/shiny-server/ssl-key.pem /etc/shiny-server/ssl.cert<span class="kw">;</span>
  
  <span class="kw">...</span>
}</code></pre>
<p>If a valid SSL key and certificate were provided, a user would now need to preface their request with &quot;https://&quot; to be able to visit any application hosted within this <code>server</code> or on the <code>admin</code>. It is highly recommended that any Shiny Server Pro configuration which expects to accept its users' LDAP or Active Directory credentials use SSL to secure the usernames and passwords on their applications and admin interface.</p>
<h1 id="admin" class="pro"><a href="#admin"><span class="header-section-number">5</span> Admin</a></h1>
<h2 id="configuration" class="pro"><a href="#configuration"><span class="header-section-number">5.1</span> Configuration</a></h2>
<p>The Admin interface provided as a part of Shiny Server Professional is disabled by default. To enable it, use the <code>admin</code> setting and specify the port number on which the admin interface should run.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">admin</span> 3957 {
  <span class="kw">required_user</span> tom sarah<span class="kw">;</span>
}</code></pre>
<p>The above would enable the admin interface on port 3957. This interface would then be available from any modern web browser on that port. First-time visitors would be presented with a login page. If the visitor were able to authenticate themselves to the Shiny Server application as either <code>tom</code> or <code>sarah</code>, they would be granted access to the admin dashboard.</p>
<p>The required user must be one connected to Shiny Server as described in <a href="#authentication-security">Authentication &amp; Security</a>.</p>
<p>You can also leverage <a href="#ssl">SSL</a> to secure the usernames and passwords accepted on the admin login screen.</p>
<h2 id="organization" class="pro"><a href="#organization"><span class="header-section-number">5.2</span> Organization</a></h2>
<p>The admin interface offers a real-time view into the current state of your Shiny Server. There is no need to refresh the page periodically, as the information is updated as it happens. The interface is divided into four main sections.</p>
<p><strong>Dashboard</strong></p>
<p>Initially when logging in, the user will be presented with the Dashboard view. This view shows a basic overview of the state of Shiny Server, including the current RAM and CPU utilization, the number of connections, and historical RAM and CPU saturation.</p>
<p><strong>Applications</strong></p>
<p>The highest-level grouping in the admin interface is the notion of an &quot;Application.&quot; An application represents a Shiny App stored in a particular directory on your server. There may be multiple R processes behind one application due to application restarts, but all of these R processes are considered part of the same application. Initially, you will be presented with a table depicting an overview of the various directories on your server in which applications are stored, the current number of processes associated with that application, and the number of open connections to that application.</p>
<p>Shiny Server does not crawl the disk to discover all the potential Shiny applications which could be spawned. Instead, it only becomes aware of the existence of a Shiny application once its visited.</p>
<p>Clicking on any &quot;App Directory&quot; in the table will take you to the detailed view for that application. On this page, you'll be able to track current and historical RAM usage, along with CPU utilization, active processes, and open connections.</p>
<p>You'll also see the current and historical &quot;latency&quot; for this application. Keep in mind that, because R is single-threaded, it is only able to compute one request at at time. Thus, while one user's request is being computed, any other requests that are assigned to this R process will be inserted into a queue until the R process becomes free. Only at that point, will computation begin on the second request. The latency of an application represents the delay between when a request initially arrived at Shiny Server and the moment the assigned R process began computation to fulfill that request. A Shiny application that is not computationally intensive and doesn't have many active users may see a latency of just a few milliseconds. Conversely, an application which is computationally intensive and/or overwhelmed with more users than the associated process(es) can handle will see a much higher latency.</p>
<p><strong>Processes</strong></p>
<p>The &quot;Processes&quot; tab provides access to information about the underlying R Shiny processes which support the various applications being hosted on this server. The overview table reveals with which application each process is associated, the latency of this application, and its current memory consumption. Clicking on the ID of the process will take you to the detailed view for this process. Here you can see the current CPU utilization, open connections, and various other information used to help understand this process.</p>
<p><strong>Connections</strong></p>
<p>This tab displays all of the connections currently open between Shiny Server and its visitors. You can see which application the connection is accessing, when it was opened, its current status (whether it is idle or awaiting the results of some analysis), the protocol being used, whether or not the connection is encrypted, the IP address associated with the connection, and -- if relevant -- the username to whom the connection belongs. You can also filter to only those connections associated with a particular app directory or status.</p>
<p>The protocol each connection is using will be displayed in a blue oval at the far left edge of the table using some abbreviation. If you hover the cursor over the oval, you'll see the full protocol name. You can find more details on the various protocols supported by Shiny Server in the section on <a href="#specifying-protocols">Specifying Protocols</a>.</p>
<h2 id="killing-processes-and-connections" class="pro"><a href="#killing-processes-and-connections"><span class="header-section-number">5.3</span> Killing Processes and Connections</a></h2>
<p>The Admin interface also provides the opportunity to kill individual processes or connections. Alongside any table in which a process is listed, if you point your mouse at an application or connection, you will see a button appear on the right side which allows you to kill that app/connection. Clicking this button will present you with a confirmation dialogue box which asks you to confirm that you do desire to disconnect this connection or kill this process. If you confirm, that process or connection will be terminated.</p>
<p>If disconnecting a connection, the user will suddenly be disconnected from the server and the application will appear &quot;greyed out.&quot; Keep in mind that, in some Shiny applications, this could forfeit some of the work being done by this user on that application. If disconnecting a process, any users with connections open to that process will be suddenly disconnected. Again, this potentially could cause the user to lose some data or work if they were using a complex Shiny application.</p>
<h1 id="licensing-activation" class="pro"><a href="#licensing-activation"><span class="header-section-number">6</span> Licensing &amp; Activation</a></h1>
<h2 id="product-activation" class="pro"><a href="#product-activation"><span class="header-section-number">6.1</span> Product Activation</a></h2>
<h3 id="activation-basics" class="pro"><a href="#activation-basics"><span class="header-section-number">6.1.1</span> Activation Basics</a></h3>
<p>When Shiny Server Professional is first installed on a system it operates in evaluation mode for a period of time and then subsequently requires activation for continued use. To determine the current license status of your system you can use the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager status</code></pre>
<p>After purchasing a license to Shiny Server Professional you'll receive a product key that can be used to activate the license on a given system. You can perform the activation as follows:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager activate <span class="kw">&lt;</span>product-key<span class="kw">&gt;</span>
$ <span class="kw">sudo</span> reload shiny-server  <span class="co"># or &quot;sudo /sbin/service shiny-server reload&quot;</span></code></pre>
<p>Note that you need to reload or restart the server for licensing changes to take effect.</p>
<p>If you want to move your license of Shiny Server Professional to another system you should first deactivate it on the system you are moving from. For example:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager deactivate</code></pre>
<h3 id="virtual-machines" class="pro"><a href="#virtual-machines"><span class="header-section-number">6.1.2</span> Virtual Machines</a></h3>
<p>By default Shiny Server Professional cannot be activated on virtual machines (this is because virtual machines confound the hardware signature used by the underlying activation mechanism). However, it is possible to activate on a virtual machine by contacting RStudio customer support and requesting that your product key allow VM activations.</p>
<h2 id="connectivity-requirements" class="pro"><a href="#connectivity-requirements"><span class="header-section-number">6.2</span> Connectivity Requirements</a></h2>
<p>In order to activate or deactivate Shiny Server Professional internet connectivity is required for communication with the licensing server. If your server is behind an internet proxy or not connected to the internet at all this section describes what's required to successfully activate.</p>
<h3 id="proxy-servers" class="pro"><a href="#proxy-servers"><span class="header-section-number">6.2.1</span> Proxy Servers</a></h3>
<p>If your server is behind an internet proxy you may need to add an additional command line flag indicating the address and credentials required to communicate through the proxy. Note however that this may not be necessary if either the <code>http_proxy</code> or <code>all_proxy</code> environment variable is defined (these are read and used by Shiny Server Professional when available).</p>
<p>If you do need to specify a proxy server explicitly you can do so using the <code>--proxy</code> command line parameter. For example:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager --proxy=http://127.0.0.1/ activate <span class="kw">&lt;</span>product-key<span class="kw">&gt;</span></code></pre>
<p>Proxy settings can include a host-name, port, and username/password if necessary. The following are all valid proxy configurations:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">http</span>://127.0.0.1/
<span class="kw">http</span>://127.0.0.1:8080/
<span class="kw">http</span>://user:pass@127.0.0.1:8080/</code></pre>
<p>If the port is not specified, the license manager will default to using port 1080.</p>
<h3 id="offline-activation" class="pro"><a href="#offline-activation"><span class="header-section-number">6.2.2</span> Offline Activation</a></h3>
<p>If your system has no connection to the internet it's also possible to perform an offline activation. To do this, you first generate an offline activation request as follows:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager activate-offline-request <span class="kw">&lt;</span>product-key<span class="kw">&gt;</span></code></pre>
<p>Executing this command will print an offline activation request to the terminal which you should copy and paste and then send to RStudio customer support (<a href="support@rstudio.com">support@rstudio.com</a>). You will receive a reply with a file attachment that can be used to activate offline as follows:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager activate-offline <span class="kw">&lt;</span>activation-file<span class="kw">&gt;</span>
$ <span class="kw">sudo</span> reload shiny-server  <span class="co"># or &quot;sudo /sbin/service shiny-server reload&quot;</span></code></pre>
<p>Note that you need to reload or restart the server in order for licensing changes to take effect.</p>
<p>If you want to move your license of Shiny Server Professional to another system you can also perform license deactivation offline. You can do this as follows:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager deactivate-offline</code></pre>
<p>Executing this command will print an offline deactivation request to the terminal which you should copy and paste and then send to RStudio customer support (<a href="support@rstudio.com">support@rstudio.com</a>).</p>
<p>You can also perform an offline check of your current license status using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/license-manager status-offline</code></pre>
<h1 id="appendix"><a href="#appendix"><span class="header-section-number">7</span> Appendix</a></h1>
<h2 id="quick-start"><a href="#quick-start"><span class="header-section-number">7.1</span> Quick Start</a></h2>
<p>We recommend reading through the relevant sections of this guide to gain a complete understanding of how to operate Shiny Server. If you're just looking to get running quickly, you can follow one of the guides below.</p>
<p>All of the guides will help you customize your Shiny Server configuration file which will be stored at <code>/etc/shiny-server/shiny-server.conf</code>. By altering this file, you can control exactly how Shiny Server runs.</p>
<p>The following guides are available:</p>
<ul>
<li><a href="#host-a-directory-of-applications-1">Host a directory of applications</a> - This is the default configuration that Shiny Server will use until you provide a custom configuration in <code>/etc/shiny-server/shiny-server.conf</code>. This guide will show you how to serve multiple applications from a single directory on disk -- <code>/srv/shiny-server/</code>. If you're not sure where to start, we recommend this guide.</li>
<li><a href="#let-users-manage-their-own-applications">Let users manage their own applications</a> - This guide will serve Shiny applications created by your users and stored in their home directories.</li>
<li><a href="#run-shiny-server-on-multiple-ports">Run Shiny Server on multiple ports</a> - This guide will introduce a multi-server configuration which demonstrates how to run two distinct services on different ports on your server. It also configures one server with multiple locations.</li>
</ul>
<span class="pro-tag">PRO</span>
<div class="pro-chunk">
<p>And for Pro features:</p>
<ul>
<li><a href="#require-user-authentication-on-an-application">Require user authentication on an application</a> - This example will help you setup a local username/password database and use it to secure your applications.</li>
<li><a href="#host-a-secure-shiny-server">Host a secure Shiny Server</a> - If you're looking to setup a secure instance of Shiny Server which is encrypted with HTTPS (SSL/TLS), this guide will show you how.</li>
<li><a href="#host-an-application-supported-by-multiple-r-processes">Host an Application Supported by Multiple R Processes</a> - This guide will demonstrate how to scale a Shiny application to multiple R processes.</li>
</ul>
</div>
<h3 id="host-a-directory-of-applications-1"><a href="#host-a-directory-of-applications-1"><span class="header-section-number">7.1.1</span> Host a directory of applications</a></h3>
<p>Until a custom configuration is specified, Shiny Server will use the configuration stored at <code>/opt/shiny-server/config/default.config</code>. This configuration expects your Shiny applications to be hosted in <code>/srv/shiny-server/</code>. Let's start by copying one of the example applications from the Shiny package to this directory.</p>
<p>We'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into <code>/srv/shiny-server</code> using the following command (using the directory that was returned in the previous command, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello /srv/shiny-server/</code></pre>
<p>If that command succeeds, you've installed your first Shiny application into Shiny Server!</p>
<p>By default, Shiny Server listens on port 3838, so your new application will be available at <code>http://myserver.com:3838/01_hello</code> where <code>myserver</code> is the hostname or IP address of the Shiny Server.</p>
<p>If you wanted to change the port or the directory Shiny Server uses, you would adjust the configuration file. Shiny Server will look for a custom configuration file in <code>/etc/shiny-server/shiny-server.conf</code>. If none is found, it will use its default configuration. To begin customizing your server, copy the default configuration there then begin modifying. To copy the file, run the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/default.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>Then open <code>/etc/shiny-server/shiny-server.conf</code> in your preferred text editor and modify the line which says <code>listen 3838</code>. This is the line that instructs your server to listen to port 3838 -- change it to another port such as <code>12345</code> and save the file. You'll need to restart Shiny Server to make it aware of the new configuration file. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>You should now find that Shiny Server is no longer running on port 3838, but is on whichever new port you selected.</p>
<h3 id="let-users-manage-their-own-applications"><a href="#let-users-manage-their-own-applications"><span class="header-section-number">7.1.2</span> Let users manage their own applications</a></h3>
<p>Some administrators of Shiny Server would prefer to give users -- or some trusted subgroup of users -- the ability to manage and host their own Shiny applications. This allows users to work directly with their applications rather than requiring an administrator to deploy and update applications on their behalf. This guide will document how to create such an environment using the <code>user_apps</code> directive documented in the section named <a href="#host-per-user-application-directories">Host Per-User Application Directories</a>.</p>
<p>We provide a configuration file in <code>/opt/shiny-server/config/user-apps.config</code> that enables this functionality. To use this file as your active configuration, you'll need to copy it to <code>/etc/shiny-server/shiny-server.conf</code> using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/user-apps.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>This configuration enables all users on the system to host their own apps by creating a <code>ShinyApps</code> directory in their home directory; you can always alter this file later to tailor it to meet your needs. You can deploy an application under your username by copying one of the examples that comes with Shiny into your own <code>ShinyApps</code> directory. To do this, we'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into <code>~/ShinyApps</code> using the following command (using the directory that was returned in the previous command, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">mkdir</span> ~/ShinyApps
<span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello ~/ShinyApps/</code></pre>
<p>If that command succeeds, you've successfully installed a <code>user_apps</code> Shiny application! However, you'll need to restart Shiny Server to make it aware of the changes you made to the configuration file. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>By default, Shiny Server listens on port 3838, so your new application will be available at <code>http://myserver.com:3838/&lt;your_username&gt;/01_hello</code> where <code>myserver</code> is the hostname or IP address of the Shiny Server and <code>&lt;your_username&gt;</code> is your Linux username.</p>
<p>If you wanted to restrict the privilege of running Shiny applications to a particular set of users on your system, you can uncomment the <code>members_of</code> line in the configuration file. You can then specify the Linux group name of which a user must be a member before he or she would be allowed to host Shiny applications.</p>
<h3 id="run-shiny-server-on-multiple-ports"><a href="#run-shiny-server-on-multiple-ports"><span class="header-section-number">7.1.3</span> Run Shiny Server on multiple ports</a></h3>
<p>This guide will show how to run Shiny Server on multiple ports simultaneously and will also show how to run a single server with multiple locations.</p>
<p>We provide a configuration file in <code>/opt/shiny-server/config/multi-server.config</code> that enables this functionality. To use this file as your active configuration, you'll need to copy it to <code>/etc/shiny-server/shiny-server.conf</code> using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/multi-server.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>This configuration will run two servers: one on port 3838, and one on port 4949. As you can see in the configuration file, a variety of different <code>location</code>s are defined with different hosting models.</p>
<p>The server running on port 3838 defines two locations. The first for the URL <code>/users</code> which makes user applications available as documented in the section entitled <a href="#host-per-user-application-directories">Host Per-User Application Directories</a>. The second location is at the URL <code>/example1</code> and hosts a single application which should be stored in <code>/srv/shiny-server/01_hello/</code>.</p>
<p>You can copy this example application from the Shiny package to the relevant directories. To do this, we'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into the necessary locations using the following commands (using the directory that was returned in the previous command in both <code>cp</code> commands, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Copy to your home directory&#39;s &#39;ShinyApps&#39; folder</span>
<span class="kw">mkdir</span> ~/ShinyApps
<span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello ~/ShinyApps/

<span class="co"># Copy to /srv/shiny-server</span>
<span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello /srv/shiny-server/</code></pre>
<p>You'll need to restart Shiny Server to make it aware of the changes you made to the configuration file. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>You should now be able to access applications in a variety of ways:</p>
<ul>
<li>On the server running on port 3838, you should have a <code>user_apps</code> location at <code>/users</code> hosting your personal applications. You can access the one deployed earlier at a URL like <code>http://myserver.com:3838/users/&lt;your_username&gt;/01_hello</code> where <code>myserver</code> is the hostname or IP address of the Shiny Server and <code>&lt;your_username&gt;</code> is your Linux username.</li>
<li>Also on the server running on port 3838, you have a single application available at the <code>/example1</code> location. So the URL like <code>http://myserver.com:3838/example1</code> (where <code>myserver</code> is the hostname or IP address of the Shiny Server) should point you to the example you previously copied to <code>/srv/shiny-server/01_hello</code>.</li>
<li>Finally, the server on port 4949 will host any application defined in <code>/srv/shiny-server</code>. You can access the one we just copied at a URL like <code>http://myserver.com:4949/01_hello</code> (where <code>myserver</code> is the hostname or IP address of the Shiny Server) which, coincidentally, should point you to the same application you just loaded a moment ago.</li>
</ul>
<h3 id="require-user-authentication-on-an-application" class="pro"><a href="#require-user-authentication-on-an-application"><span class="header-section-number">7.1.4</span> Require user authentication on an application</a></h3>
<p>Shiny Server Pro comes with multiple different methods of authenticating users (as described in the chapter on <a href="#authentication-security">Authentication &amp; Security</a>). Out of the box, it's configured to use a <a href="#flat-file-authentication">Flat-File Authentication</a> database stored in <code>/etc/shiny-server/passwd</code>. This database is initially empty; to create a user named <code>admin</code>, execute the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/sspasswd /etc/shiny-server/passwd admin</code></pre>
<p>then enter the new password for the <code>admin</code> user when prompted. Once completed, you'll have a single user defined in your database named <code>admin</code>.</p>
<p>You should now be able to login to your administrative dashboard at a URL like <code>http://myserver.com:4151/</code> (after replacing <code>myserver.com</code> with your server's IP or hostname) using the username <code>admin</code> with the password you just created. See the chapter entitled <a href="#admin">Admin</a> for more details on how to take advantage of this interface.</p>
<p>After defining usernames and passwords in this password database, you can also restrict access to <code>server</code>s and <code>location</code>s using the <code>required_user</code> directive. We provide an example of such a configuration at <code>/opt/shiny-server/auth.config</code>. To use this file as your active configuration, you'll need to copy it to <code>/etc/shiny-server/shiny-server.conf</code> using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/auth.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>You'll need to restart Shiny Server to make it aware of the changes you made to the configuration file. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>If you haven't already, let's start by copying one of the example applications from the Shiny package to <code>/srv/shiny-server/</code>, which is the directory in which this configuration expects applications to be stored.</p>
<p>We'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into <code>/srv/shiny-server</code> using the following command (using the directory that was returned in the previous command, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello /srv/shiny-server/</code></pre>
<p>Because of the specifications provided in our current configuration file (in <code>/etc/shiny-server/shiny-server.conf</code>), the application we just copied requires authentication -- you must be logged in as the user named &quot;admin&quot; to access it. If you already visited the Administrative Dashboard on port 4151 mentioned earlier, then you may already be logged in. But you can test your configuration by either logging out or using another browser/computer to confirm that you're unable to access the application you just copied hosted at a URL like <code>http://myserver.com:3838/01_hello</code> without logging in, where <code>myserver</code> is the hostname or IP address of the Shiny Server. However, once you login as the user named &quot;admin&quot; using the password you defined above, you will be granted access to this application.</p>
<p>Note that, because the configuration in use is structured like so:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">listen</span> 3838<span class="kw">;</span>
  
  <span class="kw">location</span> / {

    <span class="kw">...</span>

    <span class="kw">location</span> /01_hello {
      <span class="kw">required_user</span> admin<span class="kw">;</span>
    }
  }
}</code></pre>
<p><em>only</em> the <code>01_hello</code> location requires authentication; all other applications are freely available. If you were to move the <code>required_user</code> directive to the parent location, however, all applications defined in that location would require being authenticated as the user named &quot;admin&quot;.</p>
<h3 id="host-a-secure-shiny-server" class="pro"><a href="#host-a-secure-shiny-server"><span class="header-section-number">7.1.5</span> Host a secure Shiny Server</a></h3>
<p>Shiny Server Professional is able to serve Shiny applications using SSL/TLS -- an encrypted channel between your server and your clients. A configuration exemplifying this setup is available in <code>/opt/shiny-server/ssl.config</code>. To use this file as your active configuration, you'll need to copy it to <code>/etc/shiny-server/shiny-server.conf</code> using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/ssl.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>This configuration expects your SSL key and certificate to be available in <code>/etc/shiny-server/server.key</code> and <code>/etc/shiny-server/server.cert</code>, respectively. If you have an existing SSL certificate stored elsewhere, you can update the configuration file at <code>/etc/shiny-server/shiny-server.conf</code> to point to the appropriate files. If you don't have an SSL certificate available, you can setup a &quot;self-signed&quot; certificate. This certificate will allow you to encrypt traffic between your clients and server but will not be &quot;trusted&quot; by most browsers. Thus, when a user visits a page secured via a self-signed certificate, the user will get a warning advising them not to proceed. Nonetheless, we can demonstrate how to create a self-signed certificate and integrate it into Shiny Server. The details of creating and signing SSL certificates is outside the scope of this guide, but the commands are given below for your convenience.</p>
<p>In order to create a certificate, you'll need to have the <code>openssl</code> library installed on your server. You can then create an SSL key using the following command.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> openssl genrsa -out /etc/shiny-server/server.key 1024</code></pre>
<p>You'll then generate a certificate signing request (CSR) using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> openssl req -new -key /etc/shiny-server/server.key \
  <span class="kw">-out</span> /etc/shiny-server/server.csr</code></pre>
<p>(Where a command includes a <code>\</code> you can either enter that literally as it appears in this document or you can omit it and enter the whole command on a single line.) This command will ask you a variety of information about your organization which you can provide or omit, if you just plan to sign this certificate yourself.</p>
<p>You can then sign that request yourself using this command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> openssl x509 -req -days 3650 \
  <span class="kw">-in</span> /etc/shiny-server/server.csr \
  <span class="kw">-signkey</span> /etc/shiny-server/server.key \
  <span class="kw">-out</span> /etc/shiny-server/server.cert</code></pre>
<p>At this point, you can restart the server to make it recognize its new configuration. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>It is a good idea to inspect the log file at this point to ensure that there were no problems using your SSL key and certificate. The server log file is stored in <code>/var/log/shiny-server.log</code>. You can preview the last 20 lines of this file using the following command.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> tail -n 20 /var/log/shiny-server.log</code></pre>
<p>You can ensure here that there were no errors in using your SSL configuration.</p>
<p>Finally, if you haven't already, you'll need to copy an example application into <code>/srv/shiny-server/</code> which is the directory this configuration expects your applications to be hosted in. Let's start by copying one of the example applications from the Shiny package to this directory.</p>
<p>We'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into <code>/srv/shiny-server</code> using the following command (using the directory that was returned in the previous command, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello /srv/shiny-server/</code></pre>
<p>Once you've copied this application in, you should be able to connect to your server from a browser by visiting a URL like <code>https://myserver.com:3939/01_hello</code> (after replacing <code>myserver.com</code> with your server's IP or hostname). Note that this guide uses the port 3939, unlike the other guides and that you <em>must</em> specify the <code>https://</code> protocol when visiting the page. If you signed the certificate yourself, your browser will likely prompt you about the untrusted certificate. If you instruct your browser to accept the certificate regardless, you'll be taken to your application which now is secured via SSL/TLS encryption.</p>
<h3 id="host-an-application-supported-by-multiple-r-processes" class="pro"><a href="#host-an-application-supported-by-multiple-r-processes"><span class="header-section-number">7.1.6</span> Host an Application Supported by Multiple R Processes</a></h3>
<p>You can configure Shiny Server Professional to run multiple Shiny processes for a single application. You could evenly balance incoming traffic across up to three processes (the default), or even create a separate Shiny process for each incoming user. The details for configuring this setup is discussed in the section on the <a href="#utilization-scheduler">Utilization Scheduler</a>. An example of such a configuration is available in <code>/opt/shiny-server/multi-proc.config</code>. To use this file as your active configuration, you'll need to copy it to <code>/etc/shiny-server/shiny-server.conf</code> using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/multi-proc.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>This configuration includes the following line to specify that a Utilization Scheduler should be used when serving Shiny applications.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">utilization_scheduler</span> 1 .7 5<span class="kw">;</span></code></pre>
<p>This configuration dictates that a Shiny process should only have one active Shiny session and that there should be at most 5 Shiny processes per application. This configuration would be appropriate for an application that were computationally intensive. In such an application, one session may tie up the Shiny process for minutes at a time while doing computation which would create an unpleasant experience for other users who try to connect during that window. In this way, we can ensure that each user gets his or her own designated Shiny process.</p>
<p>At this point, you can restart the server to make it recognize its new configuration. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>Finally, if you haven't already, you'll need to copy an example application into <code>/srv/shiny-server/</code> which is the directory this configuration expects your applications to be hosted in. Let's start by copying one of the example applications from the Shiny package to this directory.</p>
<p>We'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into <code>/srv/shiny-server</code> using the following command (using the directory that was returned in the previous command, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello /srv/shiny-server/</code></pre>
<p>Once you've copied this application in, you should be able to connect to your server from a browser by visiting a URL like <code>http://myserver.com:3838/01_hello</code> (after replacing <code>myserver.com</code> with your server's IP or hostname).</p>
<p>In order to inspect what processes are being created and how they're performing, it is useful to open Shiny Server's Admin Dashboard. Before you can login to the dashboard, you'll need to create a user who is allowed to access the Dashboard. Shiny Server Pro comes with multiple different methods of authenticating users (as described in the chapter on <a href="#authentication-security">Authentication &amp; Security</a>). Out of the box, it's configured to use a <a href="#flat-file-authentication">Flat-File Authentication</a> database stored in <code>/etc/shiny-server/passwd</code>. This database is initially empty; to create a user named <code>admin</code>, execute the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /opt/shiny-server/bin/sspasswd /etc/shiny-server/passwd admin</code></pre>
<p>then enter the new password for the <code>admin</code> user when prompted. Once completed, you'll have a single user defined in your database named <code>admin</code>.</p>
<p>You should now be able to login to your administrative dashboard at a URL like <code>http://myserver.com:4151/</code> (after replacing <code>myserver.com</code> with your server's IP or hostname) using the username <code>admin</code> with the password you just created. See the chapter entitled <a href="#admin">Admin</a> for more details on how to take advantage of this interface.</p>
<p>You will be able to monitor the processes that are being created in real-time using the Dashboard. You can also drill down into each process to verify that the connections are being assigned to their own private Shiny processes as we expected.</p>
<h2 id="configuration-settings"><a href="#configuration-settings"><span class="header-section-number">7.2</span> Configuration Settings</a></h2>
<p></p>
    <p>Listed below are all the directives that are supported in Shiny Server config files.</p>
    <p><strong>Applies to</strong> indicates the kind of parent scope that this directive normally appears inside.</p>
    <p><strong>Inheritable</strong> means that you can put this directive at a higher level in the hierarchy and it will be inherited by any children to which it might apply. Inherited directives can be overridden by using the directive again in a child scope.</p>
    <ul class="directives">
      
        <li>
          <h3 class="code"><a name="run_as"></a>run_as</h3>
          <p class="desc">The user the app should be run as. This user should have the minimal amount of privileges necessary to successfully run the application (i.e. read-only access to the Shiny application directory). Note that this directive cannot be used with <a class="code" href="#user_apps">user_apps</a>, as <code>user_apps</code> always run as the user who owns the application.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>user</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The username that should be used to run the app</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="access_log"></a>access_log</h3>
          <p class="desc">The file path of the HTTP access log.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The file path where the access log should be written</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>format</td>
                  <td>String</td>
                  <td>optional</td>
                  <td>The log file format; see the Connect documentation (http://www.senchalabs.org/connect/logger.html) under "Formats"</td>
                  <td>default</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="server"></a>server</h3>
          <p class="desc">Declares an HTTP server. You need one of these for each port/IP address combination this Shiny Server instance should listen on.</p>
          
            <p class="noparams">This directive has no parameters.</p>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#listen">listen</a></code>, <code><a href="#server_name">server_name</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="listen"></a>listen</h3>
          <p class="desc">Directs the enclosing server scope to listen on the specified port/IP address combination.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>port</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>Port to listen on</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>host</td>
                  <td>String</td>
                  <td>optional</td>
                  <td>IPv4 address to listen on (<code>*</code> or <code>0.0.0.0</code> for all); hostnames are not currently allowed, please use raw IPv4 address only</td>
                  <td>*</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#server">server</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="server_name"></a>server_name</h3>
          <p class="desc">Directs the enclosing server scope to only honor requests that have the given host headers (i.e. virtual hosts).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>names</td>
                  <td>String</td>
                  <td>multiple</td>
                  <td>The virtual hostname(s) to bind this server to</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#server">server</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="location"></a>location</h3>
          <p class="desc">Creates a scope that configures the given URL as a website (<a class="code" href="#site_dir">site_dir</a>), specific application (<a class="code" href="#app_dir">app_dir</a>), autouser root (<a class="code" href="#user_apps">user_apps</a>), or redirect to a different URL (<a class="code" href="#redirect">redirect</a>).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The request path that this location should match</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#run_as">run_as</a></code>, <code><a href="#location">location</a></code>, <code><a href="#site_dir">site_dir</a></code>, <code><a href="#directory_index">directory_index</a></code>, <code><a href="#user_apps">user_apps</a></code>, <code><a href="#app_dir">app_dir</a></code>, <code><a href="#redirect">redirect</a></code>, <code><a href="#log_dir">log_dir</a></code>, <code><a href="#members_of">members_of</a></code>, <code><a href="#application">application</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="site_dir"></a>site_dir</h3>
          <p class="desc">Configures the enclosing location scope to be a website that can contain both Shiny applications and unrelated static assets in a single directory tree.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>rootPath</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The path to the root directory of the website</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#application">application</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="directory_index"></a>directory_index</h3>
          <p class="desc">When enabled, if a directory is requested by the client and an <code>index.html</code> file is not present, a list of the directory contents is created automatically and returned to the client. If this directive is not present in a custom config file, the default behavior is to disable directory indexes. However, it is enabled if no config file is present at all (in other words, the default config file has it enabled).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>enabled</td>
                  <td>Boolean</td>
                  <td>required</td>
                  <td>Whether directory contents should automatically displayed</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="user_apps"></a>user_apps</h3>
          <p class="desc">Configures the enclosing location scope to be an autouser root, meaning that applications will be served up from users' ~/ShinyApps directories.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>enabled</td>
                  <td>Boolean</td>
                  <td>optional</td>
                  <td>Whether this location should serve up all users' ~/ShinyApps directories</td>
                  <td>true</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="app_dir"></a>app_dir</h3>
          <p class="desc">Configures the enclosing location scope to serve up the specified Shiny application.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The path to the Shiny application directory</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="redirect"></a>redirect</h3>
          <p class="desc">Configures the enclosing location to redirect all requests to the specified URL.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>url</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The URL (or base URL) to redirect to</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>statusCode</td>
                  <td>Integer</td>
                  <td>optional</td>
                  <td>The status code to send with the response (usually 301 for permanent redirects or 302 for temporary redirects)</td>
                  <td>302</td>
                </tr>
              
                <tr>
                  <td>exact</td>
                  <td>Boolean</td>
                  <td>optional</td>
                  <td>Whether to match on the URL exactly; if false, any subpaths will match as well</td>
                  <td>true</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="log_dir"></a>log_dir</h3>
          <p class="desc">Directs the application to write error logs to the specified directory. Only applies to location scopes that are configured with <a class="code" href="#app_dir">app_dir</a> or <a class="code" href="#site_dir">site_dir</a>, as <a class="code" href="#user_apps">user_apps</a> (autouser) always writes error logs to <code>~/ShinyApps/log</code>.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The path to which application log files should be written</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="members_of"></a>members_of</h3>
          <p class="desc">Restricts a <a class="code" href="#user_apps">user_apps</a> (autouser) scope to require membership in one or more groups (or, if no arguments are passed, lifts group restrictions from a <a class="code" href="#members_of">members_of</a> directive in a parent scope).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>groups</td>
                  <td>String</td>
                  <td>multiple</td>
                  <td>Users must be a member of at least one of these groups in order to deploy applications; if no groups are provided, then all users are allowed</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="required_group"></a>required_group</h3>
          <p class="desc">Restricts a location to require membership in one or more groups in order to access the application.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>groups</td>
                  <td>String</td>
                  <td>multiple</td>
                  <td>Users must be a member of at least one of these groups in order to access the application</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#admin">admin</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="required_user"></a>required_user</h3>
          <p class="desc">Restricts a location to only be available to the specified users.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>users</td>
                  <td>String</td>
                  <td>multiple</td>
                  <td>Users who are allowed to access the application</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#admin">admin</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="auth_passwd_file"></a>auth_passwd_file</h3>
          <p class="desc">Configures the server to use the specified file as the username/password store. The file should contain zero or more lines in the format <code>username + ":{scrypt}" + hashed-password</code>, where hashed-password is the scrypted password in base64 format. Use the <code>sspasswd</code> utility to create and modify passwd files.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The file path where the username/password file can be found</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="auth_duration"></a>auth_duration</h3>
          <p class="desc">Approximate time in minutes that a user should be kept logged in, from the time that they finish using their last application. The default value is 120.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>minutes</td>
                  <td>Float</td>
                  <td>required</td>
                  <td>The number of minutes; must be greater than or equal to 10 or applications may behave unpredictably</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="google_analytics_id"></a>google_analytics_id</h3>
          <p class="desc">Configure Google Analytics tracking code to be inserted in Shiny application pages.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>gaid</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The Google tracking ID, for example, UA-18988-1</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="app_init_timeout"></a>app_init_timeout</h3>
          <p class="desc">Defines the amount of time Shiny Server will wait for an R process to start before giving up.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>timeout</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The number of seconds to wait for the application to start.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="app_idle_timeout"></a>app_idle_timeout</h3>
          <p class="desc">Defines the amount of time an R process will persist with no connections before being terminated.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>timeout</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The number of seconds to keep an empty R process alive before killing it.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="app_session_timeout"></a>app_session_timeout</h3>
          <p class="desc">Defines how long an idle user's session should remain connected to the server.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>timeout</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The number of seconds after which an idle session will be disconnected. If 0, sessions will never be automatically disconnected.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="simple_scheduler"></a>simple_scheduler</h3>
          <p class="desc">A basic scheduler which will spawn one single-threaded R worker for each application. If no scheduler is specified, this is the default scheduler.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>maxRequests</td>
                  <td>Integer</td>
                  <td>optional</td>
                  <td>The maximum number of requests to assign to this scheduler before it should start returning rejecting incoming traffic using a '503 - Service Unavailable' message. Once this threshold is hit, users attempting to initialize a new session will receive 503 errors.</td>
                  <td>100</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="utilization_scheduler"></a>utilization_scheduler</h3>
          <p class="desc">A multi-process scheduler which will load-balance incoming traffic to multiple R processes. Each incoming request will be routed to the running worker with the fewest open connections, unless the request is explicitly targetting a particular worker.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>maxRequestsPerProc</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The maximum number of simultaneous requests (web socket or HTTP) per R process.</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>loadFactor</td>
                  <td>Float</td>
                  <td>required</td>
                  <td>A decimal value in (0, 1] defining the capacity at which a new R process should be pre-emptively spawned.</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>maxProc</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The maximum number of concurrent R processes to run for this application.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="ssl"></a>ssl</h3>
          <p class="desc">The absolute paths to the files to use as the SSL key and certificate for this server.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>key_path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The absolute path to the SSL key for this server.</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>cert_path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The absolute path to the SSL certificate for this server.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#server">server</a></code>, <code><a href="#admin">admin</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="allow_app_override"></a>allow_app_override</h3>
          <p class="desc">If present, will allow users to override the global defaults for a scheduler by customizing the parameters associated with a scheduler or even the type of scheduler used.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>enabled</td>
                  <td>Boolean</td>
                  <td>optional</td>
                  <td>Whether or not this is enabled. Default is true.</td>
                  <td>true</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="admin"></a>admin</h3>
          <p class="desc">If present, will provide an administrative interface on the specified port allowing specified users to monitor deployed Shiny applications.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>port</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The port on which the admin interface will be made available.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#ssl">ssl</a></code>, <code><a href="#template_dir">template_dir</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="whitelist_headers"></a>whitelist_headers</h3>
          <p class="desc">Enumerates the HTTP headers that should be trusted and passed from the original HTTP request to the Shiny application.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>headers</td>
                  <td>String</td>
                  <td>multiple</td>
                  <td>The list of headers which should be trusted.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="auth_ldap"></a>auth_ldap</h3>
          <p class="desc">Define how the LDAP (or Active Directory) server will be accessed.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>url</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The URL for the LDAP server and the root DIT of the directory. The URL can either use the unsecured 'ldap://' protocol, or the SSL-secured 'ldaps://' protocol, followed by the hostname or IP address of the LDAP server. Optionally, a port number can be provided after the LDAP server's address prefixed by a colon. If no port number is provided, the default port numbers of 389 and 636 for 'ldap://' and 'ldaps://' (respectively) will be used. This should be followed by a forward slash and the root DIT of the directory to use for authentication. For example, one configuration could be 'ldaps://ldap.exapmle.org:1636/dc=example,dc=org'.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="auth_active_dir"></a>auth_active_dir</h3>
          <p class="desc">Define how the Active Directory server will be accessed. This provides the same functionality as <a class="code" href="#auth_ldap">auth_ldap</a>, but tailors the defaults to be appropriate for Active Directory.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>url</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The URL for the Active Directory (AD) server and the root DIT of the directory. The URL can either use the unsecured 'ldap://' protocol, or the SSL-secured 'ldaps://' protocol, followed by the hostname or IP address of the AD server. Optionally, a port number can be provided after the LDAP server's address prefixed by a colon. If no port number is provided, the default port numbers of 389 and 636 for 'ldap://' and 'ldaps://' (respectively) will be used. This should be followed by a forward slash and the root DIT of the directory to use for authentication. For example, one configuration could be 'ldaps://ad.example.org:1636/dc=example,dc=org'.</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>userSuffix</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The suffix (typically the domain name) to be appended to usernames when attempting to bind to the AD server. The default <a class="code" href="#user_bind_template">user_bind_template</a> will be set to '{{username}}@' followed by the userSuffix. This setting will be ignored if <code>user_bind_template</code> is explicitly set.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#ldap_timeout">ldap_timeout</a></code>, <code><a href="#user_bind_template">user_bind_template</a></code>, <code><a href="#trusted_ca">trusted_ca</a></code>, <code><a href="#check_ssl_ca">check_ssl_ca</a></code>, <code><a href="#user_filter">user_filter</a></code>, <code><a href="#user_search_base">user_search_base</a></code>, <code><a href="#group_search_base">group_search_base</a></code>, <code><a href="#group_filter">group_filter</a></code>, <code><a href="#group_name_attribute">group_name_attribute</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="ldap_timeout"></a>ldap_timeout</h3>
          <p class="desc">Define the timeout for the parent LDAP connection. This timeout will be used when trying to connect to the LDAP server, and also when trying to query the server once connected. If not provided, a default timeout of 10 seconds will be used.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>timeout</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The number of seconds to wait for an LDAP query or connections before labeling it a failure. If 0, will never timeout.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="user_bind_template"></a>user_bind_template</h3>
          <p class="desc">Define the template by which the username provided by the user should be converted to the username used to bind to the LDAP server. We currently only support storing all users in a single node of the directory.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>template</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The template used in defining the DN of users in the LDAP database when trying to bind. The following variables will be automatically substituted before attempting to bind to the LDAP server: {{username}} will be replaced by the username provided on the login page; {{root}} will be replaced by the root DIT (as provided in the parent <a class="code" href="#auth_ldap">auth_ldap</a> directive). If this setting is not provided, defaults will be used. For <a class="code" href="#auth_active_dir">auth_active_dir</a> systems, the the default is '{{username}}@example.org' (where 'example.org' is the domain inferred/provided in <code>auth_active_dir</code>). For other <code>auth_ldap</code> systems, the default will be 'uid={{username}},ou=People,{{root}}'.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="trusted_ca"></a>trusted_ca</h3>
          <p class="desc">By default, many commonly accepted Certificate Authorities (CAs) will be trusted when establishing secure ldap (ldaps://) connections. This parameter instructs Shiny Server to instead trust this CA certificate. Organizations that are using an internal CA to sign their SSL certificates or are using a self-signed SSL certificate on their LDAP server will need to provide the associated CA certificate in order for Shiny Server to trust the ldaps:// connection.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>certificate</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The path to the CA certificate to be trusted in PEM format.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="check_ssl_ca"></a>check_ssl_ca</h3>
          <p class="desc">Define whether or not to check the Certificat Authority (CA) of the SSL certificate returned from the LDAP server. This must be true if using a self-signed SSL certificate. If not provided, this is set to 'true'. This should only be set to false if you know that your LDAP server uses an untrusted SSL certificate.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>value</td>
                  <td>Boolean</td>
                  <td>required</td>
                  <td>If true, will check the certificate against the default list of trusted CAs (or the list provided in the <a class="code" href="#trusted_ca">trusted_ca</a> setting). If false, the returned SSL certificate will not be checked.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="user_filter"></a>user_filter</h3>
          <p class="desc">The filter to be used when querying the LDAP database to find the LDAP user object which contains the username. In Active Directory, the CN of the users are often not the username. In such instances, it is necessary to map the entered username to the user's DN. This will be done by querying in <a class="code" href="#user_search_base">user_search_base</a> for objects using this filter. If this field is left empty, it will be assumed that the name the user enters is the same as the associated LDAP user's CN, and can be used in the user's DN as instructed by <a class="code" href="#user_bind_template">user_bind_template</a>. The following variables are available: {{username}} will be replaced by the username provided on the login page; {{root}} will be replaced by the root DIT (as provided in the parent <a class="code" href="#auth_ldap">auth_ldap</a> directive); {{userBind}} will be replaced by the username after applying the <code>user_bind_template</code>. The default for this setting in <code>auth_ldap</code> is to leave this field empty; the default in <a class="code" href="#auth_active_dir">auth_active_dir</a> is 'userPrincipalName={{userBind}}'</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>filter</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The filter to use to find the LDAP user object referenced by the given username (as entered by the user on the login page).</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="user_search_base"></a>user_search_base</h3>
          <p class="desc">Set the subtree which will be the root of user searches. If this setting is omitted, the defaults of 'cn=Users' or 'ou=People' will be used for systems using <a class="code" href="#auth_active_dir">auth_active_dir</a> and <a class="code" href="#auth_ldap">auth_ldap</a>, respectively. The given string will be followed by a comma and the root DIT to form the base of the search for users. If empty, the unaltered root DIT will be used. This setting will only be used if <a class="code" href="#user_filter">user_filter</a> is set; otherwise, no queries for users will be executed.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>base</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The part of the tree which stores users.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="group_search_base"></a>group_search_base</h3>
          <p class="desc">Set the subtree which will be the root of group searches. If this setting is omitted, the defaults of 'cn=Users' or 'ou=Groups' will be used for systems using <a class="code" href="#auth_active_dir">auth_active_dir</a> and <a class="code" href="#auth_ldap">auth_ldap</a>, respectively. The given string will be followed by a comma and the root DIT to form the base of the search for groups. If empty, the unaltered root DIT will be used. </p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>base</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The part of the tree which stores groups.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="group_filter"></a>group_filter</h3>
          <p class="desc">The LDAP query to use in determining group membership. The query should return all groups of which the given user is a member. Three variables are available for this query: '{{username}}'' will be replaced with the username entered at the login screen; '{{userDN}}' will be replaced with the user's full DN (using the <a class="code" href="#user_bind_template">user_bind_template</a> to compute this); {{root}} will be replaced by the root DIT (as provided in the parent <a class="code" href="#auth_ldap">auth_ldap</a> directive). For <a class="code" href="#auth_active_dir">auth_active_dir</a>, the default is 'member:1.2.840.113556.1.4.1941:={{userDN}}'. For <code>auth_ldap</code>, the default is 'uniqueMember={{username}}'.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>filter</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The filter to use to determine group membership.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="group_name_attribute"></a>group_name_attribute</h3>
          <p class="desc">The attribute of a group which contains the group name.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>attribute</td>
                  <td>String</td>
                  <td>optional</td>
                  <td>The name of the attribute. Default is 'cn' for both <a class="code" href="#auth_active_dir">auth_active_dir</a> and <a class="code" href="#auth_ldap">auth_ldap</a></td>
                  <td>cn</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#auth_ldap">auth_ldap</a></code>, <code><a href="#auth_active_dir">auth_active_dir</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="application"></a>application</h3>
          <p class="desc">DEPRECATED. This setting is deprecated and no longer enforced in Shiny Server. It is not permitted in configuration files.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>empty</td>
                  <td>String</td>
                  <td>required</td>
                  <td></td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#required_group">required_group</a></code>, <code><a href="#required_user">required_user</a></code>, <code><a href="#google_analytics_id">google_analytics_id</a></code>, <code><a href="#app_init_timeout">app_init_timeout</a></code>, <code><a href="#app_idle_timeout">app_idle_timeout</a></code>, <code><a href="#app_session_timeout">app_session_timeout</a></code>, <code><a href="#simple_scheduler">simple_scheduler</a></code>, <code><a href="#utilization_scheduler">utilization_scheduler</a></code>, <code><a href="#whitelist_headers">whitelist_headers</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="template_dir"></a>template_dir</h3>
          <p class="desc">A directory containing custom templates to be used when generating pages in Shiny Server.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>dir</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The directory containing HTML templates.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#admin">admin</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
    </ul>
<h2 id="migrating-updating"><a href="#migrating-updating"><span class="header-section-number">7.3</span> Migrating &amp; Updating</a></h2>
<h3 id="upgrading-from-shiny-server-0.3.x"><a href="#upgrading-from-shiny-server-0.3.x"><span class="header-section-number">7.3.1</span> Upgrading from Shiny Server 0.3.x</a></h3>
<p>Shiny Server 0.4 and later include many major changes to the architecture of Shiny Server. There are a few things to be aware of when upgrading from Shiny Server 0.3.x.</p>
<p>First, Shiny Server is now distributed via <code>deb</code> and <code>rpm</code> installers, rather than using <code>npm</code>. Thus, you'll first want to uninstall the old version of Shiny Server which was installed from <code>npm</code>.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> npm uninstall -g shiny-server</code></pre>
<p>Shiny Server no longer requires node.js to be installed on the system either. If you have no other need for node.js, you can uninstall it at this time, as well.</p>
<p>Running the latest Shiny Server installer will replace the scripts at <code>/etc/init/shiny-server.conf</code> or <code>/etc/init.d/shiny-server</code>. If you have made any modifications to these startup scripts that you wish to keep, please save a copy of these files before running the installer.</p>
<p>The default directories for logging and Shiny application hosting have also moved in this release. The default logging directory used to be <code>/var/shiny-server/log</code>, it is now <code>/var/log/shiny-server</code>. The default hosting directory was previously <code>/var/shiny-server/www</code> and is now <code>/srv/shiny-server/</code>. If you have not explicitly overridden these directories in the <code>/etc/shiny-server/shiny-server.conf</code> file, the new location will be created and used in the latest Shiny Server.</p>
<p>Finally, Shiny Server 0.4 and later require the Shiny package to be at least version 0.7.0. You can check the system-wide version of Shiny you have installed using the following command on the command line.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> su - -c <span class="st">&quot;R -e </span><span class="dt">\&quot;</span><span class="st">packageVersion(&#39;shiny&#39;)</span><span class="dt">\&quot;</span><span class="st">&quot;</span></code></pre>
<p>(Running this command using the <code>sudo su - -c</code> preface will allow you to see the system-wide version of Shiny. Individual users could have installed more recent versions of Shiny in their own R libraries.) If the installed version of Shiny predates 0.7.0, you should follow the instructions in <a href="#install-shiny">Install Shiny</a> to update to the most recent version.</p>
<p>At this point, you can proceed with the <a href="#installation">Installation</a> instructions associated with your Operating System.</p>
<h3 id="upgrading-from-shiny-server-0.4.x"><a href="#upgrading-from-shiny-server-0.4.x"><span class="header-section-number">7.3.2</span> Upgrading from Shiny Server 0.4.x</a></h3>
<p>There are problems on some systems with updating from 0.4.x versions to a more recent version. Thus, any user updating from the 0.4.x line should uninstall the package before installing the new one. In all versions 0.5.x and later, updating can simply be done by installing the newer version over the old one without explicitly removing the old package.</p>
<h2 id="frequently-asked-questions"><a href="#frequently-asked-questions"><span class="header-section-number">7.4</span> Frequently Asked Questions</a></h2>
<h3 id="what-are-the-hardware-requirements-for-running-shiny-server"><a href="#what-are-the-hardware-requirements-for-running-shiny-server"><span class="header-section-number">7.4.1</span> What are the hardware requirements for running Shiny Server?</a></h3>
<p>The performance footprint of a Shiny application is almost entirely dependent upon the Shiny application code. There are two factors to consider when selecting the hardware platform for Shiny Server.</p>
<p><strong>RAM</strong></p>
<p>The memory requirements of a Shiny application depend heavily on the data loaded when running the application. Often users find that a Shiny R process requires a minimum of 50MB of RAM -- beyond this, the amount of memory consumed by an application is determined by the data loaded or generated by that application. The <a href="http://rstudio.github.io/shiny/tutorial/#scoping">Scoping Section</a> of the Shiny Tutorial describes in detail how to take advantage of Shiny's scoping rules to share data across multiple Shiny sessions. This enables application developers to load only one copy of data into memory but still share this data with multiple shiny sessions.</p>
<p><strong>CPU</strong></p>
<p>R is fundamentally a single-threaded application. Unless parallel packages and tools are specifically selected when designing a Shiny application, the average R process (and the associated Shiny application) will be run serially on a single processing core. Thus, the typical Shiny application may saturate the processing core to which it's assigned, but will be unable to leverage other cores on the server which may be idle at that time.</p>
<h3 id="does-shiny-server-work-on-amazon-elastic-compute-cloud-ec2"><a href="#does-shiny-server-work-on-amazon-elastic-compute-cloud-ec2"><span class="header-section-number">7.4.2</span> Does Shiny Server work on Amazon Elastic Compute Cloud (EC2)?</a></h3>
<p>Absolutely. Many customers deploy Shiny Server and Shiny Server Professional on the Amazon Web Services (AWS) framework.</p>
<h3 id="can-i-deploy-shiny-server-on-an-isolated-network"><a href="#can-i-deploy-shiny-server-on-an-isolated-network"><span class="header-section-number">7.4.3</span> Can I Deploy Shiny Server on an Isolated Network?</a></h3>
<p>Of course. Shiny Server does not require a connection to the Internet in order to work properly, so you are free to deploy it in whatever sort of network configuration you would like. Offline activation is also available for Shiny Server Professional customers.</p>
<h3 id="how-do-i-translate-my-application-settings-to-nested-locations"><a href="#how-do-i-translate-my-application-settings-to-nested-locations"><span class="header-section-number">7.4.4</span> How Do I Translate My 'application' Settings to Nested 'location's?</a></h3>
<p>Shiny Server 0.4.2 introduced a new model for managing applications at a more granular level by supporting nested <code>location</code> directives. Any existing <code>application</code> directives in your configuration file will need to be migrated to this nested location format in order to be supported by any version of Shiny Server after 0.4.2.</p>
<p><code>application</code> directives were addressed by their full path on disk. Nested <code>location</code>s, on the other hand, are indexed by their relative path within their parent location. For instance, the following exemplifies how you could redirect a particular application in the old model:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>
  
  <span class="co"># Define rules to apply to one application, stored at &#39;/srv/shiny-server/app1&#39;</span>
  <span class="kw">application</span> /srv/shiny-server/app1 {
    <span class="kw">redirect</span> <span class="st">&quot;http://rstudio.com&quot;</span> 302 true<span class="kw">;</span>
  }
}</code></pre>
<p>In the new &quot;nested locations&quot; model, the equivalent would be:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>

  <span class="co"># Define rules to apply to one application, stored at &#39;/srv/shiny-server/app1&#39;</span>
  <span class="kw">location</span> /app1 {
    <span class="kw">redirect</span> <span class="st">&quot;http://rstudio.com&quot;</span> 302 true<span class="kw">;</span>
  }
}</code></pre>
<p>This structure is much more powerful than simple <code>application</code> settings. The following configuration defines a parent location (<code>depts</code>) with some settings, then overrides those settings for a particular directory (<code>finance</code>) within that location.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">...</span>
  <span class="co"># Define the &#39;/depts&#39; location</span>
  <span class="kw">location</span> /depts {
    <span class="co"># Host a directory of applications</span>
    <span class="kw">site_dir</span> /srv/departmentApps<span class="kw">;</span>
    
    <span class="co"># Provide a default/global GAID</span>
    <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-12345-1&quot;</span><span class="kw">;</span>

    <span class="co"># Define the &#39;/finance&#39; location.</span>
    <span class="co"># Corresponds to the URL &#39;/depts/finance&#39;, and the filesystem path </span>
    <span class="co"># &#39;/srv/departmentApps/finance&#39; as defined by the parent location.</span>
    <span class="kw">location</span> /finance {
      <span class="co"># Provide a custom GAID for only this sub-location</span>
      <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-54321-9&quot;</span><span class="kw">;</span>

      <span class="kw">location</span> /fall2014/app1 {
        <span class="kw">redirect</span> <span class="st">&quot;http://rstudio.com&quot;</span> 302 true<span class="kw">;</span>
      }
    }
  }
<span class="kw">...</span></code></pre>
<p>In this case, all applications stored in the <code>depts/finance/</code> directory would have a different Google Analytics ID than the rest of the applications on this server. Additionally, the application at <code>depts/finance/fall2014/app1</code> would be redirected to <code>http://rstudio.com</code>.</p>
<!--
TODO:
// Cookbook for integrating Shiny Server into existing apps
//   iframe, etc.
//   nginx or non-web-socket proxies
// Isolated LAN deployments
-->


<h3 id="can-i-bulk-import-in-flat-file-authentication" class="pro"><a href="#can-i-bulk-import-in-flat-file-authentication"><span class="header-section-number">7.4.5</span> Can I Bulk-Import in Flat-File Authentication?</a></h3>
<p>Some users may have an existing table of usernames and passwords they wish to import into a flat-file authentication system using the <code>sspasswd</code> tool. The shell script below can be used as a model for scripting such a solution, but be aware of the security concern mentioned below.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co">#!/bin/bash</span>
 
<span class="ot">PWFILE=</span><span class="st">&quot;passwdfile&quot;</span>
<span class="ot">USERFILE=</span><span class="st">&quot;users.txt&quot;</span>
 
<span class="kw">if [</span> <span class="ot">!</span> <span class="ot">-f</span> <span class="st">&quot;</span><span class="ot">$PWFILE</span><span class="st">&quot;</span><span class="kw"> ]</span>; <span class="kw">then</span>
  <span class="kw">touch</span> <span class="ot">$PWFILE</span>
<span class="kw">fi</span>

<span class="kw">while</span> <span class="kw">read</span> <span class="ot">p</span>; <span class="kw">do</span>
  <span class="ot">parts=(</span> <span class="ot">$p</span> <span class="ot">)</span>
  <span class="kw">echo</span> <span class="st">&quot;Adding </span><span class="ot">${parts[0]}</span><span class="st">...&quot;</span>
  <span class="kw">echo</span> <span class="st">&quot;</span><span class="ot">${parts[1]}</span><span class="st">&quot;</span> <span class="kw">|</span> <span class="kw">/opt/shiny-server/bin/sspasswd</span> \
    <span class="ot">$PWFILE</span> <span class="st">&quot;</span><span class="ot">${parts[0]}</span><span class="st">&quot;</span>
<span class="kw">done</span> <span class="kw">&lt;</span> <span class="ot">$USERFILE</span>
<span class="kw">echo</span> <span class="st">&quot;Done.&quot;</span></code></pre>
<p>The script above will extract the usernames and passwords from the file specified in the <code>USERFILE</code> variable, and will use the file name provided in the <code>PWFILE</code> variable as the file in which the usernames and passwords should be stored. This script expects a user file which is stored in a tab-delimited format in which the username is in the first column, and the password is in the second.</p>
<p>Most secure password-generating tools recommend that the password be typed in an interactive console in which the text can be hidden, rather than passing it in via a command-line argument. There are (at least) two reasons for this:</p>
<ol type="1">
<li>Such commands (including the password, if it were provided as an argument to the command) are stored in the history file for your shell. Thus, a user with access to your shell history may be able to retrieve the password.</li>
<li>In a model like the one used above, the passwords won't be stored in your shell's history, but they will be available in the system's process table. The <code>echo</code> command above (and the password associated with it) will likely be accessible by any other user on the system while that command is executing.</li>
</ol>
<p>Be sure to fully understand the security implications of the above script before using it, especially if using it on an unsecured or multi-user server.</p>
</body>
</html>
