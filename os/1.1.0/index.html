<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>Shiny Server v1.1.0 Configuration Reference</title>
  <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600,700,400italic,600italic,700italic' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <style type="text/css">
  .pro:after { 
    content: " - Pro Only!";
    color: #B22;
  }
  ul li a code.pro:after {
    content:"" !important; /* Bug in Pandoc adds classes on only these headers in TOC. */
  }

  .pro-chunk, .pro-section{
    margin-top: 10px;
    margin-bottom: 10px;
    margin-left: 30px;
    padding-left: 15px;
    border-left: 3px solid #c77;  
  }

  .pro-tag {
    float: left; 
    position: relative;
    -moz-transform: rotate(270deg);  /* FF3.5+ */        
    -o-transform: rotate(270deg);  /* Opera 10.5 */   
    -webkit-transform: rotate(270deg);  /* Saf3.1+, Chrome */              
    filter:  progid:DXImageTransform.Microsoft.BasicImage(rotation=3);  /* IE6,IE7 */          
    -ms-filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3); /* IE8 */
    color: #c77;
  }

  .warn{
    color: red;
  }
  a {
    color: #26A;
    text-decoration: none;
  }
  label {
    font-weight: 600;
  }

  body {
    font-family: 'Source Sans Pro', sans-serif;
    color: #222;
    line-height: 1.4em;
  }

  #container {
    max-width: 800px;
    margin: 20px auto 80px auto;
  }

  code, .code {
    font-family: 'Source Sans Pro', sans-serif;
    font-weight: 600;
  }

  pre {
    font-size: 14px;
    border: 1px solid #CCC;
    background-color: #EEE;
    padding: 16px 20px;
  }
  pre code, pre .code {
    font-family: 'Courier New', monospace;
    font-weight: normal;
  }

  h1 {
    margin: 0;
  }
  h2 {
    font-size: 30px;
    margin: 60px 0 20px 0;
  }
  strong {
    font-weight: 600;
  }

  #toc {
    display: inline-block;
    width: auto;
    border: 1px solid #CCC;
    padding: 12px 48px 12px 18px;
    margin-top: 30px;
  }

  #toc h2 {
    font-size: 24px;
    font-weight: 600;
    margin: 4px 0 8px 0;
  }

  #toc ul {
    list-style: square outside;
    margin: 0;
  }

  #deploymodels h3 {
    margin-bottom: 0;
  }
  #deploymodels p {
    margin: 6px 0;
  }

  ul.directives {
    list-style: none;
    padding-left: 0;
  }
  ul.directives li {
    margin: 40px 0 0 0;
  }
  ul.directives h3 {
    color: black;
    font-weight: 600;
    font-size: 26px;
    margin-bottom: 4px;
  }
  ul.directives h3+p {
    margin-top: 0;
  }

  table {
    margin-top: 16px;
    border-spacing: 0;
    border-collapse: collapse;
    width: 100%;
  }
  table td, table th {
    font-size: 14px;
    padding: 3px 12px;
    border: 1px solid #CCC;
  }
  table th {
    font-weight: 600;
    text-align: left;
  }
  </style>
  <style type="text/css">code{white-space: pre;}</style>
  <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <style type="text/css">
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #0000ff; }
code > span.ch { color: #008080; }
code > span.st { color: #008080; }
code > span.co { color: #008000; }
code > span.ot { color: #ff4000; }
code > span.al { color: #ff0000; }
code > span.er { font-weight: bold; }
  </style>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-20375833-6', 'rstudio.github.io');
  ga('send', 'pageview');

</script>

</head>
<body>
<header>
<h1 class="title">Shiny Server Open Source v1.1.0 Administrator's Guide</h1>
</header>
<nav id="TOC">
<ul>
<li><a href="#getting-started"><span class="toc-section-number">1</span> Getting Started</a><ul>
<li><a href="#introduction"><span class="toc-section-number">1.1</span> Introduction</a></li>
<li><a href="#system-requirements"><span class="toc-section-number">1.2</span> System Requirements</a></li>
<li><a href="#installation"><span class="toc-section-number">1.3</span> Installation</a><ul>
<li><a href="#ubuntu-12.04"><span class="toc-section-number">1.3.1</span> Ubuntu (12.04+)</a></li>
<li><a href="#redhatcentos-5.4"><span class="toc-section-number">1.3.2</span> RedHat/CentOS (5.4+)</a></li>
<li><a href="#install-shiny"><span class="toc-section-number">1.3.3</span> Install Shiny</a></li>
<li><a href="#r-installation-location"><span class="toc-section-number">1.3.4</span> R Installation Location</a></li>
</ul></li>
<li><a href="#stopping-and-starting"><span class="toc-section-number">1.4</span> Stopping and Starting</a><ul>
<li><a href="#upstart"><span class="toc-section-number">1.4.1</span> Upstart</a></li>
<li><a href="#init.d"><span class="toc-section-number">1.4.2</span> init.d</a></li>
</ul></li>
</ul></li>
<li><a href="#server-management"><span class="toc-section-number">2</span> Server Management</a><ul>
<li><a href="#default-configuration"><span class="toc-section-number">2.1</span> Default Configuration</a></li>
<li><a href="#server-hierarchy"><span class="toc-section-number">2.2</span> Server Hierarchy</a><ul>
<li><a href="#server"><span class="toc-section-number">2.2.1</span> Server</a></li>
<li><a href="#location"><span class="toc-section-number">2.2.2</span> Location</a></li>
<li><a href="#application"><span class="toc-section-number">2.2.3</span> Application</a></li>
</ul></li>
<li><a href="#run_as"><span class="toc-section-number">2.3</span> <code>run_as</code></a><ul>
<li><a href="#home_user"><span class="toc-section-number">2.3.1</span> <code>:HOME_USER:</code></a></li>
<li><a href="#running-shiny-server-with-root-privileges"><span class="toc-section-number">2.3.2</span> Running Shiny Server with Root Privileges</a></li>
</ul></li>
<li><a href="#local-app-configurations"><span class="toc-section-number">2.4</span> Local App Configurations</a></li>
<li><a href="#hosting-model"><span class="toc-section-number">2.5</span> Hosting Model</a><ul>
<li><a href="#host-a-directory-of-applications"><span class="toc-section-number">2.5.1</span> Host a Directory of Applications</a></li>
<li><a href="#host-a-single-application"><span class="toc-section-number">2.5.2</span> Host a Single Application</a></li>
<li><a href="#host-per-user-application-directories"><span class="toc-section-number">2.5.3</span> Host Per-User Application Directories</a></li>
</ul></li>
<li><a href="#redirecting"><span class="toc-section-number">2.6</span> Redirecting</a></li>
<li><a href="#virtual-hosts"><span class="toc-section-number">2.7</span> Virtual Hosts</a></li>
<li><a href="#custom-templates"><span class="toc-section-number">2.8</span> Custom Templates</a></li>
<li><a href="#server-log"><span class="toc-section-number">2.9</span> Server Log</a><ul>
<li><a href="#access-logs"><span class="toc-section-number">2.9.1</span> Access Logs</a></li>
</ul></li>
<li><a href="#environment-variable-settings"><span class="toc-section-number">2.10</span> Environment Variable Settings</a><ul>
<li><a href="#shiny_log_level"><span class="toc-section-number">2.10.1</span> <code>SHINY_LOG_LEVEL</code></a></li>
<li><a href="#r"><span class="toc-section-number">2.10.2</span> <code>R</code></a></li>
</ul></li>
</ul></li>
<li><a href="#deploying-applications"><span class="toc-section-number">3</span> Deploying Applications</a><ul>
<li><a href="#schedulers-application-restarts"><span class="toc-section-number">3.1</span> Schedulers &amp; Application Restarts</a><ul>
<li><a href="#restarting-an-application"><span class="toc-section-number">3.1.1</span> Restarting an Application</a></li>
<li><a href="#simple-scheduler"><span class="toc-section-number">3.1.2</span> Simple Scheduler</a></li>
</ul></li>
<li><a href="#application-timeouts"><span class="toc-section-number">3.2</span> Application Timeouts</a></li>
<li><a href="#logging-and-analytics"><span class="toc-section-number">3.3</span> Logging and Analytics</a><ul>
<li><a href="#application-error-logs"><span class="toc-section-number">3.3.1</span> Application Error Logs</a></li>
<li><a href="#google-analytics"><span class="toc-section-number">3.3.2</span> Google Analytics</a></li>
</ul></li>
<li><a href="#reactivity-log"><span class="toc-section-number">3.4</span> Reactivity Log</a></li>
<li><a href="#specifying-protocols"><span class="toc-section-number">3.5</span> Specifying Protocols</a></li>
</ul></li>
<li><a href="#appendix"><span class="toc-section-number">4</span> Appendix</a><ul>
<li><a href="#quick-start"><span class="toc-section-number">4.1</span> Quick Start</a><ul>
<li><a href="#host-a-directory-of-applications-1"><span class="toc-section-number">4.1.1</span> Host a directory of applications</a></li>
<li><a href="#let-users-manage-their-own-applications"><span class="toc-section-number">4.1.2</span> Let users manage their own applications</a></li>
<li><a href="#run-shiny-server-on-multiple-ports"><span class="toc-section-number">4.1.3</span> Run Shiny Server on multiple ports</a></li>
</ul></li>
<li><a href="#configuration-settings"><span class="toc-section-number">4.2</span> Configuration Settings</a></li>
<li><a href="#migrating-updating"><span class="toc-section-number">4.3</span> Migrating &amp; Updating</a><ul>
<li><a href="#upgrading-from-shiny-server-0.3.x"><span class="toc-section-number">4.3.1</span> Upgrading from Shiny Server 0.3.x</a></li>
<li><a href="#upgrading-from-shiny-server-0.4.x"><span class="toc-section-number">4.3.2</span> Upgrading from Shiny Server 0.4.x</a></li>
</ul></li>
<li><a href="#frequently-asked-questions"><span class="toc-section-number">4.4</span> Frequently Asked Questions</a><ul>
<li><a href="#what-are-the-hardware-requirements-for-running-shiny-server"><span class="toc-section-number">4.4.1</span> What are the hardware requirements for running Shiny Server?</a></li>
<li><a href="#does-shiny-server-work-on-amazon-elastic-compute-cloud-ec2"><span class="toc-section-number">4.4.2</span> Does Shiny Server work on Amazon Elastic Compute Cloud (EC2)?</a></li>
<li><a href="#can-i-deploy-shiny-server-on-an-isolated-network"><span class="toc-section-number">4.4.3</span> Can I Deploy Shiny Server on an Isolated Network?</a></li>
<li><a href="#how-do-i-translate-my-application-settings-to-nested-locations"><span class="toc-section-number">4.4.4</span> How Do I Translate My 'application' Settings to Nested 'location's?</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 id="getting-started"><a href="#getting-started"><span class="header-section-number">1</span> Getting Started</a></h1>
<h2 id="introduction"><a href="#introduction"><span class="header-section-number">1.1</span> Introduction</a></h2>
<p>Shiny Server enables users to host and manage Shiny applications on the Internet. Shiny is an R package which uses a reactive programming model to simplify the development of R-powered web applications. Shiny Server can manage R processes running various Shiny applications over different URLs and ports. Using Shiny Server offers a variety of benefits over simply running Shiny in R directly. These features allow the administrator to:</p>
<ul>
<li>Host multiple applications simultaneously, each at its own URL.</li>
<li>Support web browsers which don't support WebSocket, including Internet Explorer 8 &amp; 9.</li>
<li>Enable system users to develop and manage their own Shiny applications.</li>
<li>Automatically have R processes that crash or are terminated restart for the next user requesting the application.</li>
</ul>
<h2 id="system-requirements"><a href="#system-requirements"><span class="header-section-number">1.2</span> System Requirements</a></h2>
<p>Shiny Server is currently only supported on the Linux operating system. We officially support the following distributions:</p>
<ul>
<li>RedHat Enterprise Linux (and CentOS) 5.4+</li>
<li>RedHat Enterprise Linux (and CentOS) 6.0+</li>
<li>Ubuntu 12.04</li>
<li>Ubuntu 13.04</li>
</ul>
<p>We currently only support the x86-64 architecture. As described in the <a href="#installation">Installation</a> section, you will install R and the Shiny package prior to installing Shiny Server. Root privileges will be required both in the installation process and also at runtime.</p>
<h2 id="installation"><a href="#installation"><span class="header-section-number">1.3</span> Installation</a></h2>
<p>The Shiny Server installer does not come with R, nor does it provide the Shiny R package. Below are the steps for installing each of them separately.</p>
<p>If you had previously installed Shiny Server 0.3.x or 0.4.x, please see the relevant section before proceeding to ensure a seamless upgrade:</p>
<ul>
<li><a href="#upgrading-from-shiny-server-0.3.x">Upgrading from Shiny Server 0.3.x</a></li>
<li><a href="#upgrading-from-shiny-server-0.4.x">Upgrading from Shiny Server 0.4.x</a></li>
</ul>
<h3 id="ubuntu-12.04"><a href="#ubuntu-12.04"><span class="header-section-number">1.3.1</span> Ubuntu (12.04+)</a></h3>
<p><strong>Installing R</strong></p>
<p>Shiny Server recommends an installation of R version 3.0 or higher. To install the latest version of R you should first add the CRAN repository to your system as described here:</p>
<ul>
<li>Debian: <a href="http://cran.rstudio.com/bin/linux/debian/README.html">http://cran.rstudio.com/bin/linux/debian/README.html</a></li>
<li>Ubuntu: <a href="http://cran.rstudio.com/bin/linux/ubuntu/README.html">http://cran.rstudio.com/bin/linux/ubuntu/README.html</a></li>
</ul>
<p>You can then install R using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> apt-get install r-base</code></pre>
<p>NOTE: if you do not add the CRAN Debian or Ubuntu repository as described above this command will install the version of R corresponding to your current system version. Since this version of R may be a year or two old it is strongly recommended that you add the CRAN repositories so you can run the most up to date version of R.</p>
<p>At this point, follow the instructions in <a href="#install-shiny">Install Shiny</a> to setup the necessary packages in R.</p>
<p>Once Shiny is installed, you can begin the installation of Shiny Server. You should have been provided with a <code>.deb</code> installer for Shiny Server. If you only have a link to this file, you can use <code>wget</code> to download the file to the current directory. You will need to first install the <code>gdebi-core</code> package to install Shiny Server and its dependencies. Once the <code>.deb</code> file is available locally, run the following commands to complete the installation of Shiny Server.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> apt-get install gdebi-core
<span class="kw">sudo</span> gdebi shiny-server-1.0.0.deb</code></pre>
<p>This will install Shiny Server into <code>/opt/shiny-server/</code>, with the main executable in <code>/opt/shiny-server/bin/shiny-server</code> and also create a new <code>shiny</code> user. The rest of this guide will document the intricacies of how you can configure and manage Shiny Server. If you're just looking to get up and running quickly, we recommend you look at the <a href="#quick-start">Quick Start</a> section in the appendix which will walk you through the process of installing and configuring a Shiny application.</p>
<h3 id="redhatcentos-5.4"><a href="#redhatcentos-5.4"><span class="header-section-number">1.3.2</span> RedHat/CentOS (5.4+)</a></h3>
<p><strong>Prerequisites</strong></p>
<p>Shiny Server recommends an installation of R version 3.0 or higher. Shiny Server has several dependencies on packages (including R itself) found in the Extra Packages for Enterprise Linux (EPEL) repository. If you don't already have this repository available you should add it to your system using the instructions found here: <a href="https://fedoraproject.org/wiki/EPEL">https://fedoraproject.org/wiki/EPEL</a></p>
<p>After enabling EPEL you should then ensure that you have installed the version of R available from EPEL. You can do this using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> yum install R  </code></pre>
<p>At this point, follow the instructions in <a href="#install-shiny">Install Shiny</a> to setup the necessary packages in R.</p>
<p>Once Shiny has been installed, you can begin the installation of Shiny Server. You should have been provided with an RPM file which contains Shiny Server and all of its dependencies (other than R and Shiny). You can install this rpm file using <code>yum</code>. If you have only a link to the RPM file, you can use <code>wget</code> to download the file to the current directory. You can install this RPM file using <code>yum</code>.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> yum install --nogpgcheck shiny-server-1.0.0.rpm</code></pre>
<p>This will install Shiny Server into <code>/opt/shiny-server/</code>, with the main executable in <code>/opt/shiny-server/bin/shiny-server</code> and also create a new <code>shiny</code> user. The rest of this guide will document the intricacies of how you can configure and manage Shiny Server. If you're just looking to get up and running quickly, we recommend you look at the <a href="#quick-start">Quick Start</a> section in the appendix which will walk you through the process of installing and configuring a Shiny application.</p>
<h3 id="install-shiny"><a href="#install-shiny"><span class="header-section-number">1.3.3</span> Install Shiny</a></h3>
<p>Before Shiny Server can be installed, the Shiny package must be installed in the system library; you typically need <code>sudo</code> privileges to install to this library. Shiny Server currently requires Shiny version 0.7.0 or later. The following command will download and install the <code>shiny</code> package from CRAN in the system library.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> su - \
  <span class="kw">-c</span> <span class="st">&quot;R -e </span><span class="dt">\&quot;</span><span class="st">install.packages(&#39;shiny&#39;, repos=&#39;http://cran.rstudio.com/&#39;)</span><span class="dt">\&quot;</span><span class="st">&quot;</span></code></pre>
<p>Once this command completes, you can continue with the installation of Shiny Server.</p>
<h3 id="r-installation-location"><a href="#r-installation-location"><span class="header-section-number">1.3.4</span> R Installation Location</a></h3>
<p>Shiny Server expects that R is available as an executable named <code>R</code> and is in the <code>PATH</code> of the user which you run <code>shiny-server</code> as. Note that on some CentOS systems, the <code>PATH</code> will be overridden by the startup script to <code>/sbin:/usr/sbin:/bin:/usr/bin</code>. On such systems, if <code>R</code> is not available in one of these locations (regardless of the user's <code>PATH</code>), you'll need to adjust the startup script.</p>
<p>To allow Shiny Server to search for <code>R</code> in additional locations, you'll alter the file in <code>/etc/init.d/shiny-server</code> or <code>/etc/init/shiny-server.conf</code> depending on which startup system you're using (as discussed in <a href="#stopping-and-starting">Stopping and Starting</a>. You can either adjust the <code>PATH</code> variable to include the directory where <code>R</code> will be found, or you can set an environment variable named <code>R</code> to tell Shiny Server exactly where it should look for the executable.</p>
<p>If you choose to adjust the <code>PATH</code>, you can add the directory in which the executable named <code>R</code> is found to the line that defines the <code>PATH</code> environment variable (<code>PATH=/sbin:/usr/sbin:/bin:/usr/bin</code>).</p>
<p>If instead you choose to tell Shiny Server the exact executable to run (which is necessary if the executable is not named <code>R</code> on your system), you'll need to define a new environment variable named <code>R</code>. You can do this by adding a line that looks something like <code>env R=/usr/local/bin/R-3-0-1</code> for Upstart, or <code>export R=/usr/local/bin/R-3-0-1</code> for init.d.</p>
<h2 id="stopping-and-starting"><a href="#stopping-and-starting"><span class="header-section-number">1.4</span> Stopping and Starting</a></h2>
<p>The installer will automatically deploy the necessary scripts to ensure that Shiny Server is started automatically on boot. When possible, we use the Upstart system to manage the <code>shiny-server</code> service. If Upstart is not available, we will deploy an <code>init.d</code> script to automatically start and stop the service.</p>
<h3 id="upstart"><a href="#upstart"><span class="header-section-number">1.4.1</span> Upstart</a></h3>
<p>Upstart is a system used to automatically start, stop and manage services. The installer will automatically deploy an Upstart script to <code>/etc/init/shiny-server.conf</code>. This script will initialize <code>shiny-server</code> as soon as the network is activated on the machine and stop when the machine is being shut down.</p>
<p>The Upstart script will also ensure that <code>shiny-server</code> is respawned if the process is terminated unexpectedly. However, in the event that there is an issue which will consistently prevent Shiny Server from being able to start (such as a bad configuration file), Upstart will give up on restarting the service after approximately 5 failed attempts within a few seconds. For this reason, you may see multiple repetitions of a bad Shiny Server startup attempt before it transitions to the <code>stopped</code> state.</p>
<p>To start or stop the server, run the following commands, respectively.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> start shiny-server</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> stop shiny-server</code></pre>
<p>To restart the server you can run:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> restart shiny-server</code></pre>
<p>This command will shutdown all running Shiny processes, disconnecting all open connections and will re-initialize the server. Note that <code>restart</code> <em>will not</em> reread the Upstart definition at <code>/etc/init/shiny-server.conf</code>. So if you have changed, for instance, some environment variables in that file. You will need to <code>stop</code> and <code>start</code> to have those changes take effect.</p>
<p>If you wish to keep the server and all Shiny processes running without interruption, but reload the configuration, you can use the <code>reload</code> command as in:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> reload shiny-server</code></pre>
<p>This will cause the server to re-initialize but will not interrupt the current processes or any of the open connections to the server.</p>
<p><strong>Known Bug:</strong> Due to a bug in the version of Upstart which comes with Ubuntu 13.04, <code>reload</code> will not behave as expected on that platform and should not be used.</p>
<p>To check the status or retrieve the Process ID associated with <code>shiny-server</code>, run the following:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">status</span> shiny-server</code></pre>
<h3 id="init.d"><a href="#init.d"><span class="header-section-number">1.4.2</span> init.d</a></h3>
<p>On some older Operating Systems (such as RedHat 5) the Upstart system may not be available. These systems will require the use of a script in <code>/etc/init.d/</code> to start and manage the <code>shiny-server</code> daemon. This script does not have the capability to automatically restart the <code>shiny-server</code> daemon if it terminates unexpectedly. The installer uses <code>chkconfig</code> to ensure that <code>shiny-server</code> will start automatically on boot.</p>
<p>To start or stop the server, use the following commands, respectively:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server start</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server stop</code></pre>
<p>To restart the server, you can run:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>If you wish to keep the server and all Shiny processes running without interruption, but reload the configuration, you can use <code>reload</code>:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> /sbin/service shiny-server reload</code></pre>
<p>This will cause the server to re-read the configuration file but will not interrupt the current processes and outstanding connections to the server.</p>
<p>To check the status or retrieve the Process ID associated with <code>shiny-server</code>, run the following:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">/sbin/service</span> shiny-server status</code></pre>
<h1 id="server-management"><a href="#server-management"><span class="header-section-number">2</span> Server Management</a></h1>
<h2 id="default-configuration"><a href="#default-configuration"><span class="header-section-number">2.1</span> Default Configuration</a></h2>
<p>Initially, Shiny Server uses the following configuration file. Some users will find that this configuration meets their needs; others may find it useful to create a custom configuration. Details about each available setting and parameter are available in the <a href="#appendix">Appendix</a>. As a brief introduction, however, the following configuration file (available at <code>/opt/shiny-server/config/default.config</code>) is the default used if no other configuration file is provided:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define the user we should use when spawning R Shiny processes</span>
<span class="kw">run_as</span> shiny<span class="kw">;</span>

<span class="co"># Define a top-level server which will listen on a port</span>
<span class="kw">server</span> {
  <span class="co"># Instruct this server to listen on port 3838</span>
  <span class="kw">listen</span> 3838<span class="kw">;</span>

  <span class="co"># Define the location available at the base URL</span>
  <span class="kw">location</span> / {
    <span class="co">#### PRO ONLY ####</span>
    <span class="co"># Only up tp 20 connections per Shiny process and at most 3 Shiny processes</span>
    <span class="co"># per application. Proactively spawn a new process when our processes reach </span>
    <span class="co"># 90% capacity.</span>
    <span class="kw">utilization_scheduler</span> 20 .9 3<span class="kw">;</span>
    <span class="co">#### END PRO ONLY ####</span>

    <span class="co"># Run this location in &#39;site_dir&#39; mode, which hosts the entire directory</span>
    <span class="co"># tree at &#39;/srv/shiny-server&#39;</span>
    <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>
    
    <span class="co"># Define where we should put the log files for this location</span>
    <span class="kw">log_dir</span> /var/log/shiny-server<span class="kw">;</span>
    
    <span class="co"># Should we list the contents of a (non-Shiny-App) directory when the user </span>
    <span class="co"># visits the corresponding URL?</span>
    <span class="kw">directory_index</span> on<span class="kw">;</span>
  }
}</code></pre>
<p>Lines beginning with a <code>#</code> are treated as comments and not parsed when configuring the server. Shiny Server can be configured to host multiple <code>server</code>s on different ports or hostnames. Each <code>server</code> can have <code>location</code>s which are capable of serving Shiny Applications and potentially static assets, as well. Individual applications can also override the settings applied to their parent <code>location</code>. These concepts are explained in further detail in the <a href="#server-hierarchy">Server Hierarchy</a> section. The default configuration above will create a single server listening on port 3838, serving any application contained within <code>/srv/shiny-server/</code> at the root URL (<code>/</code>). Each possible setting in the configuration file is explained in the <a href="#appendix">Appendix</a>.</p>
<p>Most users will want to customize the configuration to meet their needs. The server will attempt to load its configuration from a file stored at <code>/etc/shiny-server/shiny-server.conf</code>; it is in this location that you should place your custom Shiny Server configuration. If this file is not found, the default will be used.</p>
<h2 id="server-hierarchy"><a href="#server-hierarchy"><span class="header-section-number">2.2</span> Server Hierarchy</a></h2>
<p>Detailed descriptions of all available parameters are available in the appendix, but it is important to understand the overall hierarchy of the Shiny Server configuration file when editing the file.</p>
<h3 id="server"><a href="#server"><span class="header-section-number">2.2.1</span> Server</a></h3>
<p>The server setting defines an HTTP server which will listen on a port/IP address combination. For example, the following lines:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">listen</span> 80<span class="kw">;</span>
}</code></pre>
<p>define a server that would listen on port 80. A server can also define a <code>server_name</code> to limit the virtual hostnames on which it listens, as described in the <a href="#virtual-hosts">Virtual Hosts</a> section.</p>
<h3 id="location"><a href="#location"><span class="header-section-number">2.2.2</span> Location</a></h3>
<p>The <code>location</code> setting is defined within a <code>server</code> and defines how a particular URL path should be served. For instance, the following settings:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">...</span>
  <span class="co"># Define the location &#39;/specialApp&#39;</span>
  <span class="kw">location</span> /specialApp {
    <span class="co"># Run this location in &#39;app_dir&#39; mode, which will host a single Shiny</span>
    <span class="co"># Application available at &#39;/srv/shiny-server/myApp&#39;</span>
    <span class="kw">app_dir</span> /srv/shiny-server/myApp
  }
  
  <span class="co"># Define the location &#39;/otherApps&#39;</span>
  <span class="kw">location</span> /otherApps {
    <span class="co"># Run this location in &#39;site_dir&#39; mode, which hosts the entire directory</span>
    <span class="co"># tree at &#39;/srv/shiny-server/apps&#39;</span>
    <span class="kw">site_dir</span> /srv/shiny-server/apps<span class="kw">;</span>
  }
<span class="kw">...</span>
}</code></pre>
<p>would define two locations, one which serves (potentially) a multitude of applications at the URL <code>/otherApps/</code>, and another which serves a single application at the URL <code>/specialApp/</code>. The various hosting models which can be applied to a location are described in the section on <a href="#hosting-model">Hosting Model</a>s.</p>
<p><code>location</code> directives can also be nested to provide more granular settings for a particular sub-<code>location</code>. For instance, if you used Google Analytics but the Finance department wanted to use its own Google Analytics ID for their <code>finance</code> directory, you could accomplish that with a configuration like:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">...</span>
  <span class="co"># Define the &#39;/depts&#39; location</span>
  <span class="kw">location</span> /depts {
    <span class="co"># Host a directory of applications</span>
    <span class="kw">site_dir</span> /srv/departmentApps<span class="kw">;</span>
    
    <span class="co"># Provide a default/global GAID</span>
    <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-12345-1&quot;</span><span class="kw">;</span>

    <span class="co"># Define the &#39;/finance&#39; location.</span>
    <span class="co"># Corresponds to the URL &#39;/depts/finance&#39;, and the filesystem path </span>
    <span class="co"># &#39;/srv/departmentApps/finance&#39; as defined by the parent location.</span>
    <span class="kw">location</span> /finance {
      <span class="co"># Provide a custom GAID for only this sub-location</span>
      <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-54321-9&quot;</span><span class="kw">;</span>
    }
  }
<span class="kw">...</span></code></pre>
<p>Note that the nested <code>location</code>'s path is relative to the parent <code>location</code>'s. Any directive that can be used for a <code>location</code> can be used in a nested <code>location</code> and will override the value specified in the parent, if any. If not overridden, the settings will be inherited by sub-<code>location</code>s from their parent <code>location</code>s.</p>
<h3 id="application"><a href="#application"><span class="header-section-number">2.2.3</span> Application</a></h3>
<blockquote>
<p> The <code>application</code> setting has been deprecated and removed from Shiny Server as of version 0.4.2.</p>
</blockquote>
<p>See <a href="#how-do-i-translate-my-application-settings-to-nested-locations">How Do I Translate My 'application' Settings to Nested 'location's?</a> for help migrating.</p>
<h2 id="run_as"><a href="#run_as"><span class="header-section-number">2.3</span> <code>run_as</code></a></h2>
<p>Understanding which user will execute the R Shiny processes is important for a variety of reasons. For one, the paths in which R will look for packages (<code>.libPaths()</code>) are often user-dependent. In order to ensure that the libraries required to run a Shiny application are installed, you must first understand which user will be running the application. Additionally, directories will likely have restrictions regarding which users are able to read or write in them. The server should be configured in such a way that the user running the Shiny applications has the minimal privileges to do the work required by those applications.</p>
<p><code>location</code>s configured with <code>user_apps</code> will be executed as the user in whose home directory the application was found. For locations configured with <code>site_dir</code> and <code>app_dir</code>, the <code>run_as</code> setting will be used to determine which user should spawn the R Shiny processes. This setting can be configured globally, or for a particular <code>server</code> or <code>location</code>. For example, the following configuration:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">run_as</span> tim<span class="kw">;</span>
}</code></pre>
<p>would execute all applications contained within this scope as the user <code>tim</code> with all of <code>tim</code>'s relevant <code>.libPath</code>s.</p>
<p>Additionally, R processes are spawned using the Bash login shell. This means that prior to the execution of the R session the Bash shell will read and execute commands from this file if it exists:</p>
<pre><code>/etc/profile</code></pre>
<p>After reading that file, it looks for the following files and reads and executes commands from the first one that exists and is readable (it’s important to note that only one of these files will be read and executed):</p>
<pre><code>~/.bash_profile
~/.bash_login
~/.profile</code></pre>
<p>So in the above configuration example, any environment variables defined in <code>/etc/profile</code> or <code>/home/tim/.bash_profile</code> (assuming <code>tim</code>'s home directory was in the standard location) would be available to the R process, since Shiny Server is configured to run applications as the user named <code>tim</code>.</p>
<h3 id="home_user"><a href="#home_user"><span class="header-section-number">2.3.1</span> <code>:HOME_USER:</code></a></h3>
<p><code>:HOME_USER:</code> is a special instance of a <code>run_as</code> user. When combined with the <code>user_dirs</code> hosting model (described in the section entitled <a href="#host-per-user-application-directories">Host Per-User Application Directories</a>), this setting will instruct Shiny Server to run the process as the user in whose home directory the application exists. For instance, an application stored in <code>/home/jim/ShinyApps/app1</code> would run as <code>jim</code>, whereas an app stored in <code>/home/kelly/ShinyApps/app1</code> would run as <code>kelly</code>.</p>
<p>Because this username is &quot;special&quot;, it may make sense to provide an additional username as a &quot;fallback&quot; user. For instance, in the following configuration:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">run_as</span> :HOME_USER: shiny<span class="kw">;</span>

<span class="kw">...</span>

<span class="kw">location</span> /users {
  <span class="kw">user_dirs;</span>
}

<span class="kw">location</span> /apps {
  <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>
  <span class="kw">log_dir</span> /var/log/shiny-server<span class="kw">;</span>
  <span class="kw">directory_index</span> on<span class="kw">;</span>
}</code></pre>
<p>all of the <code>user_dirs</code> applications hosted in <code>/users</code> would run as <code>:HOME_USER:</code> (the user in whose home directory the application exists), since that's the highest-priority <code>run_as</code> user. Because <code>:HOME_USER:</code> is only meaningful to the <code>user_dirs</code> hosting model, and not to <code>site_dir</code>, the applications hosted in <code>/apps</code> will not run as <code>:HOME_USER:</code> but as whichever user comes next in the list -- in this case, as <code>shiny</code>.</p>
<p>Of course, you could also accomplish this same effect with the following arrangement:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> /users {
  <span class="kw">run_as</span> :HOME_USER:<span class="kw">;</span>
  <span class="kw">user_dirs;</span>
}

<span class="kw">location</span> /apps {
  <span class="kw">run_as</span> shiny<span class="kw">;</span>
  <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>
  <span class="kw">log_dir</span> /var/log/shiny-server<span class="kw">;</span>
  <span class="kw">directory_index</span> on<span class="kw">;</span>
}</code></pre>
<p>As described in <a href="#host-per-user-application-directories">Host Per-User Application Directories</a>, <code>user_apps</code> and <code>user_dirs</code> differ only in how they behave with respect to the <code>run_as</code> setting. <code>user_apps</code> will <em>always</em> host the apps as if <code>run_as</code> were set to <code>:HOME_USER:</code>, regardless of how <code>run_as</code> is actually set. <code>user_dirs</code>, on the other hand, will respect the <code>run_as</code> configuration.</p>
<h3 id="running-shiny-server-with-root-privileges"><a href="#running-shiny-server-with-root-privileges"><span class="header-section-number">2.3.2</span> Running Shiny Server with Root Privileges</a></h3>
<p>Aside from spawning R Shiny processes as particular users, the <code>shiny-server</code> process itself can be configured to run as different users to control its privileges. There are multiple scenarios in which Shiny Server would need to be run as root:</p>
<ol type="1">
<li>If <code>user_apps</code> or <code>user_dirs</code> is enabled for any location. In order to host applications as various users, Shiny Server must have root privileges.</li>
<li>If your configuration uses <code>run_as</code> to spawn applications as multiple different users.</li>
<li>If you're running any server on a privileged port (a port in the range of 1-1024).</li>
<li>If you're using <code>auth_pam</code> to leverage PAM authentication. (Pro only)</li>
</ol>
<p>By default, the <code>shiny-server</code> process will be started as the <code>root</code> user, then will spawn R processes according to the corresponding <code>run_as</code> setting. You can, however, run the <code>shiny-server</code> process as a non-privileged user such as the <code>shiny</code> user if none of the limitations above are violated.</p>
<h2 id="local-app-configurations"><a href="#local-app-configurations"><span class="header-section-number">2.4</span> Local App Configurations</a></h2>
<p>In the global configuration file, the <code>allow_app_override</code> setting can be specified to enable local app configurations. If present, this setting enables owners of Shiny applications to customize the properties of their own applications using a file named <code>.shiny_app.conf</code>. This file can be placed within an application directory (alongside the <code>server.R</code> and <code>ui.R</code> files) and can contain settings which configure how Shiny Server should manage the application.</p>
<p>This behavior is controlled by the <code>allow_app_override</code> setting which is disabled by default. In order to enable local application configurations, you can add to your configuration file <code>allow_app_override true;</code> (or just <code>allow_app_override;</code> for short).</p>
<p>Server administrators should be mindful of the fact that allowing application owners to specify their own scheduler parmeters has potential performance implications, as an application owner could enable his or her application to consume more resources than is desired. It is thus recommended that write privileges on the <code>.shiny_app.conf</code> files be granted judiciously in the underlying filesystem.</p>
<h2 id="hosting-model"><a href="#hosting-model"><span class="header-section-number">2.5</span> Hosting Model</a></h2>
<p>There are currently four different methods of configuring a location, three of which serve Shiny applications. These three are described below; see the following section on <a href="#redirecting">Redirecting</a> to learn about a fourth mode.</p>
<h3 id="host-a-directory-of-applications"><a href="#host-a-directory-of-applications"><span class="header-section-number">2.5.1</span> Host a Directory of Applications</a></h3>
<p>A location which uses <code>site_dir</code> will host an entire directory tree -- both Shiny Apps and static assets. This is the location used to serve an asset or application in <code>/srv/shiny-server/</code> in the default configuration that ships with Shiny Server.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define the location &#39;/&#39;</span>
<span class="kw">location</span> / {
  <span class="kw">site_dir</span> /srv/shiny-server/
}</code></pre>
<p>The above configuration would instruct Shiny Server to make the <code>/srv/shiny-server/</code> directory available at the base URL. Any Shiny applications stored in this directory (or any subdirectory), along with any static assets (including images, data, JavaScript/CSS files, etc.) will be made available at the corresponding URL. For example, see the following directory tree:</p>
<pre><code>+---/srv/shiny-server
|   +---shinyApp1
|       +---server.R
|       +---ui.R
|   +---shinyApp2
|       +---server.R
|       +---ui.R
|   +---assets
|       +---style.css
|       +---script.js</code></pre>
<p>If this server were available at <code>http://server.com</code>, the <code>location</code> settings above would make the following (along with any other file in the tree) publicly available to the user.</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">URL</th>
<th style="text-align: left;">Definition</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>http://server.com/shinyApp1</code></td>
<td style="text-align: left;">Serve the Shiny App defined in 'shinyApp1'</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>http://server.com/shinyApp2</code></td>
<td style="text-align: left;">Serve the Shiny App defined in 'shinyApp2'</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>http://server.com/assets/style.css</code></td>
<td style="text-align: left;">Serve this static CSS file</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>http://server.com/assets/script.js</code></td>
<td style="text-align: left;">Serve this static JS file</td>
</tr>
</tbody>
</table>
<h3 id="host-a-single-application"><a href="#host-a-single-application"><span class="header-section-number">2.5.2</span> Host a Single Application</a></h3>
<p>A location configured to use <code>app_dir</code> will attempt to serve a single application hosted at the given directory. For instance,</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define the location &#39;/specialApp&#39;</span>
<span class="kw">location</span> /specialApp {
  <span class="kw">app_dir</span> /srv/shiny-server/myApp<span class="kw">;</span>
}</code></pre>
<p>will configure the <code>location</code> responsible for the path <code>/specialApp</code> to use this <code>app_dir</code> router which serves a single application stored in the directory <code>/srv/shiny-server/myApp</code>. This configuration would presume a <code>server.R</code> file (and corresponding <code>ui.R</code> file) would be available at <code>/srv/shiny-server/myApp/server.R</code>. If so, the application saved there would be available at a URL like <code>http://server.com/specialApp</code>.</p>
<h3 id="host-per-user-application-directories"><a href="#host-per-user-application-directories"><span class="header-section-number">2.5.3</span> Host Per-User Application Directories</a></h3>
<p>A location configured to use <code>user_dirs</code> will allow users on the system to create and manage their own Shiny applications available in their home directories. This directive will host any application stored in an eligible user's <code>~/ShinyApps</code> directory publicly at a URL prefaced by their username.</p>
<p>This privilege can be restricted only to users of particular groups using the <code>members_of</code> restriction. For instance, the following configuration:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">run_as</span> :HOME_USER:<span class="kw">;</span>

<span class="co"># Define the root location</span>
<span class="kw">location</span> / {
  <span class="kw">user_dirs;</span>
  
  <span class="co"># Only allow members of the &#39;shinyUsers&#39; group to host personal applications.</span>
  <span class="kw">members_of</span> shinyUsers<span class="kw">;</span>
}</code></pre>
<p>will -- for any user who is a member of the <code>shinyUsers</code> group -- publicly host any Shiny application available in the user's <code>~/ShinyApps</code> directory. For instance, if <code>tina</code> is a user on this system and is also a member of the <code>shinyUsers</code> group, any application stored in <code>/home/tina/ShinyApps/</code>, such as the <code>shinyApp1</code> application, would be available on this server at a URL like <code>http://server.com/tina/shinyApp1</code>, assuming <code>/home/tina</code> was <code>tina</code>'s home directory.</p>
<p>The <code>user_dirs</code> setting is intended to ultimately replace the <code>user_apps</code> setting. The two models are very similar but differ in how the handle <code>run_as</code> settings. <code>user_apps</code> ignores the <code>run_as</code> setting and always runs applications as the user in whose home directory they exist. <code>user_dirs</code>, on the other hand, will respect the <code>run_as</code> setting. You can use the special <code>run_as</code> user <code>:HOME_USER:</code> to make <code>user_dirs</code> operate the same way as <code>user_apps</code> does; thus, the two following configurations would be identical:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">user_apps;</span>
}</code></pre>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">run_as</span> :HOME_USER:<span class="kw">;</span>
  <span class="kw">user_dirs;</span>  
}</code></pre>
<p>Note that, while Shiny Server supports the ability to run in <code>user_dirs</code> as a single user, this may require some tweaking to make function correctly on your server. For instance, the following configuration:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">run_as</span> shiny<span class="kw">;</span>
  <span class="kw">user_dirs;</span>
}</code></pre>
<p>would indeed attempt to start the applications housed in your users' home directories as the <code>shiny</code> user, but many distributions, by default, restrict access to users' private <code>/home</code> directories, meaning that the <code>shiny</code> user would not be able to read or write to the directories it needs to in order to run these applications properly.</p>
<h2 id="redirecting"><a href="#redirecting"><span class="header-section-number">2.6</span> Redirecting</a></h2>
<p>The final mode in which a location can operate is to redirect to another URL. Such locations will immediately send a response to the client informing them of the URL to which they should redirect and the status code that should be used when informing the client of the redirection. Typically, a redirect will use the <code>301</code> status code for a permanent redirect, or a <code>302</code> status code for a temporary redirect. The final option when configuring a location for redirection is whether or not it should use exact matching. If a redirecting location is configured to use exact matching, only requests for that exact URL will be redirected. If not, any requests for that URL path or any subpath of that URL will be redirected. For example,</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define a location at the base URL of this &#39;server&#39;</span>
<span class="kw">location</span> / {
  <span class="co"># Redirect traffic from &#39;/shinyApp1/&#39; to &#39;http://server.com&#39; temporarily.</span>
  <span class="kw">location</span> /shinyApp1 {
    <span class="kw">redirect</span> <span class="st">&quot;http://server.com&quot;</span> 302 true<span class="kw">;</span>
  }
}</code></pre>
<p>will redirect any requests for the exact path <code>/shinyApp1</code> to <code>http://server.com</code> temporarily.</p>
<h2 id="virtual-hosts"><a href="#virtual-hosts"><span class="header-section-number">2.7</span> Virtual Hosts</a></h2>
<p>The <code>server_name</code> setting allows Shiny Server to route incoming requests to a particular <code>server</code> element based on the hostname of the request. This will serve as an additional level of filtering on incoming traffic. Bear in mind that traffic must be destined for this server (i.e. traffic which was bound for the IP address and port on which this server was listening) in order to even be evaluated for a matching hostname.</p>
<p>The example below may clarify the configuration</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="co"># Instruct this server to listen to port 80</span>
  <span class="kw">listen</span> 80<span class="kw">;</span>
  
  <span class="co"># Only accept requests for the hostname &#39;server1.com&#39;</span>
  <span class="kw">server_name</span> server1.com<span class="kw">;</span>
  
  <span class="co"># Define the location for this server.</span>
  <span class="kw">location</span> / {
    <span class="kw">site_dir</span> /srv/shiny-server1<span class="kw">;</span>
    <span class="kw">log_dir</span> /var/log/shiny-server1<span class="kw">;</span>
  }
}

<span class="kw">server</span> {
  <span class="co"># Instruct this server to listen to port 80</span>
  <span class="kw">listen</span> 80<span class="kw">;</span>
  
  <span class="co"># Only accept requests for the hostname &#39;server2.com&#39;</span>
  <span class="kw">server_name</span> server2.com<span class="kw">;</span>
  
  <span class="co"># Define the location for this server.</span>
  <span class="kw">location</span> / {
    <span class="kw">site_dir</span> /srv/shiny-server2<span class="kw">;</span>
    <span class="kw">log_dir</span> /var/log/shiny-server2<span class="kw">;</span>
  }
}</code></pre>
<p>This example presupposes that, on this network, the domains <code>server1.com</code> and <code>server2.com</code> both resolve to the same IP address. In the configuration above, we first create a server that listens on port <code>80</code> and will only accept traffic whose hostname matches <code>server1.com</code>. We then configure a server which will also listen on port <code>80</code> and require that it only accept traffic whose hostname equals <code>server2.com</code>.</p>
<p>This configuration would allow an application stored in <code>/srv/shiny-server1/shinyApp</code> to be accessible at <code>http://server1.com/shinyApp</code> and an application stored in <code>/srv/shiny-server2/shinyApp</code> to be accessible at <code>http://server2.com/shinyApp</code>.</p>
<h2 id="custom-templates"><a href="#custom-templates"><span class="header-section-number">2.8</span> Custom Templates</a></h2>
<p>Shiny Server can utilize custom templates when generating static pages such as directory indexes and error pages. This feature is controlled using the <code>template_dir</code> directive and can be applied globally, or to a particular <code>server</code> or <code>location</code>.</p>
<p>To utilize this feature, you'll need a directory in which you'll store your templates. In this example, we'll assume you're using <code>/etc/shiny-server/templates/</code>. Inside this directory, you'll place the <a href="http://handlebarsjs.com/">handlebars</a>-enabled HTML templates for your pages.</p>
<p>Shiny Server will attempt to find a specific page to accommodate the current need -- for instance, if it encountered a 404 error, it will first look to see if you provided a specific template for handling 404 errors in the specified directory (<code>error-404.html</code>). If it doesn't find this file, it will go one step backwards to see if you provide a generic error template (<code>error.html</code>). If it can't find a suitable template in your template directory, it will fall back to use the provided templates that come with Shiny Server (and are stored in <code>/opt/shiny-server/templates</code>).</p>
<p>As you may have noticed already, Shiny Server uses a hyphen-delimited hierarchy which progresses from broadest to narrowest. So all error pages start with <code>error</code>. But the file name for a 404 error page would add an additional element (<code>404</code>) following a hyphen: <code>error-404</code>. All files are expected to use the <code>.html</code> extension.</p>
<p>The tables below describe the page templates that can be defined in Shiny Server:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Template Name</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">error-403</td>
<td style="text-align: left;">Client is forbidden from accessing this page. Or, in Shiny Server Pro, that the user is signed in but does not have permissions to view this application.</td>
</tr>
<tr class="even">
<td style="text-align: left;">error-404</td>
<td style="text-align: left;">Page not found</td>
</tr>
<tr class="odd">
<td style="text-align: left;">error-500</td>
<td style="text-align: left;">General server error</td>
</tr>
<tr class="even">
<td style="text-align: left;">error-503-users</td>
<td style="text-align: left;">The application has exceeded its maximum # of users</td>
</tr>
<tr class="odd">
<td style="text-align: left;">error-503-license</td>
<td style="text-align: left;">(Pro Only) You have exceeded the number of concurrent users allotted for your license.</td>
</tr>
<tr class="even">
<td style="text-align: left;">directoryIndex</td>
<td style="text-align: left;">Shown when <code>directory_index</code> is enabled for a location and the user visits the base URL.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">login</td>
<td style="text-align: left;">(Pro Only) Used to render the login page.</td>
</tr>
</tbody>
</table>
<p>Again, any of the template names that have hyphens in them can be generalized by trimming off the hyphen and subsequent word(s). So a file named <code>error-503.html</code> could be used as the template for <em>both</em> <code>error-503-users</code> pages, as well as <code>error-503-license</code> pages. More generally, a single template can be used for all errors by naming it <code>error.html</code>. If a more specific template doesn't exist, this page would be used when generating any type of error page.</p>
<p>We recommend starting with the existing templates then modifying them to create your own branding. To do this, copy the relevant HTML files out of <code>/opt/shiny-server/templates/</code> into your template directory (for example, <code>/etc/shiny-server/templates/</code>). To create a custom error page, execute:</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">mkdir</span> /etc/shiny-server/templates/
$ <span class="kw">cp</span> /opt/shiny-server/templates/error.html /etc/shiny-server/templates/</code></pre>
<p>Now open the template in your preferred text editor and modify it. Initially, leave the overall structure intact, but add some language at the top of the page (immediately under the line containing <code>&lt;h1&gt;{{title}}&lt;/h1&gt;</code>) or add some new CSS rules then save the file.</p>
<p>Now instruct Shiny Server to use this new template in your configuration by adding the line:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">template_dir</span> /etc/shiny-server/templates<span class="kw">;</span></code></pre>
<p>at the top/bottom of the file so it applies globally. Of course, you can later specify another <code>template_dir</code> for particular <code>location</code>s.</p>
<p>When you restart the server and access an error page. (Try accessing a hidden file like <code>http://server.com:3838/.hidden</code>, where <code>server.com</code> is the domain name or IP address of your server, which should use the <code>error-403</code> or <code>error</code> template.) You should see your new text or CSS styling on the page that is loaded. Likewise, you can copy the <code>directoryIndex.html</code> template or, for Shiny Server Pro, the <code>login.html</code> template to your custom directory and begin customizing.</p>
<p>For performance reasons, templates are cached in memory once they're loaded. Thus, you will find that changes to your template may not be immediately visible when you refresh the page. To empty the cache to force Shiny Server to load in the new changes to your template, you can either <code>restart</code> or <code>reload</code> the server (see the section on <a href="#stopping-and-starting">Stopping and Starting</a>).</p>
<p>Finally, note that these templates currently only apply for HTML pages that are generated by Shiny Server. An HTML page generated by the Shiny package will <em>not</em> have custom templates applied at this time. Currently, this is most visible with 404 errors. If you access a URL which Shiny Server cannot direct to a Shiny application (for instance, <code>http://server.com:3838/flargdarg</code>, where <code>server.com</code> is the domain name or IP address of your server), you will see a Shiny-Server-generated 404 error page which has custom templates applied (assuming this <code>server</code> is configured to have a custom <code>error-404.html</code> or <code>error.html</code> template). However, if you were to access a file that does not exist in a valid application, you would see an un-styled 404 page that did not leverage your custom template. For instance, if you have an application deployed at <code>http://server.com:3838/myApp</code> and you attempt to access <code>http://server.com:3838/myApp/flargDarg</code>, the request would be sent to Shiny which would then look for this file and, if it isn't found, would return a 404 page. Shiny Server would pass this response back directly to the client, as it wasn't generated by Shiny Server. We will be reviewing this architecture in future versions -- please let us know if you find that the current organization inhibits your workflow.</p>
<h2 id="server-log"><a href="#server-log"><span class="header-section-number">2.9</span> Server Log</a></h2>
<p>All information related to Shiny Server, rather than a particular Shiny application, is logged in the global system log stored in <code>/var/log/shiny-server.log</code>. This log should be checked often to ensure Shiny Server is performing as expected. Any errors and warnings which Shiny Server needs to communicate will be written here.</p>
<p>If <code>logrotate</code> is available when Shiny Server is installed, a <code>logrotate</code> configuration will be installed. The default configuration is to rotate the logfile when it exceeds 1MB. The old log file will be compressed and stored alongside the original log file with a <code>.1.gz</code> extension (then <code>.2.gz</code>, etc.). Up to twelve archived log files will be maintained; upon the 13th log rotation the oldest log file will be deleted.</p>
<p>For logs related to individual Shiny Applications, see the section on <a href="#logging-and-analytics">Logging and Analytics</a>.</p>
<h3 id="access-logs"><a href="#access-logs"><span class="header-section-number">2.9.1</span> Access Logs</a></h3>
<p>An access log can be configured globally using the <code>acces_log</code> parameter. This log is not enabled by default. This setting controls the location of the access log as well as the format used. The access log can be useful to audit the security and activity taking place on your Shiny Server installation. These logs can be audited manually or automatically to inspect how often various resources are being accessed, or by whom they are being accessed (using the originating IP address). Currently, one access log is created for the entire Shiny Server process; all Shiny applications share this access log.</p>
<p>The access logs will be written using the Connect logging libraries, so additional details can be found in <a href="http://www.senchalabs.org/connect/logger.html">their documentation</a> in the &quot;Formats&quot; section. In brief, there are four pre-defined logging formats for access logs specified in the documentation referenced above:</p>
<ul>
<li><code>default</code> ':remote-addr - - [:date] &quot;:method :url HTTP/:http-version&quot; :status :res[content-length] &quot;:referrer&quot; &quot;:user-agent&quot;'</li>
<li><code>short</code> ':remote-addr - :method :url HTTP/:http-version :status :res[content-length] - :response-time ms'</li>
<li><code>tiny</code> ':method :url :status :res[content-length] - :response-time ms'</li>
<li><code>dev</code> concise output colored by response status for development use</li>
</ul>
<p>For example, the following would configure an access log that uses the <code>tiny</code> format:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">access_log</span> /var/log/shiny-server/access.log tiny<span class="kw">;</span>

<span class="kw">server</span> {
  <span class="kw">...</span></code></pre>
<h2 id="environment-variable-settings"><a href="#environment-variable-settings"><span class="header-section-number">2.10</span> Environment Variable Settings</a></h2>
<p>We strive to expose most settings through the configuration file described previously. However, there are some settings that we don't include in the configuration file which some users may still wish to change. Where possible, we'll allow users to configure these settings using environment variables. Some of these environment variables will later be promoted to configuration directives, but will be documented here until that time.</p>
<p>Typically, it is best to define these environment variables in the startup script used to run Shiny Server (often either <code>/etc/init.d/shiny-server</code> or <code>/etc/init/shiny-server.conf</code>, depending on whether or not you're using Upstart).</p>
<h3 id="shiny_log_level"><a href="#shiny_log_level"><span class="header-section-number">2.10.1</span> <code>SHINY_LOG_LEVEL</code></a></h3>
<p>Defines the verbosity of logging which will be used by Shiny Server. Valid options -- in level of increasing verbosity -- are <code>TRACE</code>, <code>DEBUG</code>, <code>INFO</code>, <code>WARN</code>, and <code>ERROR</code>. More verbose levels of logging (such as <code>TRACE</code>) may be helpful when debugging an issue or trying to understand exactly what Shiny Server is doing, but will likely be far too much information for a system with even moderate load.</p>
<p>The default if this environment variable is not found is to use <code>INFO</code>.</p>
<h3 id="r"><a href="#r"><span class="header-section-number">2.10.2</span> <code>R</code></a></h3>
<p>Defines the path to the R executable which should be used when running Shiny. Systems which have multiple versions of R installed, or don't wish to place R on the path before starting Shiny Server can override this setting to point to a particular version of R.</p>
<p>Note that, for any <code>location</code> with a configured [<code>r_path</code>] in the configuration file, this environment variable will not take effect. If no environment variable is found, Shiny Server will expect an executable named <code>R</code> to be on the path.</p>
<h1 id="deploying-applications"><a href="#deploying-applications"><span class="header-section-number">3</span> Deploying Applications</a></h1>
<h2 id="schedulers-application-restarts"><a href="#schedulers-application-restarts"><span class="header-section-number">3.1</span> Schedulers &amp; Application Restarts</a></h2>
<p>A scheduler is responsible for fulfilling incoming requests to a particular application. Each version of an application (see below) will have its own associated scheduler. Each scheduler can have different properties to control things like how many concurrent connections it should accept.</p>
<p>A scheduler can be specified at many locations in the configuration file and will be inherited to inner blocks. For instance, a scheduler definition found in a <code>server</code> block will be applied to every <code>location</code> in that <code>server</code>, unless overridden.</p>
<h3 id="restarting-an-application"><a href="#restarting-an-application"><span class="header-section-number">3.1.1</span> Restarting an Application</a></h3>
<p>Some changes you make to the code, assets, or environment of an application will require the application's R processes to be restarted for the changes to take effect. These include upgrades to packages that are used by the application, changes to <code>.Renviron</code>/<code>.Rprofile</code> or other R source files, or modifications to data files that are read only at startup time.</p>
<p>(Fortunately, Shiny applications generally do not need to be restarted when changes to <code>ui.R</code> or <code>server.R</code> are made, as Shiny will check for changes to these files on page load.)</p>
<p>An application can be restarted by altering the &quot;modified time&quot; on a file named <code>restart.txt</code> in the application's directory. This can most easily be done using the <code>touch</code> utility as in <code>touch restart.txt</code> which will update the modified timestamp on this file to the current time. Upon the next new connection to the application, Shiny Server will spawn a new R process to run the &quot;new&quot; (restarted) Shiny Application for this and future users. When this occurs, the old processes will remain unaltered, and open connections will remain active and valid until the last connection closes itself.</p>
<p>This can cause unintuitive consequences regarding the number of processes that may be running for a given application. Even if using a single-process Simple Scheduler for an application, it is possible that there would be multiple R processes associated with this application, each corresponding to a separate restart timestamp. This behavior is likely to change in future versions of Shiny Server.</p>
<h3 id="simple-scheduler"><a href="#simple-scheduler"><span class="header-section-number">3.1.2</span> Simple Scheduler</a></h3>
<p>The Simple Scheduler is the only scheduler available in the Open Source edition of Shiny Server. It associates a single R process with a single Shiny application. This scheduler accepts a single parameter which specifies the maximum number of concurrent sessions. Once this number is reached, users attempting to create a new session on this application will receive a 503 error page.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Define a new location at the base URL</span>
<span class="kw">location</span> / {
  <span class="co"># Define the scheduler to use for this location</span>
  <span class="kw">simple_scheduler</span> 15<span class="kw">;</span>
  
  <span class="kw">...</span>
}</code></pre>
<p>In this example, the <code>location</code> defined at the base URL in this <code>server</code> will be configured to use the Simple Scheduler and to limit each application to a maximum of 15 simultaneous connections -- meaning that if there are 15 active connections on the application when a user attempts to visit this application, that user will receive a 503 error page. When one of the 15 active connections is disconnected, one new &quot;seat&quot; will be available for another user to connect to the application.</p>
<h2 id="application-timeouts"><a href="#application-timeouts"><span class="header-section-number">3.2</span> Application Timeouts</a></h2>
<p>Each Shiny Application has two timeouts associated with it:</p>
<ol type="1">
<li><strong><code>app_init_timeout</code></strong> -- Describes the amount of time (in seconds) to wait for an application to start. After this many seconds if the R process still has not become responsive, it will be deemed an unsuccessful startup and the connection will be closed.</li>
<li><strong><code>app_idle_timeout</code></strong> -- Defines the amount of time (in seconds) an R process with no active connections should remain open. After the last connection disconnects from an R process, this timer will start and, after the specified number of seconds, if no new connections have been created, the R process will be killed.</li>
</ol>
<p>Typically, these two parameters will be correlated. Shiny Applications which involve little processing to start (therefore have a small <code>app_init_timeout</code>) can often be closed with minimal concern (thus would have a small <code>app_idle_timeout</code>). Conversely, applications which require a substantial amount of data to be loaded on startup may merit a longer <code>app_init_timeout</code> to give the data time to load, and a longer <code>app_idle_timeout</code> as the task of spawning a new process is more expensive and should be minimized.</p>
<h2 id="logging-and-analytics"><a href="#logging-and-analytics"><span class="header-section-number">3.3</span> Logging and Analytics</a></h2>
<h3 id="application-error-logs"><a href="#application-error-logs"><span class="header-section-number">3.3.1</span> Application Error Logs</a></h3>
<p>Error logs are created for each R Shiny process separately. For <code>location</code>s configured to use <code>user_apps</code>, these logs are created in each user's <code>~/ShinyApps/log/</code> directory. For <code>location</code>s configured with <code>app_dir</code> or <code>site_dir</code>, the directory in which these logs are created is managed by the <code>log_dir</code> setting, which can be specified globally, for a particular <code>server</code>, or for a particular <code>location</code>. By default, these logs will be located at <code>/var/log/shiny-server/</code>. To change these <code>location</code>s, the <code>log_dir</code> can be specified in the following way:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">log_dir</span> /var/log/shiny-server/<span class="kw">;</span>
}</code></pre>
<p>The log files will be created in the following format:</p>
<pre><code>&lt;application directory name&gt;-YYYMMDD-HHmmss-&lt;port number or socket ID&gt;.log</code></pre>
<p>Log files will be created for each R process when it is started. However, if a process closes successfully, the error log associated with that process will be automatically deleted. The only error log files that will remain on disk are those associated with R processes that did not exit as expected.</p>
<p>If you're looking for log messages related to Shiny Server itself -- rather than individual Shiny applications -- see the section on the <a href="#server-log">Server Log</a>.</p>
<h3 id="google-analytics"><a href="#google-analytics"><span class="header-section-number">3.3.2</span> Google Analytics</a></h3>
<p>Shiny Server is capable of automatically inserting the necessary JavaScript code to enable Google Analytics tracking globally or for a particular <code>server</code> or <code>location</code>. This is managed by the <code>google_analytics_id</code> setting which can be used as follows:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">google_analytics_id</span> UA-12345-1<span class="kw">;</span>
}</code></pre>
<h2 id="reactivity-log"><a href="#reactivity-log"><span class="header-section-number">3.4</span> Reactivity Log</a></h2>
<p>The reactivity log is a great browser-based tool for analyzing and debugging reactive dependencies in a Shiny Application. We strongly recommend that you read the <a href="http://rstudio.github.io/shiny/tutorial/#reactivity-overview">Overview of Reactivity</a> in the Shiny tutorial to get the most out of the reactivity log. The symbols and representations introduced in that article are reused in the log. This tool should not be used in a production environment, as it exposes details that should not be publicly available. Many application authors find it to be a useful tool to use locally, however.</p>
<p>Currently, reactivity logs are maintained for an entire R process. Therefore, it should be used in a fresh R session in which only one Shiny application is active. To enable the reactivity log, run the command <code>options(shiny.reactlog=TRUE)</code> before running your application. Once you've started your application and are viewing it in a browser, you can use <code>Ctrl+F3</code> (or <code>Command+F3</code> for Mac users) to view the reactivity log. This visualization creates a snapshot of all reactive activity that had occurred up to the moment it was created. If you want to view the reactive activity that has occurred since opening the reactivity log, you'll need to refresh the browser.</p>
<p>The <code>showReactLog()</code> function exposes this functionality from within R and can be used outside of strictly Shiny contexts to generate a static HTML file visualizing reactivity. You can see the full documentation using <code>?showReactLog</code> in R.</p>
<p>As the reactivity log exposes the architecture and some of the code behind your application, it would likely be unwise to enable this feature in a production environment. Unless explicitly enabled by the user, Shiny Server will not enable this functionality. We recomend using the reactivity log in a local R process not managed by Shiny Server.</p>
<h2 id="specifying-protocols"><a href="#specifying-protocols"><span class="header-section-number">3.5</span> Specifying Protocols</a></h2>
<p>Shiny Server can use a wide variety of techniques to keep the data in the web browser synchronized. The preferred technique, and the one most widely used, is the use of WebSockets. However, if WebSockets are not supported -- either by some intermediate network between Shiny Server and your client or by your client's web browser -- then a fallback protocol will be used. In total, Shiny Server provides nine different methods of connecting to the server in real-time. In order of preference, they are:</p>
<ol type="1">
<li>WebSocket</li>
<li>XDR Streaming</li>
<li>XHR Streaming</li>
<li>iframe Eventsource</li>
<li>iframe HTML File</li>
<li>XDR Pollilng</li>
<li>XHR Polling</li>
<li>iframe XHR Polling</li>
<li>JSONP Polling</li>
</ol>
<p>Each of these will be tried by the client in order until a successful connection to Shiny Server. If you would like to omit one or more of these protocols from the list for whatever reason, you can currently do so only from the client (we hope to make a server-side configuration available in a future release of Shiny Server).</p>
<p>To change the available protocols, you can open any Shiny Application and press the keyboard shortcut: <code>Ctrl+Alt+Shift+A</code> (or, from a Mac: <code>control+option+shift+A</code>). This will bring up a window that will allow you to select or deselect any of the above protocols. After confirming your changes these settings will be saved in your browser for future visits to this server. These settings will take effect upon loading any Shiny application hosted on this domain and will last until you explicitly change them again.</p>
<h1 id="appendix"><a href="#appendix"><span class="header-section-number">4</span> Appendix</a></h1>
<h2 id="quick-start"><a href="#quick-start"><span class="header-section-number">4.1</span> Quick Start</a></h2>
<p>We recommend reading through the relevant sections of this guide to gain a complete understanding of how to operate Shiny Server. If you're just looking to get running quickly, you can follow one of the guides below.</p>
<p>All of the guides will help you customize your Shiny Server configuration file which will be stored at <code>/etc/shiny-server/shiny-server.conf</code>. By altering this file, you can control exactly how Shiny Server runs.</p>
<p>The following guides are available:</p>
<ul>
<li><a href="#host-a-directory-of-applications-1">Host a directory of applications</a> - This is the default configuration that Shiny Server will use until you provide a custom configuration in <code>/etc/shiny-server/shiny-server.conf</code>. This guide will show you how to serve multiple applications from a single directory on disk -- <code>/srv/shiny-server/</code>. If you're not sure where to start, we recommend this guide.</li>
<li><a href="#let-users-manage-their-own-applications">Let users manage their own applications</a> - This guide will serve Shiny applications created by your users and stored in their home directories.</li>
<li><a href="#run-shiny-server-on-multiple-ports">Run Shiny Server on multiple ports</a> - This guide will introduce a multi-server configuration which demonstrates how to run two distinct services on different ports on your server. It also configures one server with multiple locations.</li>
</ul>
<h3 id="host-a-directory-of-applications-1"><a href="#host-a-directory-of-applications-1"><span class="header-section-number">4.1.1</span> Host a directory of applications</a></h3>
<p>Until a custom configuration is specified, Shiny Server will use the configuration stored at <code>/opt/shiny-server/config/default.config</code>. This configuration expects your Shiny applications to be hosted in <code>/srv/shiny-server/</code>. Let's start by copying one of the example applications from the Shiny package to this directory.</p>
<p>We'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into <code>/srv/shiny-server</code> using the following command (using the directory that was returned in the previous command, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello /srv/shiny-server/</code></pre>
<p>If that command succeeds, you've installed your first Shiny application into Shiny Server!</p>
<p>By default, Shiny Server listens on port 3838, so your new application will be available at <code>http://myserver.com:3838/01_hello</code> where <code>myserver</code> is the hostname or IP address of the Shiny Server.</p>
<p>If you wanted to change the port or the directory Shiny Server uses, you would adjust the configuration file. Shiny Server will look for a custom configuration file in <code>/etc/shiny-server/shiny-server.conf</code>. If none is found, it will use its default configuration. To begin customizing your server, copy the default configuration there then begin modifying. To copy the file, run the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/default.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>Then open <code>/etc/shiny-server/shiny-server.conf</code> in your preferred text editor and modify the line which says <code>listen 3838</code>. This is the line that instructs your server to listen to port 3838 -- change it to another port such as <code>12345</code> and save the file. You'll need to restart Shiny Server to make it aware of the new configuration file. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>You should now find that Shiny Server is no longer running on port 3838, but is on whichever new port you selected.</p>
<h3 id="let-users-manage-their-own-applications"><a href="#let-users-manage-their-own-applications"><span class="header-section-number">4.1.2</span> Let users manage their own applications</a></h3>
<p>Some administrators of Shiny Server would prefer to give users -- or some trusted subgroup of users -- the ability to manage and host their own Shiny applications. This allows users to work directly with their applications rather than requiring an administrator to deploy and update applications on their behalf. This guide will document how to create such an environment using the <code>user_dirs</code> directive documented in the section named <a href="#host-per-user-application-directories">Host Per-User Application Directories</a>.</p>
<p>We provide a configuration file in <code>/opt/shiny-server/config/user-dirs.config</code> that enables this functionality. To use this file as your active configuration, you'll need to copy it to <code>/etc/shiny-server/shiny-server.conf</code> using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/user-dirs.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>This configuration enables all users on the system to host their own applications by creating a <code>ShinyApps</code> directory in their home directory; you can always alter this file later to tailor it to meet your needs. You can deploy an application under your username by copying one of the examples that comes with Shiny into your own <code>ShinyApps</code> directory. To do this, we'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into <code>~/ShinyApps</code> using the following command (using the directory that was returned in the previous command, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">mkdir</span> ~/ShinyApps
<span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello ~/ShinyApps/</code></pre>
<p>If that command succeeds, you've successfully installed a <code>user_dirs</code> Shiny application! However, you'll need to restart Shiny Server to make it aware of the changes you made to the configuration file. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>By default, Shiny Server listens on port 3838, so your new application will be available at <code>http://myserver.com:3838/&lt;your_username&gt;/01_hello</code> where <code>myserver</code> is the hostname or IP address of the Shiny Server and <code>&lt;your_username&gt;</code> is your Linux username.</p>
<p>If you wanted to restrict the privilege of running Shiny applications to a particular set of users on your system, you can uncomment the <code>members_of</code> line in the configuration file. You can then specify the Linux group name of which a user must be a member before he or she would be allowed to host Shiny applications.</p>
<h3 id="run-shiny-server-on-multiple-ports"><a href="#run-shiny-server-on-multiple-ports"><span class="header-section-number">4.1.3</span> Run Shiny Server on multiple ports</a></h3>
<p>This guide will show how to run Shiny Server on multiple ports simultaneously and will also show how to run a single server with multiple locations.</p>
<p>We provide a configuration file in <code>/opt/shiny-server/config/multi-server.config</code> that enables this functionality. To use this file as your active configuration, you'll need to copy it to <code>/etc/shiny-server/shiny-server.conf</code> using the following command:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> cp /opt/shiny-server/config/multi-server.config /etc/shiny-server/shiny-server.conf</code></pre>
<p>This configuration will run two servers: one on port 3838, and one on port 4949. As you can see in the configuration file, a variety of different <code>location</code>s are defined with different hosting models.</p>
<p>The server running on port 3838 defines two locations. The first for the URL <code>/users</code> which makes user applications available as documented in the section entitled <a href="#host-per-user-application-directories">Host Per-User Application Directories</a>. The second location is at the URL <code>/example1</code> and hosts a single application which should be stored in <code>/srv/shiny-server/01_hello/</code>.</p>
<p>You can copy this example application from the Shiny package to the relevant directories. To do this, we'll need to know where the Shiny package was installed -- this can vary from distribution to distribution. You can locate Shiny's first example by entering the following command at a terminal:</p>
<pre><code>R -e &quot;system.file(&#39;examples/01_hello&#39;, package=&#39;shiny&#39;)&quot;</code></pre>
<p>which will return something like:</p>
<pre><code>[1] &quot;/usr/local/lib/R/site-library/shiny/examples/01_hello&quot;</code></pre>
<p>You can copy that entire directory into the necessary locations using the following commands (using the directory that was returned in the previous command in both <code>cp</code> commands, if it's different):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="co"># Copy to your home directory&#39;s &#39;ShinyApps&#39; folder</span>
<span class="kw">mkdir</span> ~/ShinyApps
<span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello ~/ShinyApps/

<span class="co"># Copy to /srv/shiny-server</span>
<span class="kw">sudo</span> cp -R /usr/local/lib/R/site-library/shiny/examples/01_hello /srv/shiny-server/</code></pre>
<p>You'll need to restart Shiny Server to make it aware of the changes you made to the configuration file. The <a href="#stopping-and-starting">Stopping and Starting</a> section explains this in more detail. For now, you'll run this command if you're on a distribution which supports Upstart (most recent distributions, including Ubuntu 12 and later and CentOS 6):</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> restart shiny-server</code></pre>
<p>If you're on an older system that relies on init.d (such as CentOS 5), you'll use the following command instead:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">sudo</span> /sbin/service shiny-server restart</code></pre>
<p>You should now be able to access applications in a variety of ways:</p>
<ul>
<li>On the server running on port 3838, you should have a <code>user_apps</code> location at <code>/users</code> hosting your personal applications. You can access the one deployed earlier at a URL like <code>http://myserver.com:3838/users/&lt;your_username&gt;/01_hello</code> where <code>myserver</code> is the hostname or IP address of the Shiny Server and <code>&lt;your_username&gt;</code> is your Linux username.</li>
<li>Also on the server running on port 3838, you have a single application available at the <code>/example1</code> location. So the URL like <code>http://myserver.com:3838/example1</code> (where <code>myserver</code> is the hostname or IP address of the Shiny Server) should point you to the example you previously copied to <code>/srv/shiny-server/01_hello</code>.</li>
<li>Finally, the server on port 4949 will host any application defined in <code>/srv/shiny-server</code>. You can access the one we just copied at a URL like <code>http://myserver.com:4949/01_hello</code> (where <code>myserver</code> is the hostname or IP address of the Shiny Server) which, coincidentally, should point you to the same application you just loaded a moment ago.</li>
</ul>
<h2 id="configuration-settings"><a href="#configuration-settings"><span class="header-section-number">4.2</span> Configuration Settings</a></h2>
<p></p>
    <p>Listed below are all the directives that are supported in Shiny Server config files.</p>
    <p><strong>Applies to</strong> indicates the kind of parent scope that this directive normally appears inside.</p>
    <p><strong>Inheritable</strong> means that you can put this directive at a higher level in the hierarchy and it will be inherited by any children to which it might apply. Inherited directives can be overridden by using the directive again in a child scope.</p>
    <ul class="directives">
      
        <li>
          <h3 class="code"><a name="run_as"></a>run_as</h3>
          <p class="desc">The user the app should be run as. This user should have the minimal amount of privileges necessary to successfully run the application (i.e. read-only access to the Shiny application directory). Note that this directive cannot be used with <a class="code" href="#user_apps">user_apps</a>, as <code>user_apps</code> always run as the user who owns the application.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>user</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The username that should be used to run the app</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="access_log"></a>access_log</h3>
          <p class="desc">The file path of the HTTP access log.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The file path where the access log should be written</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>format</td>
                  <td>String</td>
                  <td>optional</td>
                  <td>The log file format; see <a href="http://www.senchalabs.org/connect/logger.html">Connect documentation</a> under "Formats"</td>
                  <td>default</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="server"></a>server</h3>
          <p class="desc">Declares an HTTP server. You need one of these for each port/IP address combination this Shiny Server instance should listen on.</p>
          
            <p class="noparams">This directive has no parameters.</p>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#listen">listen</a></code>, <code><a href="#server_name">server_name</a></code>, <code><a href="#location">location</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="listen"></a>listen</h3>
          <p class="desc">Directs the enclosing server scope to listen on the specified port/IP address combination.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>port</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>Port to listen on</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>host</td>
                  <td>String</td>
                  <td>optional</td>
                  <td>IPv4 address to listen on (<code>*</code> or <code>0.0.0.0</code> for all); hostnames are not currently allowed, please use raw IPv4 address only</td>
                  <td>*</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#server">server</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="server_name"></a>server_name</h3>
          <p class="desc">Directs the enclosing server scope to only honor requests that have the given host headers (i.e. virtual hosts).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>names</td>
                  <td>String</td>
                  <td>multiple</td>
                  <td>The virtual hostname(s) to bind this server to</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#server">server</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="location"></a>location</h3>
          <p class="desc">Creates a scope that configures the given URL as a website (<a class="code" href="#site_dir">site_dir</a>), specific application (<a class="code" href="#app_dir">app_dir</a>), autouser root (<a class="code" href="#user_apps">user_apps</a>), or redirect to a different URL (<a class="code" href="#redirect">redirect</a>).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The request path that this location should match</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#server">server</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#run_as">run_as</a></code>, <code><a href="#site_dir">site_dir</a></code>, <code><a href="#directory_index">directory_index</a></code>, <code><a href="#user_apps">user_apps</a></code>, <code><a href="#app_dir">app_dir</a></code>, <code><a href="#redirect">redirect</a></code>, <code><a href="#log_dir">log_dir</a></code>, <code><a href="#members_of">members_of</a></code>, <code><a href="#google_analytics_id">google_analytics_id</a></code>, <code><a href="#application">application</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="site_dir"></a>site_dir</h3>
          <p class="desc">Configures the enclosing location scope to be a website that can contain both Shiny applications and unrelated static assets in a single directory tree.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>rootPath</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The path to the root directory of the website</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="directory_index"></a>directory_index</h3>
          <p class="desc">When enabled, if a directory is requested by the client and an <code>index.html</code> file is not present, a list of the directory contents is created automatically and returned to the client. If this directive is not present in a custom config file, the default behavior is to disable directory indexes. However, it is enabled if no config file is present at all (in other words, the default config file has it enabled).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>enabled</td>
                  <td>Boolean</td>
                  <td>required</td>
                  <td>Whether directory contents should automatically displayed</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="user_apps"></a>user_apps</h3>
          <p class="desc">Configures the enclosing location scope to be an autouser root, meaning that applications will be served up from users' ~/ShinyApps directories.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>enabled</td>
                  <td>Boolean</td>
                  <td>optional</td>
                  <td>Whether this location should serve up all users' ~/ShinyApps directories</td>
                  <td>true</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="app_dir"></a>app_dir</h3>
          <p class="desc">Configures the enclosing location scope to serve up the specified Shiny application.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The path to the Shiny application directory</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="redirect"></a>redirect</h3>
          <p class="desc">Configures the enclosing location to redirect all requests to the specified URL.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>url</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The URL (or base URL) to redirect to</td>
                  <td></td>
                </tr>
              
                <tr>
                  <td>statusCode</td>
                  <td>Integer</td>
                  <td>optional</td>
                  <td>The status code to send with the response (usually 301 for permanent redirects or 302 for temporary redirects)</td>
                  <td>302</td>
                </tr>
              
                <tr>
                  <td>exact</td>
                  <td>Boolean</td>
                  <td>optional</td>
                  <td>Whether to match on the URL exactly; if false, any subpaths will match as well</td>
                  <td>true</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="log_dir"></a>log_dir</h3>
          <p class="desc">Directs the application to write error logs to the specified directory. Only applies to location scopes that are configured with <a class="code" href="#app_dir">app_dir</a> or <a class="code" href="#site_dir">site_dir</a>, as <a class="code" href="#user_apps">user_apps</a> (autouser) always writes error logs to <code>~/ShinyApps/log</code>.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>path</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The path to which application log files should be written</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="members_of"></a>members_of</h3>
          <p class="desc">Restricts a <a class="code" href="#user_apps">user_apps</a> (autouser) scope to require membership in one or more groups (or, if no arguments are passed, lifts group restrictions from a <a class="code" href="#members_of">members_of</a> directive in a parent scope).</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>groups</td>
                  <td>String</td>
                  <td>multiple</td>
                  <td>Users must be a member of at least one of these groups in order to deploy applications; if no groups are provided, then all users are allowed</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="google_analytics_id"></a>google_analytics_id</h3>
          <p class="desc">Configure Google Analytics tracking code to be inserted in Shiny application pages.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>gaid</td>
                  <td>String</td>
                  <td>required</td>
                  <td>The Google tracking ID, for example, UA-18988-1</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="application"></a>application</h3>
          <p class="desc">Defines the parameters for an application. The values defined in the global configuration file will be used as defaults, and individual applications can override those defaults by placing a file named '.shiny_app.conf' in the base directory of an application.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>appDir</td>
                  <td>String</td>
                  <td>required</td>
                  <td>Specify the application by its app directory.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> <code><a href="#location">location</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
              <label>Child directives:</label> <code><a href="#app_init_timeout">app_init_timeout</a></code>, <code><a href="#app_idle_timeout">app_idle_timeout</a></code>, <code><a href="#simple_scheduler">simple_scheduler</a></code><br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="app_init_timeout"></a>app_init_timeout</h3>
          <p class="desc">Defines the amount of time Shiny Server will wait for an R process to start before giving up.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>timeout</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The number of seconds to wait for the application to start.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="app_idle_timeout"></a>app_idle_timeout</h3>
          <p class="desc">Defines the amount of time an R process will persist with no connections before being terminated.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>timeout</td>
                  <td>Integer</td>
                  <td>required</td>
                  <td>The number of seconds to keep an empty R process alive before killing it.</td>
                  <td></td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="simple_scheduler"></a>simple_scheduler</h3>
          <p class="desc">A basic scheduler which will spawn one single-threaded R worker for each application. If no scheduler is specified, this is the default scheduler.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>maxRequests</td>
                  <td>Integer</td>
                  <td>optional</td>
                  <td>The maximum number of requests to assign to this scheduler before it should start returning rejecting incoming traffic using a '503 - Service Unavailable' message. Once this threshold is hit, users attempting to initialize a new sessio will receive 503 errors.</td>
                  <td>100</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level, <code><a href="#server">server</a></code>, <code><a href="#location">location</a></code>, <code><a href="#application">application</a></code><br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
        <li>
          <h3 class="code"><a name="allow_app_override"></a>allow_app_override</h3>
          <p class="desc">If present, will allow users to override the global defaults for a scheduler by customizing the parameters associated with a scheduler or even the type of scheduler used.</p>
          
            <table class="params">
              <colgroup>
                <col style="width: 105px"></col>
                <col style="width: 90px"></col>
                <col style="width: 90px"></col>
                <col></col>
                <col style="width: 90px"></col>
              </colgroup>
              <tr>
                <th>Parameter</th>
                <th>Data type</th>
                <th>Type</th>
                <th>Description</th>
                <th>Default</th>
              </tr>
              
                <tr>
                  <td>enabled</td>
                  <td>Boolean</td>
                  <td>optional</td>
                  <td>Whether or not this is enabled. Default is true.</td>
                  <td>true</td>
                </tr>
              
            </table>
          

          <p>
            <label>Applies to:</label> Top-level<br/>
            <label>Inheritable:</label> Yes<br/>
            
          </p>
        </li>
      
    </ul>
<h2 id="migrating-updating"><a href="#migrating-updating"><span class="header-section-number">4.3</span> Migrating &amp; Updating</a></h2>
<h3 id="upgrading-from-shiny-server-0.3.x"><a href="#upgrading-from-shiny-server-0.3.x"><span class="header-section-number">4.3.1</span> Upgrading from Shiny Server 0.3.x</a></h3>
<p>Shiny Server 0.4 and later include many major changes to the architecture of Shiny Server. There are a few things to be aware of when upgrading from Shiny Server 0.3.x.</p>
<p>First, Shiny Server is now distributed via <code>deb</code> and <code>rpm</code> installers, rather than using <code>npm</code>. Thus, you'll first want to uninstall the old version of Shiny Server which was installed from <code>npm</code>.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> npm uninstall -g shiny-server</code></pre>
<p>Shiny Server no longer requires node.js to be installed on the system either. If you have no other need for node.js, you can uninstall it at this time, as well.</p>
<p>Running the latest Shiny Server installer will replace the scripts at <code>/etc/init/shiny-server.conf</code> or <code>/etc/init.d/shiny-server</code>. If you have made any modifications to these startup scripts that you wish to keep, please save a copy of these files before running the installer.</p>
<p>The default directories for logging and Shiny application hosting have also moved in this release. The default logging directory used to be <code>/var/shiny-server/log</code>, it is now <code>/var/log/shiny-server</code>. The default hosting directory was previously <code>/var/shiny-server/www</code> and is now <code>/srv/shiny-server/</code>. If you have not explicitly overridden these directories in the <code>/etc/shiny-server/shiny-server.conf</code> file, the new location will be created and used in the latest Shiny Server.</p>
<p>Finally, Shiny Server 0.4 and later require the Shiny package to be at least version 0.7.0. You can check the system-wide version of Shiny you have installed using the following command on the command line.</p>
<pre class="sourceCode bash"><code class="sourceCode bash">$ <span class="kw">sudo</span> su - -c <span class="st">&quot;R -e </span><span class="dt">\&quot;</span><span class="st">packageVersion(&#39;shiny&#39;)</span><span class="dt">\&quot;</span><span class="st">&quot;</span></code></pre>
<p>(Running this command using the <code>sudo su - -c</code> preface will allow you to see the system-wide version of Shiny. Individual users could have installed more recent versions of Shiny in their own R libraries.) If the installed version of Shiny predates 0.7.0, you should follow the instructions in <a href="#install-shiny">Install Shiny</a> to update to the most recent version.</p>
<p>At this point, you can proceed with the <a href="#installation">Installation</a> instructions associated with your Operating System.</p>
<h3 id="upgrading-from-shiny-server-0.4.x"><a href="#upgrading-from-shiny-server-0.4.x"><span class="header-section-number">4.3.2</span> Upgrading from Shiny Server 0.4.x</a></h3>
<p>There are problems on some systems with updating from 0.4.x versions to a more recent version. Thus, any user updating from the 0.4.x line should uninstall the package before installing the new one. In all versions 0.5.x and later, updating can simply be done by installing the newer version over the old one without explicitly removing the old package.</p>
<h2 id="frequently-asked-questions"><a href="#frequently-asked-questions"><span class="header-section-number">4.4</span> Frequently Asked Questions</a></h2>
<h3 id="what-are-the-hardware-requirements-for-running-shiny-server"><a href="#what-are-the-hardware-requirements-for-running-shiny-server"><span class="header-section-number">4.4.1</span> What are the hardware requirements for running Shiny Server?</a></h3>
<p>The performance footprint of a Shiny application is almost entirely dependent upon the Shiny application code. There are two factors to consider when selecting the hardware platform for Shiny Server.</p>
<p><strong>RAM</strong></p>
<p>The memory requirements of a Shiny application depend heavily on the data loaded when running the application. Often users find that a Shiny R process requires a minimum of 50MB of RAM -- beyond this, the amount of memory consumed by an application is determined by the data loaded or generated by that application. The <a href="http://rstudio.github.io/shiny/tutorial/#scoping">Scoping Section</a> of the Shiny Tutorial describes in detail how to take advantage of Shiny's scoping rules to share data across multiple Shiny sessions. This enables application developers to load only one copy of data into memory but still share this data with multiple shiny sessions.</p>
<p><strong>CPU</strong></p>
<p>R is fundamentally a single-threaded application. Unless parallel packages and tools are specifically selected when designing a Shiny application, the average R process (and the associated Shiny application) will be run serially on a single processing core. Thus, the typical Shiny application may saturate the processing core to which it's assigned, but will be unable to leverage other cores on the server which may be idle at that time.</p>
<h3 id="does-shiny-server-work-on-amazon-elastic-compute-cloud-ec2"><a href="#does-shiny-server-work-on-amazon-elastic-compute-cloud-ec2"><span class="header-section-number">4.4.2</span> Does Shiny Server work on Amazon Elastic Compute Cloud (EC2)?</a></h3>
<p>Absolutely. Many customers deploy Shiny Server and Shiny Server Professional on the Amazon Web Services (AWS) framework.</p>
<h3 id="can-i-deploy-shiny-server-on-an-isolated-network"><a href="#can-i-deploy-shiny-server-on-an-isolated-network"><span class="header-section-number">4.4.3</span> Can I Deploy Shiny Server on an Isolated Network?</a></h3>
<p>Of course. Shiny Server does not require a connection to the Internet in order to work properly, so you are free to deploy it in whatever sort of network configuration you would like. Offline activation is also available for Shiny Server Professional customers.</p>
<h3 id="how-do-i-translate-my-application-settings-to-nested-locations"><a href="#how-do-i-translate-my-application-settings-to-nested-locations"><span class="header-section-number">4.4.4</span> How Do I Translate My 'application' Settings to Nested 'location's?</a></h3>
<p>Shiny Server 0.4.2 introduced a new model for managing applications at a more granular level by supporting nested <code>location</code> directives. Any existing <code>application</code> directives in your configuration file will need to be migrated to this nested location format in order to be supported by any version of Shiny Server after 0.4.2.</p>
<p><code>application</code> directives were addressed by their full path on disk. Nested <code>location</code>s, on the other hand, are indexed by their relative path within their parent location. For instance, the following exemplifies how you could redirect a particular application in the old model:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>
  
  <span class="co"># Define rules to apply to one application, stored at &#39;/srv/shiny-server/app1&#39;</span>
  <span class="kw">application</span> /srv/shiny-server/app1 {
    <span class="kw">redirect</span> <span class="st">&quot;http://rstudio.com&quot;</span> 302 true<span class="kw">;</span>
  }
}</code></pre>
<p>In the new &quot;nested locations&quot; model, the equivalent would be:</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">location</span> / {
  <span class="kw">site_dir</span> /srv/shiny-server<span class="kw">;</span>

  <span class="co"># Define rules to apply to one application, stored at &#39;/srv/shiny-server/app1&#39;</span>
  <span class="kw">location</span> /app1 {
    <span class="kw">redirect</span> <span class="st">&quot;http://rstudio.com&quot;</span> 302 true<span class="kw">;</span>
  }
}</code></pre>
<p>This structure is much more powerful than simple <code>application</code> settings. The following configuration defines a parent location (<code>depts</code>) with some settings, then overrides those settings for a particular directory (<code>finance</code>) within that location.</p>
<pre class="sourceCode bash"><code class="sourceCode bash"><span class="kw">server</span> {
  <span class="kw">...</span>
  <span class="co"># Define the &#39;/depts&#39; location</span>
  <span class="kw">location</span> /depts {
    <span class="co"># Host a directory of applications</span>
    <span class="kw">site_dir</span> /srv/departmentApps<span class="kw">;</span>
    
    <span class="co"># Provide a default/global GAID</span>
    <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-12345-1&quot;</span><span class="kw">;</span>

    <span class="co"># Define the &#39;/finance&#39; location.</span>
    <span class="co"># Corresponds to the URL &#39;/depts/finance&#39;, and the filesystem path </span>
    <span class="co"># &#39;/srv/departmentApps/finance&#39; as defined by the parent location.</span>
    <span class="kw">location</span> /finance {
      <span class="co"># Provide a custom GAID for only this sub-location</span>
      <span class="kw">google_analytics_id</span> <span class="st">&quot;UA-54321-9&quot;</span><span class="kw">;</span>

      <span class="kw">location</span> /fall2014/app1 {
        <span class="kw">redirect</span> <span class="st">&quot;http://rstudio.com&quot;</span> 302 true<span class="kw">;</span>
      }
    }
  }
<span class="kw">...</span></code></pre>
<p>In this case, all applications stored in the <code>depts/finance/</code> directory would have a different Google Analytics ID than the rest of the applications on this server. Additionally, the application at <code>depts/finance/fall2014/app1</code> would be redirected to <code>http://rstudio.com</code>.</p>
<!--
TODO:
// Cookbook for integrating Shiny Server into existing apps
//   iframe, etc.
//   nginx or non-web-socket proxies
// Isolated LAN deployments
-->
</body>
</html>
